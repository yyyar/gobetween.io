{"version":3,"sources":["webpack:///webpack/bootstrap ea3b1b99b13f3f2221bb","webpack:///./gobetween.wiki/Introduction.md","webpack:///./gobetween.wiki/_Sidebar.md","webpack:///./gobetween.wiki/Access-Control.md","webpack:///./gobetween.wiki/Balancing.md","webpack:///./gobetween.wiki/Configuration.md","webpack:///./gobetween.wiki/Discovery.md","webpack:///./gobetween.wiki/Docker---Swarm-Balancing.md","webpack:///./gobetween.wiki/ElasticSearch-cluster-with-Exec-discovery.md","webpack:///./gobetween.wiki/Healthchecks.md","webpack:///./gobetween.wiki/Home.md","webpack:///./gobetween.wiki/Installation.md","webpack:///./gobetween.wiki/Performance-tests.md","webpack:///./gobetween.wiki/REST-API.md","webpack:///./gobetween.wiki/SRV-Balancing.md","webpack:///./gobetween.wiki/Service-balancing-with-Consul-discovery-and-Docker-Registrator.md","webpack:///./gobetween.wiki/Static-balancing.md","webpack:///./gobetween.wiki/TLS-Termination.md","webpack:///./gobetween.wiki/Windows-specific-notes.md","webpack:///./js/particles.js","webpack:///./js/doc.js","webpack:///./js/downloads.js","webpack:///./js/mobileNav.js","webpack:///./css/style.styl","webpack:///../~/markdown/lib/index.js","webpack:///../~/markdown/lib/markdown.js","webpack:///../~/simple-ajax/index.js","webpack:///../~/simple-ajax/~/query-string/query-string.js","webpack:///../~/webpack/buildin/global.js","webpack:///../~/webpack/~/node-libs-browser/~/events/events.js","webpack:///../~/webpack/~/node-libs-browser/~/process/browser.js","webpack:///../~/webpack/~/node-libs-browser/~/util/~/inherits/inherits_browser.js","webpack:///../~/webpack/~/node-libs-browser/~/util/support/isBufferBrowser.js","webpack:///../~/webpack/~/node-libs-browser/~/util/util.js","webpack:///./gobetween.wiki ^\\.\\/.*\\.md$","webpack:///./js/main.js"],"names":["pJS","tag_id","params","canvas_el","document","querySelector","canvas","el","w","offsetWidth","h","offsetHeight","particles","number","value","density","enable","value_area","color","shape","type","stroke","width","polygon","nb_sides","image","src","height","opacity","random","anim","speed","opacity_min","sync","size","size_min","line_linked","distance","move","direction","straight","out_mode","bounce","attract","rotateX","rotateY","array","interactivity","detect_on","events","onhover","mode","onclick","resize","modes","grab","bubble","duration","repulse","push","particles_nb","remove","mouse","retina_detect","fn","interact","vendors","tmp","Object","deepExtend","obj","size_value","size_anim_speed","move_speed","line_linked_distance","line_linked_width","mode_grab_distance","mode_bubble_distance","mode_bubble_size","mode_repulse_distance","retinaInit","window","devicePixelRatio","pxratio","retina","canvasInit","ctx","getContext","canvasSize","addEventListener","particlesEmpty","particlesCreate","particlesDraw","densityAutoParticles","canvasPaint","fillRect","canvasClear","clearRect","particle","position","radius","Math","size_status","vs","x","y","checkOverlap","Array","color_selected","floor","length","rgb","hexToRgb","r","undefined","g","b","s","l","hsl","opacity_status","vo","velbase","vx","vy","vx_i","vy_i","shape_type","shape_selected","sh","img","ratio","img_type","source_svg","createSvgImg","pushing","loaded","prototype","draw","p","radius_bubble","opacity_bubble","color_value","fillStyle","beginPath","arc","PI","rect","drawShape","drawImage","img_obj","closePath","strokeStyle","lineWidth","fill","i","particlesUpdate","ms","new_pos","x_left","x_right","y_top","y_bottom","isInArray","grabParticle","bubbleParticle","repulseParticle","j","p2","linkParticles","attractParticles","bounceParticles","particlesRefresh","cancelRequestAnimFrame","checkAnimFrame","drawAnimFrame","count_svg","start","p1","dx","dy","dist","sqrt","opacity_line","color_line","color_rgb_line","moveTo","lineTo","ax","ay","dist_p","pushParticles","nb","pos","pos_x","pos_y","removeParticles","splice","init","dx_mouse","dy_mouse","dist_mouse","status","dif","process","bubble_param","particles_param","p_obj_bubble","p_obj","id","bubble_duration_end","time_spent","value_tmp","bubble_clicking","click_pos_x","click_pos_y","Date","getTime","click_time","normVec","repulseRadius","velocity","repulseFactor","clamp","pow","repulse_finish","repulse_count","repulse_clicking","f","atan2","force","cos","sin","d","eventsListeners","e","clientX","clientY","offsetX","offsetY","setTimeout","area","nb_particles","missing_particles","abs","svgXml","rgbHex","coloredSvgXml","replace","m","svg","Blob","DOMURL","URL","webkitURL","url","createObjectURL","Image","revokeObjectURL","destroypJS","cancelAnimationFrame","pJSDom","c","startX","startY","sideLength","sideCountNumerator","sideCountDenominator","sideCount","decimalSides","interiorAngleDegrees","interiorAngle","save","translate","rotate","restore","exportImg","open","toDataURL","loadImg","img_error","xhr","XMLHttpRequest","onreadystatechange","data","readyState","currentTarget","response","checkBeforeDraw","console","log","send","requestAnimFrame","check","substr","someFunc","destination","source","property","constructor","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","webkitCancelRequestAnimationFrame","mozCancelRequestAnimationFrame","oCancelRequestAnimationFrame","msCancelRequestAnimationFrame","clearTimeout","hex","shorthandRegex","result","exec","parseInt","min","max","indexOf","particlesJS","pJS_tag","getElementById","pJS_canvas_class","exist_canvas","getElementsByClassName","removeChild","createElement","className","style","appendChild","load","path_config_json","JSON","parse","exports","page","location","pathname","match","documentationSideBar","loadDoc","fileName","link","querySelectorAll","file","require","err","innerHTML","innerText","scrollTo","difference","body","scrollTop","perTick","findPosY","curtop","offsetParent","offsetTop","target","nodeName","preventDefault","stopPropagation","hash","attributes","activeLink","title","screen","classList","setAttribute","RegExp","releases","method","dataType","on","event","linksWrap","currentVer","lastVersion","a","br","href","html_url","name","assets","os","browser_download_url","toHTML","sandwich","nav","parentNode","nextElementSibling","markdown","expose","Markdown","dialect","dialects","Gruber","Error","String","em_state","strong_state","debug_indent","md","toTree","options","input","toHTMLTree","renderJsonML","attrs","extract_attr","refs","references","html","convert_tree_to_html","merge_text_nodes","mk_block_toSource","uneval","toString","trailing","lineNumber","mk_block_inspect","util","inspect","mk_block","block","trail","line","arguments","toSource","count_lines","str","n","split_blocks","splitBlocks","startLine","re","blocks","line_no","lastIndex","processBlock","next","cbs","ord","__order__","__call__","call","res","isArray","debug","processInline","inline","custom_root","old_tree","tree","shift","apply","args","slice","unshift","print","loop_re_over_block","cb","valueOf","atxHeader","header","level","setextHeader","code","ret","lines","block_search","substring","join","horizRule","jsonml","lists","any_list","bullet_list","number_list","is_list_re","indent_re","regex_for_depth","depth","expand_tab","add","li","loose","nl","concat","add_to","what","is_str","get_contained_blocks","paragraphify","stack","list","last_li","sublist","pop","make_list","indent","loose_search","split","li_accumulate","tight_search","line_re","wanted_depth","found","contained","forEach","next_block","hr","blockquote","prev","abutting","processedBlock","attr","isEmpty","referenceDefn","ref","toLowerCase","para","__oneElement__","oneElement","text","patterns_or_re","previous_nodes","__patterns__","index","patterns","out","__escape__","escaped","charAt","alt","original","orig","DialectHelpers","inline_until_char","consumed","children","open_parens","len","autoLink","inlineCode","lineBreak","strong_em","tag","state_slot","other_slot","CloseTag","len_after","orig_match","other","state","last","buildBlockOrder","buildInlinePatterns","pattern","want","nodes","subclassDialect","Block","Inline","Maruku","processMetaHash","meta_string","meta","split_meta_hash","test","parts","in_quotes","letter","document_meta","pairs","key","block_meta","node","definition_list","tight","terms","defns","table","_split_on_unescaped","ch","leading_pipe","no_leading_pipe","html_attrs","align","trim","row","html_row","inline_meta","matches","before","k","arr","thisp","hasOwnProperty","root","content","render_tree","escapeHTML","tag_attrs","preprocessTreeNode","EventEmitter","queryString","tryParseJson","error","timeout","request","abort","emit","Ajax","settings","queryStringData","ajax","cors","XDomainRequest","cache","_","urlParts","parsedQueryStringData","stringify","responseText","_requestTimeout","withCredentials","contentType","setRequestHeader","requestedWith","auth","headerKey","headers","processData","create","module","reduce","param","val","decodeURIComponent","keys","map","val2","encodeURIComponent","define","self","Function","eval","_events","_maxListeners","defaultMaxListeners","setMaxListeners","isNumber","isNaN","TypeError","er","handler","listeners","isObject","context","isUndefined","isFunction","addListener","listener","newListener","warned","trace","once","fired","removeListener","removeAllListeners","listenerCount","evlistener","emitter","arg","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","run","nextTick","Item","browser","env","argv","version","versions","noop","off","binding","cwd","chdir","dir","umask","inherits","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","isBuffer","copy","readUInt8","formatRegExp","format","isString","objects","Number","isNull","deprecate","msg","global","noDeprecation","deprecated","throwDeprecation","traceDeprecation","debugs","debugEnviron","debuglog","set","NODE_DEBUG","toUpperCase","pid","opts","seen","stylize","stylizeNoColor","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styles","styleType","arrayToHash","idx","recurseTimes","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","formatError","isRegExp","isDate","base","braces","toUTCString","output","formatArray","formatProperty","reduceToSingleString","simple","desc","getOwnPropertyDescriptor","get","numLinesEst","cur","ar","isNullOrUndefined","isSymbol","objectToString","isPrimitive","o","pad","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","origin","prop","particlesJs","headeSection","headerHeight","getElementsByTagName","currentScrollTop","previusScrollTop"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC9DA,8JAA8J,iBAAiB,6ZAA6Z,mBAAmB,qWAAqW,mT;;;;;;ACAp8B,0mC;;;;;;ACAA,8bAA8b,UAAU,SAAS,WAAW,2YAA2Y,qBAAqB,aAAa,yBAAyB,aAAa,0BAA0B,aAAa,uBAAuB,oWAAoW,UAAU,uBAAuB,qBAAqB,aAAa,yBAAyB,aAAa,0BAA0B,aAAa,uBAAuB,0B;;;;;;ACAx/C,sJAAsJ,qEAAqE,QAAQ,wQAAwQ,oBAAoB,YAAY,oBAAoB,uoBAAuoB,2ZAA2Z,+B;;;;;;ACAjkD,gLAAgL,u0BAAu0B,qOAAqO,8MAA8M,OAAO,cAAc,QAAQ,oCAAoC,QAAQ,QAAQ,QAAQ,UAAU,MAAM,8B;;;;;;ACAnhD,ibAAib,wBAAwB,0BAA0B,ieAAie,QAAQ,6LAA6L,IAAI,QAAQ,MAAM,0CAA0C,cAAc,oBAAoB,cAAc,SAAS,cAAc,iEAAiE,QAAQ,2DAA2D,iCAAiC,QAAQ,0IAA0I,6cAA6c,YAAY,+BAA+B,6BAA6B,WAAW,mCAAmC,8CAA8C,oBAAoB,moBAAmoB,SAAS,8BAA8B,oBAAoB,+BAA+B,mBAAmB,6BAA6B,SAAS,+pCAA+pC,YAAY,4BAA4B,2BAA2B,uEAAuE,kBAAkB,+KAA+K,MAAM,0fAA0f,MAAM,UAAU,QAAQ,aAAa,QAAQ,UAAU,QAAQ,UAAU,QAAQ,YAAY,WAAW,cAAc,IAAI,MAAM,MAAM,UAAU,QAAQ,aAAa,QAAQ,UAAU,QAAQ,UAAU,QAAQ,YAAY,WAAW,cAAc,IAAI,2MAA2M,UAAU,0BAA0B,2BAA2B,+DAA+D,qBAAqB,qEAAqE,UAAU,8BAA8B,qBAAqB,qEAAqE,UAAU,gCAAgC,uBAAuB,8DAA8D,YAAY,kCAAkC,yBAAyB,gEAAgE,cAAc,6fAA6f,QAAQ,aAAa,QAAQ,uBAAuB,UAAU,2BAA2B,YAAY,uVAAuV,QAAQ,mCAAmC,QAAQ,mCAAmC,UAAU,mCAAmC,YAAY,0LAA0L,eAAe,+BAA+B,yBAAyB,+EAA+E,MAAM,88BAA88B,UAAU,0BAA0B,wBAAwB,QAAQ,UAAU,QAAQ,UAAU,kNAAkN,sQAAsQ,oBAAoB,oEAAoE,eAAe,4DAA4D,MAAM,+PAA+P,uBAAuB,gCAAgC,sBAAsB,mCAAmC,yBAAyB,mB;;;;;;ACAh9S,osBAAosB,cAAc,u9BAAu9B,oBAAoB,mBAAmB,SAAS,kBAAkB,YAAY,wDAAwD,SAAS,sBAAsB,QAAQ,mBAAmB,YAAY,8BAA8B,2BAA2B,+DAA+D,cAAc,yPAAyP,QAAQ,yBAAyB,QAAQ,gCAAgC,UAAU,mB;;;;;;ACAv0E,kgEAAkgE,oDAAoD,aAAa,WAAW,OAAO,YAAY,MAAM,UAAU,eAAe,uLAAuL,mcAAmc,sBAAsB,oBAAoB,SAAS,mBAAmB,YAAY,8CAA8C,UAAU,yBAAyB,+CAA+C,oBAAoB,QAAQ,mBAAmB,SAAS,iIAAiI,QAAQ,gCAAgC,UAAU,wBAAwB,iDAAiD,0CAA0C,OAAO,yCAAyC,OAAO,mBAAmB,QAAQ,yPAAyP,oC;;;;;;ACArnH,ghBAAghB,QAAQ,0kBAA0kB,UAAU,mBAAmB,QAAQ,gCAAgC,WAAW,0XAA0X,mYAAmY,UAAU,mBAAmB,QAAQ,yBAAyB,oCAAoC,yEAAyE,OAAO,6GAA6G,OAAO,qGAAqG,QAAQ,shBAAshB,mB;;;;;;ACAx1F,6R;;;;;;ACAA,8hBAA8hB,MAAM,KAAK,mOAAmO,MAAM,KAAK,8yC;;;;;;ACAvxB,sqBAAsqB,uBAAuB,4CAA4C,iCAAiC,WAAW,4BAA4B,IAAI,SAAS,uCAAuC,0CAA0C,0BAA0B,gDAAgD,cAAc,MAAM,wBAAwB,+BAA+B,mBAAmB,MAAM,wBAAwB,MAAM,sBAAsB,OAAO,2BAA2B,MAAM,gDAAgD,uBAAuB,yBAAyB,oCAAoC,IAAI,kJAAkJ,UAAU,kBAAkB,YAAY,4EAA4E,SAAS,+BAA+B,SAAS,qCAAqC,SAAS,sDAAsD,mBAAmB,SAAS,kBAAkB,YAAY,iDAAiD,QAAQ,eAAe,UAAU,mBAAmB,QAAQ,uBAAuB,2BAA2B,wCAAwC,OAAO,wCAAwC,OAAO,+BAA+B,OAAO,gCAAgC,QAAQ,8CAA8C,YAAY,0BAA0B,2BAA2B,iCAAiC,kBAAkB,+DAA+D,SAAS,stBAAstB,qBAAqB,0CAA0C,UAAU,0BAA0B,YAAY,GAAG,UAAU,oBAAoB,gCAAgC,gCAAgC,gCAAgC,GAAG,UAAU,YAAY,qBAAqB,GAAG,GAAG,iB;;;;;;ACAryG,ghBAAghB,WAAW,4HAA4H,WAAW,2CAA2C,UAAU,uIAAuI,uBAAuB,6CAA6C,sBAAsB,ikBAAikB,YAAY,mBAAmB,GAAG,gBAAgB,UAAU,+DAA+D,aAAa,SAAS,sBAAsB,eAAe,qBAAqB,UAAU,qBAAqB,YAAY,uBAAuB,aAAa,WAAW,yMAAyM,UAAU,mBAAmB,UAAU,2NAA2N,QAAQ,oGAAoG,4EAA4E,QAAQ,yDAAyD,8KAA8K,2GAA2G,IAAI,QAAQ,MAAM,GAAG,iFAAiF,QAAQ,kEAAkE,8BAA8B,qGAAqG,QAAQ,4CAA4C,QAAQ,uEAAuE,4EAA4E,QAAQ,yDAAyD,yFAAyF,QAAQ,8GAA8G,QAAQ,qGAAqG,YAAY,wBAAwB,sBAAsB,cAAc,gCAAgC,cAAc,gCAAgC,eAAe,sCAAsC,eAAe,sCAAsC,cAAc,cAAc,oBAAoB,UAAU,6BAA6B,UAAU,6BAA6B,cAAc,8BAA8B,YAAY,8BAA8B,WAAW,GAAG,wBAAwB,UAAU,kCAAkC,uBAAuB,kCAAkC,wBAAwB,kCAAkC,yBAAyB,kCAAkC,QAAQ,4CAA4C,QAAQ,4CAA4C,eAAe,kDAAkD,eAAe,yCAAyC,WAAW,iDAAiD,mB;;;;;;ACA3mJ,qYAAqY,67BAA67B,cAAc,sOAAsO,cAAc,0JAA0J,oBAAoB,mBAAmB,SAAS,kBAAkB,YAAY,wDAAwD,cAAc,iBAAiB,SAAS,8BAA8B,sBAAsB,qDAAqD,iCAAiC,gIAAgI,QAAQ,iCAAiC,UAAU,oBAAoB,WAAW,uG;;;;;;ACAxuE,6lEAA6lE,wBAAwB,mUAAmU,YAAY,eAAe,mBAAmB,YAAY,mBAAmB,gBAAgB,QAAQ,gBAAgB,aAAa,cAAc,QAAQ,iBAAiB,aAAa,aAAa,QAAQ,MAAM,aAAa,eAAe,QAAQ,UAAU,cAAc,aAAa,sCAAsC,mBAAmB,SAAS,kKAAkK,YAAY,eAAe,oBAAoB,YAAY,mBAAmB,gBAAgB,QAAQ,gBAAgB,aAAa,cAAc,QAAQ,iBAAiB,aAAa,aAAa,QAAQ,8BAA8B,aAAa,eAAe,QAAQ,UAAU,aAAa,mBAAmB,mBAAmB,gBAAgB,SAAS,eAAe,QAAQ,eAAe,IAAI,iEAAiE,YAAY,eAAe,oBAAoB,YAAY,mBAAmB,gBAAgB,QAAQ,gBAAgB,aAAa,cAAc,QAAQ,iBAAiB,aAAa,aAAa,QAAQ,8BAA8B,aAAa,eAAe,QAAQ,UAAU,aAAa,mBAAmB,mBAAmB,gBAAgB,SAAS,eAAe,QAAQ,eAAe,IAAI,kEAAkE,YAAY,eAAe,oBAAoB,YAAY,mBAAmB,gBAAgB,QAAQ,gBAAgB,aAAa,cAAc,QAAQ,iBAAiB,aAAa,aAAa,QAAQ,8BAA8B,aAAa,eAAe,QAAQ,UAAU,aAAa,mBAAmB,mBAAmB,gBAAgB,SAAS,eAAe,QAAQ,eAAe,IAAI,0JAA0J,2BAA2B,k5EAAk5E,8nEAA8nE,8BAA8B,mGAAmG,8BAA8B,yLAAyL,8BAA8B,mGAAmG,8BAA8B,yLAAyL,8BAA8B,mGAAmG,8BAA8B,soCAAsoC,mBAAmB,mBAAmB,SAAS,mBAAmB,gBAAgB,uDAAuD,SAAS,+BAA+B,SAAS,qCAAqC,QAAQ,qDAAqD,YAAY,mCAAmC,6BAA6B,eAAe,6BAA6B,eAAe,6BAA6B,uHAAuH,QAAQ,uBAAuB,QAAQ,gCAAgC,UAAU,oCAAoC,WAAW,4VAA4V,sBAAsB,mBAAmB,SAAS,kBAAkB,YAAY,wDAAwD,cAAc,iBAAiB,SAAS,8BAA8B,oBAAoB,qDAAqD,yCAAyC,gIAAgI,QAAQ,iCAAiC,UAAU,oBAAoB,WAAW,sCAAsC,sBAAsB,mBAAmB,SAAS,kBAAkB,YAAY,wDAAwD,cAAc,iBAAiB,SAAS,8BAA8B,oBAAoB,qDAAqD,yCAAyC,gIAAgI,QAAQ,iCAAiC,UAAU,oBAAoB,WAAW,yQAAyQ,IAAI,IAAI,IAAI,iCAAiC,IAAI,IAAI,IAAI,6DAA6D,qBAAqB,yBAAyB,gBAAgB,MAAM,IAAI,UAAU,IAAI,8CAA8C,iBAAiB,qDAAqD,qDAAqD,qBAAqB,sDAAsD,oYAAoY,+YAA+Y,IAAI,IAAI,IAAI,iCAAiC,IAAI,IAAI,IAAI,6DAA6D,qBAAqB,yBAAyB,gBAAgB,MAAM,IAAI,UAAU,IAAI,8CAA8C,iBAAiB,qDAAqD,qDAAqD,qBAAqB,sDAAsD,oYAAoY,owC;;;;;;ACA1ve,iUAAiU,sBAAsB,mBAAmB,SAAS,kBAAkB,YAAY,yDAAyD,SAAS,+BAA+B,SAAS,qCAAqC,QAAQ,6CAA6C,YAAY,6BAA6B,6BAA6B,aAAa,6BAA6B,aAAa,6BAA6B,+kBAA+kB,QAAQ,+BAA+B,UAAU,gCAAgC,WAAW,8HAA8H,oBAAoB,mBAAmB,SAAS,mBAAmB,gBAAgB,yDAAyD,SAAS,+BAA+B,SAAS,qCAAqC,QAAQ,qDAAqD,YAAY,mCAAmC,6BAA6B,eAAe,6BAA6B,eAAe,6BAA6B,uHAAuH,QAAQ,uBAAuB,QAAQ,gCAAgC,UAAU,oCAAoC,WAAW,mB;;;;;;ACAltE,wWAAwW,SAAS,0EAA0E,SAAS,sBAAsB,uBAAuB,qDAAqD,uBAAuB,yDAAyD,UAAU,iCAAiC,UAAU,SAAS,UAAU,SAAS,YAAY,SAAS,YAAY,sDAAsD,YAAY,iTAAiT,4H;;;;;;ACA3lC,qRAAqR,qDAAqD,wBAAwB,wDAAwD,QAAQ,UAAU,QAAQ,UAAU,uGAAuG,+DAA+D,wBAAwB,0DAA0D,OAAO,SAAS,OAAO,SAAS,oB;;;;;;;;;;;ACAttB;;;;;;;;;AASA,IAAIA,MAAM,aAASC,MAAT,EAAiBC,MAAjB,EAAwB;;AAEhC,MAAIC,YAAYC,SAASC,aAAT,CAAuB,MAAIJ,MAAJ,GAAW,4BAAlC,CAAhB;;AAEA;AACA,OAAKD,GAAL,GAAW;AACTM,YAAQ;AACNC,UAAIJ,SADE;AAENK,SAAGL,UAAUM,WAFP;AAGNC,SAAGP,UAAUQ;AAHP,KADC;AAMTC,eAAW;AACTC,cAAQ;AACNC,eAAO,GADD;AAENC,iBAAS;AACPC,kBAAQ,IADD;AAEPC,sBAAY;AAFL;AAFH,OADC;AAQTC,aAAO;AACLJ,eAAO;AADF,OARE;AAWTK,aAAO;AACLC,cAAM,QADD;AAELC,gBAAQ;AACNC,iBAAO,CADD;AAENJ,iBAAO;AAFD,SAFH;AAMLK,iBAAS;AACPC,oBAAU;AADH,SANJ;AASLC,eAAO;AACLC,eAAK,EADA;AAELJ,iBAAO,GAFF;AAGLK,kBAAQ;AAHH;AATF,OAXE;AA0BTC,eAAS;AACPd,eAAO,CADA;AAEPe,gBAAQ,KAFD;AAGPC,cAAM;AACJd,kBAAQ,KADJ;AAEJe,iBAAO,CAFH;AAGJC,uBAAa,CAHT;AAIJC,gBAAM;AAJF;AAHC,OA1BA;AAoCTC,YAAM;AACJpB,eAAO,EADH;AAEJe,gBAAQ,KAFJ;AAGJC,cAAM;AACJd,kBAAQ,KADJ;AAEJe,iBAAO,EAFH;AAGJI,oBAAU,CAHN;AAIJF,gBAAM;AAJF;AAHF,OApCG;AA8CTG,mBAAa;AACXpB,gBAAQ,IADG;AAEXqB,kBAAU,GAFC;AAGXnB,eAAO,MAHI;AAIXU,iBAAS,CAJE;AAKXN,eAAO;AALI,OA9CJ;AAqDTgB,YAAM;AACJtB,gBAAQ,IADJ;AAEJe,eAAO,CAFH;AAGJQ,mBAAW,MAHP;AAIJV,gBAAQ,KAJJ;AAKJW,kBAAU,KALN;AAMJC,kBAAU,KANN;AAOJC,gBAAQ,KAPJ;AAQJC,iBAAS;AACP3B,kBAAQ,KADD;AAEP4B,mBAAS,IAFF;AAGPC,mBAAS;AAHF;AARL,OArDG;AAmETC,aAAO;AAnEE,KANF;AA2ETC,mBAAe;AACbC,iBAAW,QADE;AAEbC,cAAQ;AACNC,iBAAS;AACPlC,kBAAQ,IADD;AAEPmC,gBAAM;AAFC,SADH;AAKNC,iBAAS;AACPpC,kBAAQ,IADD;AAEPmC,gBAAM;AAFC,SALH;AASNE,gBAAQ;AATF,OAFK;AAabC,aAAO;AACLC,cAAK;AACHlB,oBAAU,GADP;AAEHD,uBAAY;AACVR,qBAAS;AADC;AAFT,SADA;AAOL4B,gBAAO;AACLnB,oBAAU,GADL;AAELH,gBAAM,EAFD;AAGLuB,oBAAU;AAHL,SAPF;AAYLC,iBAAQ;AACNrB,oBAAU,GADJ;AAENoB,oBAAU;AAFJ,SAZH;AAgBLE,cAAK;AACHC,wBAAc;AADX,SAhBA;AAmBLC,gBAAO;AACLD,wBAAc;AADT;AAnBF,OAbM;AAoCbE,aAAM;AApCO,KA3EN;AAiHTC,mBAAe,KAjHN;AAkHTC,QAAI;AACFC,gBAAU,EADR;AAEFX,aAAO,EAFL;AAGFY,eAAQ;AAHN,KAlHK;AAuHTC,SAAK;AAvHI,GAAX;;AA0HA,MAAInE,MAAM,KAAKA,GAAf;;AAEA;AACA,MAAGE,MAAH,EAAU;AACRkE,WAAOC,UAAP,CAAkBrE,GAAlB,EAAuBE,MAAvB;AACD;;AAEDF,MAAImE,GAAJ,CAAQG,GAAR,GAAc;AACZC,gBAAYvE,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBpB,KADnB;AAEZ0D,qBAAiBxE,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBJ,IAAnB,CAAwBC,KAF7B;AAGZ0C,gBAAYzE,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBP,KAHnB;AAIZ2C,0BAAsB1E,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BC,QAJpC;AAKZsC,uBAAmB3E,IAAIY,SAAJ,CAAcwB,WAAd,CAA0Bd,KALjC;AAMZsD,wBAAoB5E,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBC,IAAxB,CAA6BlB,QANrC;AAOZwC,0BAAsB7E,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BnB,QAPzC;AAQZyC,sBAAkB9E,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BtB,IARrC;AASZ6C,2BAAuB/E,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBI,OAAxB,CAAgCrB;AAT3C,GAAd;;AAaArC,MAAIgE,EAAJ,CAAOgB,UAAP,GAAoB,YAAU;;AAE5B,QAAGhF,IAAI+D,aAAJ,IAAqBkB,OAAOC,gBAAP,GAA0B,CAAlD,EAAoD;AAClDlF,UAAIM,MAAJ,CAAW6E,OAAX,GAAqBF,OAAOC,gBAA5B;AACAlF,UAAImE,GAAJ,CAAQiB,MAAR,GAAiB,IAAjB;AACD,KAHD,MAII;AACFpF,UAAIM,MAAJ,CAAW6E,OAAX,GAAqB,CAArB;AACAnF,UAAImE,GAAJ,CAAQiB,MAAR,GAAiB,KAAjB;AACD;;AAEDpF,QAAIM,MAAJ,CAAWE,CAAX,GAAeR,IAAIM,MAAJ,CAAWC,EAAX,CAAcE,WAAd,GAA4BT,IAAIM,MAAJ,CAAW6E,OAAtD;AACAnF,QAAIM,MAAJ,CAAWI,CAAX,GAAeV,IAAIM,MAAJ,CAAWC,EAAX,CAAcI,YAAd,GAA6BX,IAAIM,MAAJ,CAAW6E,OAAvD;;AAEAnF,QAAIY,SAAJ,CAAcsB,IAAd,CAAmBpB,KAAnB,GAA2Bd,IAAImE,GAAJ,CAAQG,GAAR,CAAYC,UAAZ,GAAyBvE,IAAIM,MAAJ,CAAW6E,OAA/D;AACAnF,QAAIY,SAAJ,CAAcsB,IAAd,CAAmBJ,IAAnB,CAAwBC,KAAxB,GAAgC/B,IAAImE,GAAJ,CAAQG,GAAR,CAAYE,eAAZ,GAA8BxE,IAAIM,MAAJ,CAAW6E,OAAzE;AACAnF,QAAIY,SAAJ,CAAc0B,IAAd,CAAmBP,KAAnB,GAA2B/B,IAAImE,GAAJ,CAAQG,GAAR,CAAYG,UAAZ,GAAyBzE,IAAIM,MAAJ,CAAW6E,OAA/D;AACAnF,QAAIY,SAAJ,CAAcwB,WAAd,CAA0BC,QAA1B,GAAqCrC,IAAImE,GAAJ,CAAQG,GAAR,CAAYI,oBAAZ,GAAmC1E,IAAIM,MAAJ,CAAW6E,OAAnF;AACAnF,QAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBC,IAAxB,CAA6BlB,QAA7B,GAAwCrC,IAAImE,GAAJ,CAAQG,GAAR,CAAYM,kBAAZ,GAAiC5E,IAAIM,MAAJ,CAAW6E,OAApF;AACAnF,QAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BnB,QAA/B,GAA0CrC,IAAImE,GAAJ,CAAQG,GAAR,CAAYO,oBAAZ,GAAmC7E,IAAIM,MAAJ,CAAW6E,OAAxF;AACAnF,QAAIY,SAAJ,CAAcwB,WAAd,CAA0Bd,KAA1B,GAAkCtB,IAAImE,GAAJ,CAAQG,GAAR,CAAYK,iBAAZ,GAAgC3E,IAAIM,MAAJ,CAAW6E,OAA7E;AACAnF,QAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BtB,IAA/B,GAAsClC,IAAImE,GAAJ,CAAQG,GAAR,CAAYQ,gBAAZ,GAA+B9E,IAAIM,MAAJ,CAAW6E,OAAhF;AACAnF,QAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBI,OAAxB,CAAgCrB,QAAhC,GAA2CrC,IAAImE,GAAJ,CAAQG,GAAR,CAAYS,qBAAZ,GAAoC/E,IAAIM,MAAJ,CAAW6E,OAA1F;AAED,GAxBD;;AA4BA;;AAEAnF,MAAIgE,EAAJ,CAAOqB,UAAP,GAAoB,YAAU;AAC5BrF,QAAIM,MAAJ,CAAWgF,GAAX,GAAiBtF,IAAIM,MAAJ,CAAWC,EAAX,CAAcgF,UAAd,CAAyB,IAAzB,CAAjB;AACD,GAFD;;AAIAvF,MAAIgE,EAAJ,CAAOwB,UAAP,GAAoB,YAAU;;AAE5BxF,QAAIM,MAAJ,CAAWC,EAAX,CAAce,KAAd,GAAsBtB,IAAIM,MAAJ,CAAWE,CAAjC;AACAR,QAAIM,MAAJ,CAAWC,EAAX,CAAcoB,MAAd,GAAuB3B,IAAIM,MAAJ,CAAWI,CAAlC;;AAEA,QAAGV,OAAOA,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBI,MAAnC,EAA0C;;AAExC4B,aAAOQ,gBAAP,CAAwB,QAAxB,EAAkC,YAAU;;AAExCzF,YAAIM,MAAJ,CAAWE,CAAX,GAAeR,IAAIM,MAAJ,CAAWC,EAAX,CAAcE,WAA7B;AACAT,YAAIM,MAAJ,CAAWI,CAAX,GAAeV,IAAIM,MAAJ,CAAWC,EAAX,CAAcI,YAA7B;;AAEA;AACA,YAAGX,IAAImE,GAAJ,CAAQiB,MAAX,EAAkB;AAChBpF,cAAIM,MAAJ,CAAWE,CAAX,IAAgBR,IAAIM,MAAJ,CAAW6E,OAA3B;AACAnF,cAAIM,MAAJ,CAAWI,CAAX,IAAgBV,IAAIM,MAAJ,CAAW6E,OAA3B;AACD;;AAEDnF,YAAIM,MAAJ,CAAWC,EAAX,CAAce,KAAd,GAAsBtB,IAAIM,MAAJ,CAAWE,CAAjC;AACAR,YAAIM,MAAJ,CAAWC,EAAX,CAAcoB,MAAd,GAAuB3B,IAAIM,MAAJ,CAAWI,CAAlC;;AAEA;AACA,YAAG,CAACV,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBtB,MAAvB,EAA8B;AAC5BhB,cAAIgE,EAAJ,CAAO0B,cAAP;AACA1F,cAAIgE,EAAJ,CAAO2B,eAAP;AACA3F,cAAIgE,EAAJ,CAAO4B,aAAP;AACA5F,cAAIgE,EAAJ,CAAOE,OAAP,CAAe2B,oBAAf;AACD;;AAEH;AACA7F,YAAIgE,EAAJ,CAAOE,OAAP,CAAe2B,oBAAf;AAED,OAzBD;AA2BD;AAEF,GApCD;;AAuCA7F,MAAIgE,EAAJ,CAAO8B,WAAP,GAAqB,YAAU;AAC7B9F,QAAIM,MAAJ,CAAWgF,GAAX,CAAeS,QAAf,CAAwB,CAAxB,EAA2B,CAA3B,EAA8B/F,IAAIM,MAAJ,CAAWE,CAAzC,EAA4CR,IAAIM,MAAJ,CAAWI,CAAvD;AACD,GAFD;;AAIAV,MAAIgE,EAAJ,CAAOgC,WAAP,GAAqB,YAAU;AAC7BhG,QAAIM,MAAJ,CAAWgF,GAAX,CAAeW,SAAf,CAAyB,CAAzB,EAA4B,CAA5B,EAA+BjG,IAAIM,MAAJ,CAAWE,CAA1C,EAA6CR,IAAIM,MAAJ,CAAWI,CAAxD;AACD,GAFD;;AAKA;;AAEAV,MAAIgE,EAAJ,CAAOkC,QAAP,GAAkB,UAAShF,KAAT,EAAgBU,OAAhB,EAAyBuE,QAAzB,EAAkC;;AAElD;AACA,SAAKC,MAAL,GAAc,CAACpG,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBL,MAAnB,GAA4BwE,KAAKxE,MAAL,EAA5B,GAA4C,CAA7C,IAAkD7B,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBpB,KAAnF;AACA,QAAGd,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBJ,IAAnB,CAAwBd,MAA3B,EAAkC;AAChC,WAAKsF,WAAL,GAAmB,KAAnB;AACA,WAAKC,EAAL,GAAUvG,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBJ,IAAnB,CAAwBC,KAAxB,GAAgC,GAA1C;AACA,UAAG,CAAC/B,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBJ,IAAnB,CAAwBG,IAA5B,EAAiC;AAC/B,aAAKsE,EAAL,GAAU,KAAKA,EAAL,GAAUF,KAAKxE,MAAL,EAApB;AACD;AACF;;AAED;AACA,SAAK2E,CAAL,GAASL,WAAWA,SAASK,CAApB,GAAwBH,KAAKxE,MAAL,KAAgB7B,IAAIM,MAAJ,CAAWE,CAA5D;AACA,SAAKiG,CAAL,GAASN,WAAWA,SAASM,CAApB,GAAwBJ,KAAKxE,MAAL,KAAgB7B,IAAIM,MAAJ,CAAWI,CAA5D;;AAEA;AACA,QAAG,KAAK8F,CAAL,GAASxG,IAAIM,MAAJ,CAAWE,CAAX,GAAe,KAAK4F,MAAL,GAAY,CAAvC,EAA0C,KAAKI,CAAL,GAAS,KAAKA,CAAL,GAAS,KAAKJ,MAAvB,CAA1C,KACK,IAAG,KAAKI,CAAL,GAAS,KAAKJ,MAAL,GAAY,CAAxB,EAA2B,KAAKI,CAAL,GAAS,KAAKA,CAAL,GAAS,KAAKJ,MAAvB;AAChC,QAAG,KAAKK,CAAL,GAASzG,IAAIM,MAAJ,CAAWI,CAAX,GAAe,KAAK0F,MAAL,GAAY,CAAvC,EAA0C,KAAKK,CAAL,GAAS,KAAKA,CAAL,GAAS,KAAKL,MAAvB,CAA1C,KACK,IAAG,KAAKK,CAAL,GAAS,KAAKL,MAAL,GAAY,CAAxB,EAA2B,KAAKK,CAAL,GAAS,KAAKA,CAAL,GAAS,KAAKL,MAAvB;;AAEhC;AACA,QAAGpG,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBI,MAAtB,EAA6B;AAC3B1C,UAAIgE,EAAJ,CAAOE,OAAP,CAAewC,YAAf,CAA4B,IAA5B,EAAkCP,QAAlC;AACD;;AAED;AACA,SAAKjF,KAAL,GAAa,EAAb;AACA,QAAG,QAAOA,MAAMJ,KAAb,KAAuB,QAA1B,EAAmC;;AAEjC,UAAGI,MAAMJ,KAAN,YAAuB6F,KAA1B,EAAgC;AAC9B,YAAIC,iBAAiB1F,MAAMJ,KAAN,CAAYuF,KAAKQ,KAAL,CAAWR,KAAKxE,MAAL,KAAgB7B,IAAIY,SAAJ,CAAcM,KAAd,CAAoBJ,KAApB,CAA0BgG,MAArD,CAAZ,CAArB;AACA,aAAK5F,KAAL,CAAW6F,GAAX,GAAiBC,SAASJ,cAAT,CAAjB;AACD,OAHD,MAGK;AACH,YAAG1F,MAAMJ,KAAN,CAAYmG,CAAZ,IAAiBC,SAAjB,IAA8BhG,MAAMJ,KAAN,CAAYqG,CAAZ,IAAiBD,SAA/C,IAA4DhG,MAAMJ,KAAN,CAAYsG,CAAZ,IAAiBF,SAAhF,EAA0F;AACxF,eAAKhG,KAAL,CAAW6F,GAAX,GAAiB;AACfE,eAAG/F,MAAMJ,KAAN,CAAYmG,CADA;AAEfE,eAAGjG,MAAMJ,KAAN,CAAYqG,CAFA;AAGfC,eAAGlG,MAAMJ,KAAN,CAAYsG;AAHA,WAAjB;AAKD;AACD,YAAGlG,MAAMJ,KAAN,CAAYJ,CAAZ,IAAiBwG,SAAjB,IAA8BhG,MAAMJ,KAAN,CAAYuG,CAAZ,IAAiBH,SAA/C,IAA4DhG,MAAMJ,KAAN,CAAYwG,CAAZ,IAAiBJ,SAAhF,EAA0F;AACxF,eAAKhG,KAAL,CAAWqG,GAAX,GAAiB;AACf7G,eAAGQ,MAAMJ,KAAN,CAAYJ,CADA;AAEf2G,eAAGnG,MAAMJ,KAAN,CAAYuG,CAFA;AAGfC,eAAGpG,MAAMJ,KAAN,CAAYwG;AAHA,WAAjB;AAKD;AACF;AAEF,KAtBD,MAuBK,IAAGpG,MAAMJ,KAAN,IAAe,QAAlB,EAA2B;AAC9B,WAAKI,KAAL,CAAW6F,GAAX,GAAiB;AACfE,WAAIZ,KAAKQ,KAAL,CAAWR,KAAKxE,MAAL,MAAiB,MAAM,CAAN,GAAU,CAA3B,CAAX,IAA4C,CADjC;AAEfsF,WAAId,KAAKQ,KAAL,CAAWR,KAAKxE,MAAL,MAAiB,MAAM,CAAN,GAAU,CAA3B,CAAX,IAA4C,CAFjC;AAGfuF,WAAIf,KAAKQ,KAAL,CAAWR,KAAKxE,MAAL,MAAiB,MAAM,CAAN,GAAU,CAA3B,CAAX,IAA4C;AAHjC,OAAjB;AAKD,KANI,MAOA,IAAG,OAAOX,MAAMJ,KAAb,IAAuB,QAA1B,EAAmC;AACtC,WAAKI,KAAL,GAAaA,KAAb;AACA,WAAKA,KAAL,CAAW6F,GAAX,GAAiBC,SAAS,KAAK9F,KAAL,CAAWJ,KAApB,CAAjB;AACD;;AAED;AACA,SAAKc,OAAL,GAAe,CAAC5B,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBC,MAAtB,GAA+BwE,KAAKxE,MAAL,EAA/B,GAA+C,CAAhD,IAAqD7B,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBd,KAA1F;AACA,QAAGd,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBE,IAAtB,CAA2Bd,MAA9B,EAAqC;AACnC,WAAKwG,cAAL,GAAsB,KAAtB;AACA,WAAKC,EAAL,GAAUzH,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBE,IAAtB,CAA2BC,KAA3B,GAAmC,GAA7C;AACA,UAAG,CAAC/B,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBE,IAAtB,CAA2BG,IAA/B,EAAoC;AAClC,aAAKwF,EAAL,GAAU,KAAKA,EAAL,GAAUpB,KAAKxE,MAAL,EAApB;AACD;AACF;;AAED;AACA,QAAI6F,UAAU,EAAd;AACA,YAAO1H,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBC,SAA1B;AACE,WAAK,KAAL;AACEmF,kBAAU,EAAElB,GAAE,CAAJ,EAAOC,GAAE,CAAC,CAAV,EAAV;AACF;AACA,WAAK,WAAL;AACEiB,kBAAU,EAAElB,GAAE,GAAJ,EAASC,GAAE,CAAC,GAAZ,EAAV;AACF;AACA,WAAK,OAAL;AACEiB,kBAAU,EAAElB,GAAE,CAAJ,EAAOC,GAAE,CAAC,CAAV,EAAV;AACF;AACA,WAAK,cAAL;AACEiB,kBAAU,EAAElB,GAAE,GAAJ,EAASC,GAAE,GAAX,EAAV;AACF;AACA,WAAK,QAAL;AACEiB,kBAAU,EAAElB,GAAE,CAAJ,EAAOC,GAAE,CAAT,EAAV;AACF;AACA,WAAK,aAAL;AACEiB,kBAAU,EAAElB,GAAE,CAAC,GAAL,EAAUC,GAAE,CAAZ,EAAV;AACF;AACA,WAAK,MAAL;AACEiB,kBAAU,EAAElB,GAAE,CAAC,CAAL,EAAQC,GAAE,CAAV,EAAV;AACF;AACA,WAAK,UAAL;AACEiB,kBAAU,EAAElB,GAAE,CAAC,GAAL,EAAUC,GAAE,CAAC,GAAb,EAAV;AACF;AACA;AACEiB,kBAAU,EAAElB,GAAE,CAAJ,EAAOC,GAAE,CAAT,EAAV;AACF;AA3BF;;AA8BA,QAAGzG,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBE,QAAtB,EAA+B;AAC7B,WAAKmF,EAAL,GAAUD,QAAQlB,CAAlB;AACA,WAAKoB,EAAL,GAAUF,QAAQjB,CAAlB;AACA,UAAGzG,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBT,MAAtB,EAA6B;AAC3B,aAAK8F,EAAL,GAAU,KAAKA,EAAL,GAAWtB,KAAKxE,MAAL,EAArB;AACA,aAAK+F,EAAL,GAAU,KAAKA,EAAL,GAAWvB,KAAKxE,MAAL,EAArB;AACD;AACF,KAPD,MAOK;AACH,WAAK8F,EAAL,GAAUD,QAAQlB,CAAR,GAAYH,KAAKxE,MAAL,EAAZ,GAA0B,GAApC;AACA,WAAK+F,EAAL,GAAUF,QAAQjB,CAAR,GAAYJ,KAAKxE,MAAL,EAAZ,GAA0B,GAApC;AACD;;AAED;AACA;AACA;;AAEA,SAAKgG,IAAL,GAAY,KAAKF,EAAjB;AACA,SAAKG,IAAL,GAAY,KAAKF,EAAjB;;AAIA;;AAEA,QAAIG,aAAa/H,IAAIY,SAAJ,CAAcO,KAAd,CAAoBC,IAArC;AACA,QAAG,QAAO2G,UAAP,yCAAOA,UAAP,MAAsB,QAAzB,EAAkC;AAChC,UAAGA,sBAAsBpB,KAAzB,EAA+B;AAC7B,YAAIqB,iBAAiBD,WAAW1B,KAAKQ,KAAL,CAAWR,KAAKxE,MAAL,KAAgBkG,WAAWjB,MAAtC,CAAX,CAArB;AACA,aAAK3F,KAAL,GAAa6G,cAAb;AACD;AACF,KALD,MAKK;AACH,WAAK7G,KAAL,GAAa4G,UAAb;AACD;;AAED,QAAG,KAAK5G,KAAL,IAAc,OAAjB,EAAyB;AACvB,UAAI8G,KAAKjI,IAAIY,SAAJ,CAAcO,KAAvB;AACA,WAAK+G,GAAL,GAAW;AACTxG,aAAKuG,GAAGxG,KAAH,CAASC,GADL;AAETyG,eAAOF,GAAGxG,KAAH,CAASH,KAAT,GAAiB2G,GAAGxG,KAAH,CAASE;AAFxB,OAAX;AAIA,UAAG,CAAC,KAAKuG,GAAL,CAASC,KAAb,EAAoB,KAAKD,GAAL,CAASC,KAAT,GAAiB,CAAjB;AACpB,UAAGnI,IAAImE,GAAJ,CAAQiE,QAAR,IAAoB,OAApB,IAA+BpI,IAAImE,GAAJ,CAAQkE,UAAR,IAAsBnB,SAAxD,EAAkE;AAChElH,YAAIgE,EAAJ,CAAOE,OAAP,CAAeoE,YAAf,CAA4B,IAA5B;AACA,YAAGtI,IAAImE,GAAJ,CAAQoE,OAAX,EAAmB;AACjB,eAAKL,GAAL,CAASM,MAAT,GAAkB,KAAlB;AACD;AACF;AACF;AAIF,GA5JD;;AA+JAxI,MAAIgE,EAAJ,CAAOkC,QAAP,CAAgBuC,SAAhB,CAA0BC,IAA1B,GAAiC,YAAW;;AAE1C,QAAIC,IAAI,IAAR;;AAEA,QAAGA,EAAEC,aAAF,IAAmB1B,SAAtB,EAAgC;AAC9B,UAAId,SAASuC,EAAEC,aAAf;AACD,KAFD,MAEK;AACH,UAAIxC,SAASuC,EAAEvC,MAAf;AACD;;AAED,QAAGuC,EAAEE,cAAF,IAAoB3B,SAAvB,EAAiC;AAC/B,UAAItF,UAAU+G,EAAEE,cAAhB;AACD,KAFD,MAEK;AACH,UAAIjH,UAAU+G,EAAE/G,OAAhB;AACD;;AAED,QAAG+G,EAAEzH,KAAF,CAAQ6F,GAAX,EAAe;AACb,UAAI+B,cAAc,UAAQH,EAAEzH,KAAF,CAAQ6F,GAAR,CAAYE,CAApB,GAAsB,GAAtB,GAA0B0B,EAAEzH,KAAF,CAAQ6F,GAAR,CAAYI,CAAtC,GAAwC,GAAxC,GAA4CwB,EAAEzH,KAAF,CAAQ6F,GAAR,CAAYK,CAAxD,GAA0D,GAA1D,GAA8DxF,OAA9D,GAAsE,GAAxF;AACD,KAFD,MAEK;AACH,UAAIkH,cAAc,UAAQH,EAAEzH,KAAF,CAAQqG,GAAR,CAAY7G,CAApB,GAAsB,GAAtB,GAA0BiI,EAAEzH,KAAF,CAAQqG,GAAR,CAAYF,CAAtC,GAAwC,IAAxC,GAA6CsB,EAAEzH,KAAF,CAAQqG,GAAR,CAAYD,CAAzD,GAA2D,IAA3D,GAAgE1F,OAAhE,GAAwE,GAA1F;AACD;;AAED5B,QAAIM,MAAJ,CAAWgF,GAAX,CAAeyD,SAAf,GAA2BD,WAA3B;AACA9I,QAAIM,MAAJ,CAAWgF,GAAX,CAAe0D,SAAf;;AAEA,YAAOL,EAAExH,KAAT;;AAEE,WAAK,QAAL;AACEnB,YAAIM,MAAJ,CAAWgF,GAAX,CAAe2D,GAAf,CAAmBN,EAAEnC,CAArB,EAAwBmC,EAAElC,CAA1B,EAA6BL,MAA7B,EAAqC,CAArC,EAAwCC,KAAK6C,EAAL,GAAU,CAAlD,EAAqD,KAArD;AACF;;AAEA,WAAK,MAAL;AACElJ,YAAIM,MAAJ,CAAWgF,GAAX,CAAe6D,IAAf,CAAoBR,EAAEnC,CAAF,GAAIJ,MAAxB,EAAgCuC,EAAElC,CAAF,GAAIL,MAApC,EAA4CA,SAAO,CAAnD,EAAsDA,SAAO,CAA7D;AACF;;AAEA,WAAK,UAAL;AACEpG,YAAIgE,EAAJ,CAAOE,OAAP,CAAekF,SAAf,CAAyBpJ,IAAIM,MAAJ,CAAWgF,GAApC,EAAyCqD,EAAEnC,CAAF,GAAIJ,MAA7C,EAAqDuC,EAAElC,CAAF,GAAIL,SAAS,IAAlE,EAAwEA,SAAO,CAA/E,EAAkF,CAAlF,EAAqF,CAArF;AACF;;AAEA,WAAK,SAAL;AACEpG,YAAIgE,EAAJ,CAAOE,OAAP,CAAekF,SAAf,CACEpJ,IAAIM,MAAJ,CAAWgF,GADb,EAEEqD,EAAEnC,CAAF,GAAMJ,UAAUpG,IAAIY,SAAJ,CAAcO,KAAd,CAAoBI,OAApB,CAA4BC,QAA5B,GAAqC,GAA/C,CAFR,EAE6D;AAC3DmH,UAAElC,CAAF,GAAML,UAAU,OAAK,GAAf,CAHR,EAG6B;AAC3BA,iBAAO,IAAP,IAAepG,IAAIY,SAAJ,CAAcO,KAAd,CAAoBI,OAApB,CAA4BC,QAA5B,GAAqC,CAApD,CAJF,EAI0D;AACxDxB,YAAIY,SAAJ,CAAcO,KAAd,CAAoBI,OAApB,CAA4BC,QAL9B,EAKwC;AACtC,SANF,CAMI;AANJ;AAQF;;AAEA,WAAK,MAAL;AACExB,YAAIgE,EAAJ,CAAOE,OAAP,CAAekF,SAAf,CACEpJ,IAAIM,MAAJ,CAAWgF,GADb,EAEEqD,EAAEnC,CAAF,GAAMJ,SAAO,CAAP,IAAYpG,IAAIY,SAAJ,CAAcO,KAAd,CAAoBI,OAApB,CAA4BC,QAA5B,GAAqC,CAAjD,CAFR,EAE6D;AAC3DmH,UAAElC,CAAF,GAAML,UAAU,IAAE,IAAF,GAAO,GAAjB,CAHR,EAG+B;AAC7BA,iBAAO,CAAP,GAAS,IAAT,IAAiBpG,IAAIY,SAAJ,CAAcO,KAAd,CAAoBI,OAApB,CAA4BC,QAA5B,GAAqC,CAAtD,CAJF,EAI4D;AAC1DxB,YAAIY,SAAJ,CAAcO,KAAd,CAAoBI,OAApB,CAA4BC,QAL9B,EAKwC;AACtC,SANF,CAMI;AANJ;AAQF;;AAEA,WAAK,OAAL;AAAA,YAEWkH,IAFX,GAEE,SAASA,IAAT,GAAe;AACb1I,cAAIM,MAAJ,CAAWgF,GAAX,CAAe+D,SAAf,CACEC,OADF,EAEEX,EAAEnC,CAAF,GAAIJ,MAFN,EAGEuC,EAAElC,CAAF,GAAIL,MAHN,EAIEA,SAAO,CAJT,EAKEA,SAAO,CAAP,GAAWuC,EAAET,GAAF,CAAMC,KALnB;AAOD,SAVH;;AAYE,YAAGnI,IAAImE,GAAJ,CAAQiE,QAAR,IAAoB,OAAvB,EAA+B;AAC7B,cAAIkB,UAAUX,EAAET,GAAF,CAAM5D,GAApB;AACD,SAFD,MAEK;AACH,cAAIgF,UAAUtJ,IAAImE,GAAJ,CAAQmF,OAAtB;AACD;;AAED,YAAGA,OAAH,EAAW;AACTZ;AACD;;AAEH;;AA1DF;;AA8DA1I,QAAIM,MAAJ,CAAWgF,GAAX,CAAeiE,SAAf;;AAEA,QAAGvJ,IAAIY,SAAJ,CAAcO,KAAd,CAAoBE,MAApB,CAA2BC,KAA3B,GAAmC,CAAtC,EAAwC;AACtCtB,UAAIM,MAAJ,CAAWgF,GAAX,CAAekE,WAAf,GAA6BxJ,IAAIY,SAAJ,CAAcO,KAAd,CAAoBE,MAApB,CAA2BH,KAAxD;AACAlB,UAAIM,MAAJ,CAAWgF,GAAX,CAAemE,SAAf,GAA2BzJ,IAAIY,SAAJ,CAAcO,KAAd,CAAoBE,MAApB,CAA2BC,KAAtD;AACAtB,UAAIM,MAAJ,CAAWgF,GAAX,CAAejE,MAAf;AACD;;AAEDrB,QAAIM,MAAJ,CAAWgF,GAAX,CAAeoE,IAAf;AAED,GAjGD;;AAoGA1J,MAAIgE,EAAJ,CAAO2B,eAAP,GAAyB,YAAU;AACjC,SAAI,IAAIgE,IAAI,CAAZ,EAAeA,IAAI3J,IAAIY,SAAJ,CAAcC,MAAd,CAAqBC,KAAxC,EAA+C6I,GAA/C,EAAoD;AAClD3J,UAAIY,SAAJ,CAAckC,KAAd,CAAoBa,IAApB,CAAyB,IAAI3D,IAAIgE,EAAJ,CAAOkC,QAAX,CAAoBlG,IAAIY,SAAJ,CAAcM,KAAlC,EAAyClB,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBd,KAA/D,CAAzB;AACD;AACF,GAJD;;AAMAd,MAAIgE,EAAJ,CAAO4F,eAAP,GAAyB,YAAU;;AAEjC,SAAI,IAAID,IAAI,CAAZ,EAAeA,IAAI3J,IAAIY,SAAJ,CAAckC,KAAd,CAAoBgE,MAAvC,EAA+C6C,GAA/C,EAAmD;;AAEjD;AACA,UAAIhB,IAAI3I,IAAIY,SAAJ,CAAckC,KAAd,CAAoB6G,CAApB,CAAR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAG3J,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBtB,MAAtB,EAA6B;AAC3B,YAAI6I,KAAK7J,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBP,KAAnB,GAAyB,CAAlC;AACA4G,UAAEnC,CAAF,IAAOmC,EAAEhB,EAAF,GAAOkC,EAAd;AACAlB,UAAElC,CAAF,IAAOkC,EAAEf,EAAF,GAAOiC,EAAd;AACD;;AAED;AACA,UAAG7J,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBE,IAAtB,CAA2Bd,MAA9B,EAAsC;AACpC,YAAG2H,EAAEnB,cAAF,IAAoB,IAAvB,EAA6B;AAC3B,cAAGmB,EAAE/G,OAAF,IAAa5B,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBd,KAAtC,EAA6C6H,EAAEnB,cAAF,GAAmB,KAAnB;AAC7CmB,YAAE/G,OAAF,IAAa+G,EAAElB,EAAf;AACD,SAHD,MAGM;AACJ,cAAGkB,EAAE/G,OAAF,IAAa5B,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBE,IAAtB,CAA2BE,WAA3C,EAAwD2G,EAAEnB,cAAF,GAAmB,IAAnB;AACxDmB,YAAE/G,OAAF,IAAa+G,EAAElB,EAAf;AACD;AACD,YAAGkB,EAAE/G,OAAF,GAAY,CAAf,EAAkB+G,EAAE/G,OAAF,GAAY,CAAZ;AACnB;;AAED;AACA,UAAG5B,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBJ,IAAnB,CAAwBd,MAA3B,EAAkC;AAChC,YAAG2H,EAAErC,WAAF,IAAiB,IAApB,EAAyB;AACvB,cAAGqC,EAAEvC,MAAF,IAAYpG,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBpB,KAAlC,EAAyC6H,EAAErC,WAAF,GAAgB,KAAhB;AACzCqC,YAAEvC,MAAF,IAAYuC,EAAEpC,EAAd;AACD,SAHD,MAGK;AACH,cAAGoC,EAAEvC,MAAF,IAAYpG,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBJ,IAAnB,CAAwBK,QAAvC,EAAiDwG,EAAErC,WAAF,GAAgB,IAAhB;AACjDqC,YAAEvC,MAAF,IAAYuC,EAAEpC,EAAd;AACD;AACD,YAAGoC,EAAEvC,MAAF,GAAW,CAAd,EAAiBuC,EAAEvC,MAAF,GAAW,CAAX;AAClB;;AAED;AACA,UAAGpG,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBG,QAAnB,IAA+B,QAAlC,EAA2C;AACzC,YAAIqH,UAAU;AACZC,kBAAQpB,EAAEvC,MADE;AAEZ4D,mBAAUhK,IAAIM,MAAJ,CAAWE,CAFT;AAGZyJ,iBAAOtB,EAAEvC,MAHG;AAIZ8D,oBAAUlK,IAAIM,MAAJ,CAAWI;AAJT,SAAd;AAMD,OAPD,MAOK;AACH,YAAIoJ,UAAU;AACZC,kBAAQ,CAACpB,EAAEvC,MADC;AAEZ4D,mBAAShK,IAAIM,MAAJ,CAAWE,CAAX,GAAemI,EAAEvC,MAFd;AAGZ6D,iBAAO,CAACtB,EAAEvC,MAHE;AAIZ8D,oBAAUlK,IAAIM,MAAJ,CAAWI,CAAX,GAAeiI,EAAEvC;AAJf,SAAd;AAMD;;AAED,UAAGuC,EAAEnC,CAAF,GAAMmC,EAAEvC,MAAR,GAAiBpG,IAAIM,MAAJ,CAAWE,CAA/B,EAAiC;AAC/BmI,UAAEnC,CAAF,GAAMsD,QAAQC,MAAd;AACApB,UAAElC,CAAF,GAAMJ,KAAKxE,MAAL,KAAgB7B,IAAIM,MAAJ,CAAWI,CAAjC;AACD,OAHD,MAIK,IAAGiI,EAAEnC,CAAF,GAAMmC,EAAEvC,MAAR,GAAiB,CAApB,EAAsB;AACzBuC,UAAEnC,CAAF,GAAMsD,QAAQE,OAAd;AACArB,UAAElC,CAAF,GAAMJ,KAAKxE,MAAL,KAAgB7B,IAAIM,MAAJ,CAAWI,CAAjC;AACD;AACD,UAAGiI,EAAElC,CAAF,GAAMkC,EAAEvC,MAAR,GAAiBpG,IAAIM,MAAJ,CAAWI,CAA/B,EAAiC;AAC/BiI,UAAElC,CAAF,GAAMqD,QAAQG,KAAd;AACAtB,UAAEnC,CAAF,GAAMH,KAAKxE,MAAL,KAAgB7B,IAAIM,MAAJ,CAAWE,CAAjC;AACD,OAHD,MAIK,IAAGmI,EAAElC,CAAF,GAAMkC,EAAEvC,MAAR,GAAiB,CAApB,EAAsB;AACzBuC,UAAElC,CAAF,GAAMqD,QAAQI,QAAd;AACAvB,UAAEnC,CAAF,GAAMH,KAAKxE,MAAL,KAAgB7B,IAAIM,MAAJ,CAAWE,CAAjC;AACD;;AAED;AACA,cAAOR,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBG,QAA1B;AACE,aAAK,QAAL;AACE,cAAIkG,EAAEnC,CAAF,GAAMmC,EAAEvC,MAAR,GAAiBpG,IAAIM,MAAJ,CAAWE,CAAhC,EAAmCmI,EAAEhB,EAAF,GAAO,CAACgB,EAAEhB,EAAV,CAAnC,KACK,IAAIgB,EAAEnC,CAAF,GAAMmC,EAAEvC,MAAR,GAAiB,CAArB,EAAwBuC,EAAEhB,EAAF,GAAO,CAACgB,EAAEhB,EAAV;AAC7B,cAAIgB,EAAElC,CAAF,GAAMkC,EAAEvC,MAAR,GAAiBpG,IAAIM,MAAJ,CAAWI,CAAhC,EAAmCiI,EAAEf,EAAF,GAAO,CAACe,EAAEf,EAAV,CAAnC,KACK,IAAIe,EAAElC,CAAF,GAAMkC,EAAEvC,MAAR,GAAiB,CAArB,EAAwBuC,EAAEf,EAAF,GAAO,CAACe,EAAEf,EAAV;AAC/B;AANF;;AASA;AACA,UAAGuC,UAAU,MAAV,EAAkBnK,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBC,OAAzB,CAAiCC,IAAnD,CAAH,EAA4D;AAC1DnD,YAAIgE,EAAJ,CAAOV,KAAP,CAAa8G,YAAb,CAA0BzB,CAA1B;AACD;;AAED,UAAGwB,UAAU,QAAV,EAAoBnK,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBC,OAAzB,CAAiCC,IAArD,KAA8DgH,UAAU,QAAV,EAAoBnK,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBG,OAAzB,CAAiCD,IAArD,CAAjE,EAA4H;AAC1HnD,YAAIgE,EAAJ,CAAOV,KAAP,CAAa+G,cAAb,CAA4B1B,CAA5B;AACD;;AAED,UAAGwB,UAAU,SAAV,EAAqBnK,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBC,OAAzB,CAAiCC,IAAtD,KAA+DgH,UAAU,SAAV,EAAqBnK,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBG,OAAzB,CAAiCD,IAAtD,CAAlE,EAA8H;AAC5HnD,YAAIgE,EAAJ,CAAOV,KAAP,CAAagH,eAAb,CAA6B3B,CAA7B;AACD;;AAED;AACA,UAAG3I,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BpB,MAA1B,IAAoChB,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBK,OAAnB,CAA2B3B,MAAlE,EAAyE;AACvE,aAAI,IAAIuJ,IAAIZ,IAAI,CAAhB,EAAmBY,IAAIvK,IAAIY,SAAJ,CAAckC,KAAd,CAAoBgE,MAA3C,EAAmDyD,GAAnD,EAAuD;AACrD,cAAIC,KAAKxK,IAAIY,SAAJ,CAAckC,KAAd,CAAoByH,CAApB,CAAT;;AAEA;AACA,cAAGvK,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BpB,MAA7B,EAAoC;AAClChB,gBAAIgE,EAAJ,CAAOC,QAAP,CAAgBwG,aAAhB,CAA8B9B,CAA9B,EAAgC6B,EAAhC;AACD;;AAED;AACA,cAAGxK,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBK,OAAnB,CAA2B3B,MAA9B,EAAqC;AACnChB,gBAAIgE,EAAJ,CAAOC,QAAP,CAAgByG,gBAAhB,CAAiC/B,CAAjC,EAAmC6B,EAAnC;AACD;;AAED;AACA,cAAGxK,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBI,MAAtB,EAA6B;AAC3B1C,gBAAIgE,EAAJ,CAAOC,QAAP,CAAgB0G,eAAhB,CAAgChC,CAAhC,EAAkC6B,EAAlC;AACD;AAEF;AACF;AAGF;AAEF,GAjID;;AAmIAxK,MAAIgE,EAAJ,CAAO4B,aAAP,GAAuB,YAAU;;AAE/B;AACA5F,QAAIM,MAAJ,CAAWgF,GAAX,CAAeW,SAAf,CAAyB,CAAzB,EAA4B,CAA5B,EAA+BjG,IAAIM,MAAJ,CAAWE,CAA1C,EAA6CR,IAAIM,MAAJ,CAAWI,CAAxD;;AAEA;AACAV,QAAIgE,EAAJ,CAAO4F,eAAP;;AAEA;AACA,SAAI,IAAID,IAAI,CAAZ,EAAeA,IAAI3J,IAAIY,SAAJ,CAAckC,KAAd,CAAoBgE,MAAvC,EAA+C6C,GAA/C,EAAmD;AACjD,UAAIhB,IAAI3I,IAAIY,SAAJ,CAAckC,KAAd,CAAoB6G,CAApB,CAAR;AACAhB,QAAED,IAAF;AACD;AAEF,GAdD;;AAgBA1I,MAAIgE,EAAJ,CAAO0B,cAAP,GAAwB,YAAU;AAChC1F,QAAIY,SAAJ,CAAckC,KAAd,GAAsB,EAAtB;AACD,GAFD;;AAIA9C,MAAIgE,EAAJ,CAAO4G,gBAAP,GAA0B,YAAU;;AAElC;AACAC,2BAAuB7K,IAAIgE,EAAJ,CAAO8G,cAA9B;AACAD,2BAAuB7K,IAAIgE,EAAJ,CAAO+G,aAA9B;AACA/K,QAAImE,GAAJ,CAAQkE,UAAR,GAAqBnB,SAArB;AACAlH,QAAImE,GAAJ,CAAQmF,OAAR,GAAkBpC,SAAlB;AACAlH,QAAImE,GAAJ,CAAQ6G,SAAR,GAAoB,CAApB;AACAhL,QAAIgE,EAAJ,CAAO0B,cAAP;AACA1F,QAAIgE,EAAJ,CAAOgC,WAAP;;AAEA;AACAhG,QAAIgE,EAAJ,CAAOE,OAAP,CAAe+G,KAAf;AAED,GAdD;;AAiBA;;AAEAjL,MAAIgE,EAAJ,CAAOC,QAAP,CAAgBwG,aAAhB,GAAgC,UAASS,EAAT,EAAaV,EAAb,EAAgB;;AAE9C,QAAIW,KAAKD,GAAG1E,CAAH,GAAOgE,GAAGhE,CAAnB;AAAA,QACI4E,KAAKF,GAAGzE,CAAH,GAAO+D,GAAG/D,CADnB;AAAA,QAEI4E,OAAOhF,KAAKiF,IAAL,CAAUH,KAAGA,EAAH,GAAQC,KAAGA,EAArB,CAFX;;AAIA;AACA,QAAGC,QAAQrL,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BC,QAArC,EAA8C;;AAE5C,UAAIkJ,eAAevL,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BR,OAA1B,GAAqCyJ,QAAQ,IAAErL,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BR,OAApC,CAAD,GAAiD5B,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BC,QAAlI;;AAEA,UAAGkJ,eAAe,CAAlB,EAAoB;;AAElB;AACA,YAAIC,aAAaxL,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BqJ,cAA3C;AACAzL,YAAIM,MAAJ,CAAWgF,GAAX,CAAekE,WAAf,GAA6B,UAAQgC,WAAWvE,CAAnB,GAAqB,GAArB,GAAyBuE,WAAWrE,CAApC,GAAsC,GAAtC,GAA0CqE,WAAWpE,CAArD,GAAuD,GAAvD,GAA2DmE,YAA3D,GAAwE,GAArG;AACAvL,YAAIM,MAAJ,CAAWgF,GAAX,CAAemE,SAAf,GAA2BzJ,IAAIY,SAAJ,CAAcwB,WAAd,CAA0Bd,KAArD;AACA;;AAEA;AACAtB,YAAIM,MAAJ,CAAWgF,GAAX,CAAe0D,SAAf;AACAhJ,YAAIM,MAAJ,CAAWgF,GAAX,CAAeoG,MAAf,CAAsBR,GAAG1E,CAAzB,EAA4B0E,GAAGzE,CAA/B;AACAzG,YAAIM,MAAJ,CAAWgF,GAAX,CAAeqG,MAAf,CAAsBnB,GAAGhE,CAAzB,EAA4BgE,GAAG/D,CAA/B;AACAzG,YAAIM,MAAJ,CAAWgF,GAAX,CAAejE,MAAf;AACArB,YAAIM,MAAJ,CAAWgF,GAAX,CAAeiE,SAAf;AAED;AAEF;AAEF,GA9BD;;AAiCAvJ,MAAIgE,EAAJ,CAAOC,QAAP,CAAgByG,gBAAhB,GAAoC,UAASQ,EAAT,EAAaV,EAAb,EAAgB;;AAElD;AACA,QAAIW,KAAKD,GAAG1E,CAAH,GAAOgE,GAAGhE,CAAnB;AAAA,QACI4E,KAAKF,GAAGzE,CAAH,GAAO+D,GAAG/D,CADnB;AAAA,QAEI4E,OAAOhF,KAAKiF,IAAL,CAAUH,KAAGA,EAAH,GAAQC,KAAGA,EAArB,CAFX;;AAIA,QAAGC,QAAQrL,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BC,QAArC,EAA8C;;AAE5C,UAAIuJ,KAAKT,MAAInL,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBK,OAAnB,CAA2BC,OAA3B,GAAmC,IAAvC,CAAT;AAAA,UACIiJ,KAAKT,MAAIpL,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBK,OAAnB,CAA2BE,OAA3B,GAAmC,IAAvC,CADT;;AAGAqI,SAAGvD,EAAH,IAASiE,EAAT;AACAV,SAAGtD,EAAH,IAASiE,EAAT;;AAEArB,SAAG7C,EAAH,IAASiE,EAAT;AACApB,SAAG5C,EAAH,IAASiE,EAAT;AAED;AAGF,GArBD;;AAwBA7L,MAAIgE,EAAJ,CAAOC,QAAP,CAAgB0G,eAAhB,GAAkC,UAASO,EAAT,EAAaV,EAAb,EAAgB;;AAEhD,QAAIW,KAAKD,GAAG1E,CAAH,GAAOgE,GAAGhE,CAAnB;AAAA,QACI4E,KAAKF,GAAGzE,CAAH,GAAO+D,GAAG/D,CADnB;AAAA,QAEI4E,OAAOhF,KAAKiF,IAAL,CAAUH,KAAGA,EAAH,GAAQC,KAAGA,EAArB,CAFX;AAAA,QAGIU,SAASZ,GAAG9E,MAAH,GAAUoE,GAAGpE,MAH1B;;AAKA,QAAGiF,QAAQS,MAAX,EAAkB;AAChBZ,SAAGvD,EAAH,GAAQ,CAACuD,GAAGvD,EAAZ;AACAuD,SAAGtD,EAAH,GAAQ,CAACsD,GAAGtD,EAAZ;;AAEA4C,SAAG7C,EAAH,GAAQ,CAAC6C,GAAG7C,EAAZ;AACA6C,SAAG5C,EAAH,GAAQ,CAAC4C,GAAG5C,EAAZ;AACD;AAEF,GAfD;;AAkBA;;AAEA5H,MAAIgE,EAAJ,CAAOV,KAAP,CAAayI,aAAb,GAA6B,UAASC,EAAT,EAAaC,GAAb,EAAiB;;AAE5CjM,QAAImE,GAAJ,CAAQoE,OAAR,GAAkB,IAAlB;;AAEA,SAAI,IAAIoB,IAAI,CAAZ,EAAeA,IAAIqC,EAAnB,EAAuBrC,GAAvB,EAA2B;AACzB3J,UAAIY,SAAJ,CAAckC,KAAd,CAAoBa,IAApB,CACE,IAAI3D,IAAIgE,EAAJ,CAAOkC,QAAX,CACElG,IAAIY,SAAJ,CAAcM,KADhB,EAEElB,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBd,KAFxB,EAGE;AACE,aAAKmL,MAAMA,IAAIC,KAAV,GAAkB7F,KAAKxE,MAAL,KAAgB7B,IAAIM,MAAJ,CAAWE,CADpD;AAEE,aAAKyL,MAAMA,IAAIE,KAAV,GAAkB9F,KAAKxE,MAAL,KAAgB7B,IAAIM,MAAJ,CAAWI;AAFpD,OAHF,CADF;AAUA,UAAGiJ,KAAKqC,KAAG,CAAX,EAAa;AACX,YAAG,CAAChM,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBtB,MAAvB,EAA8B;AAC5BhB,cAAIgE,EAAJ,CAAO4B,aAAP;AACD;AACD5F,YAAImE,GAAJ,CAAQoE,OAAR,GAAkB,KAAlB;AACD;AACF;AAEF,GAvBD;;AA0BAvI,MAAIgE,EAAJ,CAAOV,KAAP,CAAa8I,eAAb,GAA+B,UAASJ,EAAT,EAAY;;AAEzChM,QAAIY,SAAJ,CAAckC,KAAd,CAAoBuJ,MAApB,CAA2B,CAA3B,EAA8BL,EAA9B;AACA,QAAG,CAAChM,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBtB,MAAvB,EAA8B;AAC5BhB,UAAIgE,EAAJ,CAAO4B,aAAP;AACD;AAEF,GAPD;;AAUA5F,MAAIgE,EAAJ,CAAOV,KAAP,CAAa+G,cAAb,GAA8B,UAAS1B,CAAT,EAAW;;AAEvC;AACA,QAAG3I,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBC,OAAzB,CAAiClC,MAAjC,IAA2CmJ,UAAU,QAAV,EAAoBnK,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBC,OAAzB,CAAiCC,IAArD,CAA9C,EAAyG;AAAA,UAO9FmJ,IAP8F,GAOvG,SAASA,IAAT,GAAe;AACb3D,UAAEE,cAAF,GAAmBF,EAAE/G,OAArB;AACA+G,UAAEC,aAAF,GAAkBD,EAAEvC,MAApB;AACD,OAVsG;;AAYvG;;;AAVA,UAAImG,WAAW5D,EAAEnC,CAAF,GAAMxG,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBoI,KAA7C;AAAA,UACIM,WAAW7D,EAAElC,CAAF,GAAMzG,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBqI,KAD7C;AAAA,UAEIM,aAAapG,KAAKiF,IAAL,CAAUiB,WAASA,QAAT,GAAoBC,WAASA,QAAvC,CAFjB;AAAA,UAGIrE,QAAQ,IAAIsE,aAAazM,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BnB,QAH5D;;AAWA,UAAGoK,cAAczM,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BnB,QAAhD,EAAyD;;AAEvD,YAAG8F,SAAS,CAAT,IAAcnI,IAAI+C,aAAJ,CAAkB2J,MAAlB,IAA4B,WAA7C,EAAyD;;AAEvD;AACA,cAAG1M,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BtB,IAA/B,IAAuClC,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBpB,KAA7D,EAAmE;;AAEjE,gBAAGd,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BtB,IAA/B,GAAsClC,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBpB,KAA5D,EAAkE;AAChE,kBAAIoB,OAAOyG,EAAEvC,MAAF,GAAYpG,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BtB,IAA/B,GAAoCiG,KAA3D;AACA,kBAAGjG,QAAQ,CAAX,EAAa;AACXyG,kBAAEC,aAAF,GAAkB1G,IAAlB;AACD;AACF,aALD,MAKK;AACH,kBAAIyK,MAAMhE,EAAEvC,MAAF,GAAWpG,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BtB,IAApD;AAAA,kBACIA,OAAOyG,EAAEvC,MAAF,GAAYuG,MAAIxE,KAD3B;AAEA,kBAAGjG,OAAO,CAAV,EAAY;AACVyG,kBAAEC,aAAF,GAAkB1G,IAAlB;AACD,eAFD,MAEK;AACHyG,kBAAEC,aAAF,GAAkB,CAAlB;AACD;AACF;AAEF;;AAED;AACA,cAAG5I,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+B5B,OAA/B,IAA0C5B,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBd,KAAnE,EAAyE;;AAEvE,gBAAGd,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+B5B,OAA/B,GAAyC5B,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBd,KAAlE,EAAwE;AACtE,kBAAIc,UAAU5B,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+B5B,OAA/B,GAAuCuG,KAArD;AACA,kBAAGvG,UAAU+G,EAAE/G,OAAZ,IAAuBA,WAAW5B,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+B5B,OAApE,EAA4E;AAC1E+G,kBAAEE,cAAF,GAAmBjH,OAAnB;AACD;AACF,aALD,MAKK;AACH,kBAAIA,UAAU+G,EAAE/G,OAAF,GAAY,CAAC5B,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBd,KAAtB,GAA4Bd,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+B5B,OAA5D,IAAqEuG,KAA/F;AACA,kBAAGvG,UAAU+G,EAAE/G,OAAZ,IAAuBA,WAAW5B,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+B5B,OAApE,EAA4E;AAC1E+G,kBAAEE,cAAF,GAAmBjH,OAAnB;AACD;AACF;AAEF;AAEF;AAEF,OA3CD,MA2CK;AACH0K;AACD;;AAGD;AACA,UAAGtM,IAAI+C,aAAJ,CAAkB2J,MAAlB,IAA4B,YAA/B,EAA4C;AAC1CJ;AACD;AAEF;;AAED;AApEA,SAqEK,IAAGtM,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBG,OAAzB,CAAiCpC,MAAjC,IAA2CmJ,UAAU,QAAV,EAAoBnK,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBG,OAAzB,CAAiCD,IAArD,CAA9C,EAAyG;AAAA,YAoBnGyJ,OApBmG,GAoB5G,SAASA,OAAT,CAAiBC,YAAjB,EAA+BC,eAA/B,EAAgDC,YAAhD,EAA8DC,KAA9D,EAAqEC,EAArE,EAAwE;;AAEtE,cAAGJ,gBAAgBC,eAAnB,EAAmC;;AAEjC,gBAAG,CAAC9M,IAAImE,GAAJ,CAAQ+I,mBAAZ,EAAgC;AAC9B,kBAAGT,cAAczM,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BnB,QAAhD,EAAyD;AACvD,oBAAG0K,gBAAgB7F,SAAnB,EAA8B,IAAI5C,MAAMyI,YAAV,CAA9B,KACK,IAAIzI,MAAM0I,KAAV;AACL,oBAAG1I,OAAOuI,YAAV,EAAuB;AACrB,sBAAI/L,QAAQkM,QAASG,cAAcH,QAAQH,YAAtB,IAAsC7M,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BC,QAA1F;AACA,sBAAGwJ,MAAM,MAAT,EAAiBtE,EAAEC,aAAF,GAAkB9H,KAAlB;AACjB,sBAAGmM,MAAM,SAAT,EAAoBtE,EAAEE,cAAF,GAAmB/H,KAAnB;AACrB;AACF,eARD,MAQK;AACH,oBAAGmM,MAAM,MAAT,EAAiBtE,EAAEC,aAAF,GAAkB1B,SAAlB;AACjB,oBAAG+F,MAAM,SAAT,EAAoBtE,EAAEE,cAAF,GAAmB3B,SAAnB;AACrB;AACF,aAbD,MAaK;AACH,kBAAG6F,gBAAgB7F,SAAnB,EAA6B;AAC3B,oBAAIkG,YAAYJ,QAASG,cAAcH,QAAQH,YAAtB,IAAsC7M,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BC,QAA9F;AAAA,oBACIkJ,MAAME,eAAeO,SADzB;AAEItM,wBAAQ+L,eAAeF,GAAvB;AACJ,oBAAGM,MAAM,MAAT,EAAiBtE,EAAEC,aAAF,GAAkB9H,KAAlB;AACjB,oBAAGmM,MAAM,SAAT,EAAoBtE,EAAEE,cAAF,GAAmB/H,KAAnB;AACrB;AACF;AAEF;AAEF,SAjD2G;;AAG5G,YAAGd,IAAImE,GAAJ,CAAQkJ,eAAX,EAA2B;AACzB,cAAId,WAAW5D,EAAEnC,CAAF,GAAMxG,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBwJ,WAA7C;AAAA,cACId,WAAW7D,EAAElC,CAAF,GAAMzG,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwByJ,WAD7C;AAAA,cAEId,aAAapG,KAAKiF,IAAL,CAAUiB,WAASA,QAAT,GAAoBC,WAASA,QAAvC,CAFjB;AAAA,cAGIW,aAAa,CAAC,IAAIK,IAAJ,GAAWC,OAAX,KAAuBzN,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwB4J,UAAhD,IAA4D,IAH7E;;AAKA,cAAGP,aAAanN,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BC,QAA/C,EAAwD;AACtDzD,gBAAImE,GAAJ,CAAQ+I,mBAAR,GAA8B,IAA9B;AACD;;AAED,cAAGC,aAAanN,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BC,QAA/B,GAAwC,CAAxD,EAA0D;AACxDzD,gBAAImE,GAAJ,CAAQkJ,eAAR,GAA0B,KAA1B;AACArN,gBAAImE,GAAJ,CAAQ+I,mBAAR,GAA8B,KAA9B;AACD;AACF;;AAkCD,YAAGlN,IAAImE,GAAJ,CAAQkJ,eAAX,EAA2B;AACzB;AACAT,kBAAQ5M,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+BtB,IAAvC,EAA6ClC,IAAIY,SAAJ,CAAcsB,IAAd,CAAmBpB,KAAhE,EAAuE6H,EAAEC,aAAzE,EAAwFD,EAAEvC,MAA1F,EAAkG,MAAlG;AACA;AACAwG,kBAAQ5M,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBE,MAAxB,CAA+B5B,OAAvC,EAAgD5B,IAAIY,SAAJ,CAAcgB,OAAd,CAAsBd,KAAtE,EAA6E6H,EAAEE,cAA/E,EAA+FF,EAAE/G,OAAjG,EAA0G,SAA1G;AACD;AAEF;AAEF,GApID;;AAuIA5B,MAAIgE,EAAJ,CAAOV,KAAP,CAAagH,eAAb,GAA+B,UAAS3B,CAAT,EAAW;;AAExC,QAAG3I,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBC,OAAzB,CAAiClC,MAAjC,IAA2CmJ,UAAU,SAAV,EAAqBnK,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBC,OAAzB,CAAiCC,IAAtD,CAA3C,IAA0GnD,IAAI+C,aAAJ,CAAkB2J,MAAlB,IAA4B,WAAzI,EAAsJ;;AAEpJ,UAAIH,WAAW5D,EAAEnC,CAAF,GAAMxG,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBoI,KAA7C;AAAA,UACIM,WAAW7D,EAAElC,CAAF,GAAMzG,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBqI,KAD7C;AAAA,UAEIM,aAAapG,KAAKiF,IAAL,CAAUiB,WAASA,QAAT,GAAoBC,WAASA,QAAvC,CAFjB;;AAIA,UAAImB,UAAU,EAACnH,GAAG+F,WAASE,UAAb,EAAyBhG,GAAG+F,WAASC,UAArC,EAAd;AAAA,UACImB,gBAAgB5N,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBI,OAAxB,CAAgCrB,QADpD;AAAA,UAEIwL,WAAW,GAFf;AAAA,UAGIC,gBAAgBC,MAAO,IAAEH,aAAH,IAAmB,CAAC,CAAD,GAAGvH,KAAK2H,GAAL,CAASvB,aAAWmB,aAApB,EAAkC,CAAlC,CAAH,GAAwC,CAA3D,IAA8DA,aAA9D,GAA4EC,QAAlF,EAA4F,CAA5F,EAA+F,EAA/F,CAHpB;;AAKA,UAAI5B,MAAM;AACRzF,WAAGmC,EAAEnC,CAAF,GAAMmH,QAAQnH,CAAR,GAAYsH,aADb;AAERrH,WAAGkC,EAAElC,CAAF,GAAMkH,QAAQlH,CAAR,GAAYqH;AAFb,OAAV;;AAKA,UAAG9N,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBG,QAAnB,IAA+B,QAAlC,EAA2C;AACzC,YAAGwJ,IAAIzF,CAAJ,GAAQmC,EAAEvC,MAAV,GAAmB,CAAnB,IAAwB6F,IAAIzF,CAAJ,GAAQmC,EAAEvC,MAAV,GAAmBpG,IAAIM,MAAJ,CAAWE,CAAzD,EAA4DmI,EAAEnC,CAAF,GAAMyF,IAAIzF,CAAV;AAC5D,YAAGyF,IAAIxF,CAAJ,GAAQkC,EAAEvC,MAAV,GAAmB,CAAnB,IAAwB6F,IAAIxF,CAAJ,GAAQkC,EAAEvC,MAAV,GAAmBpG,IAAIM,MAAJ,CAAWI,CAAzD,EAA4DiI,EAAElC,CAAF,GAAMwF,IAAIxF,CAAV;AAC7D,OAHD,MAGK;AACHkC,UAAEnC,CAAF,GAAMyF,IAAIzF,CAAV;AACAmC,UAAElC,CAAF,GAAMwF,IAAIxF,CAAV;AACD;AAEF,KAxBD,MA2BK,IAAGzG,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBG,OAAzB,CAAiCpC,MAAjC,IAA2CmJ,UAAU,SAAV,EAAqBnK,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBG,OAAzB,CAAiCD,IAAtD,CAA9C,EAA2G;;AAE9G,UAAG,CAACnD,IAAImE,GAAJ,CAAQ8J,cAAZ,EAA2B;AACzBjO,YAAImE,GAAJ,CAAQ+J,aAAR;AACA,YAAGlO,IAAImE,GAAJ,CAAQ+J,aAAR,IAAyBlO,IAAIY,SAAJ,CAAckC,KAAd,CAAoBgE,MAAhD,EAAuD;AACrD9G,cAAImE,GAAJ,CAAQ8J,cAAR,GAAyB,IAAzB;AACD;AACF;;AAED,UAAGjO,IAAImE,GAAJ,CAAQgK,gBAAX,EAA4B;AAAA,YAUjBvB,OAViB,GAU1B,SAASA,OAAT,GAAkB;;AAEhB,cAAIwB,IAAI/H,KAAKgI,KAAL,CAAWjD,EAAX,EAAcD,EAAd,CAAR;AACAxC,YAAEhB,EAAF,GAAO2G,QAAQjI,KAAKkI,GAAL,CAASH,CAAT,CAAf;AACAzF,YAAEf,EAAF,GAAO0G,QAAQjI,KAAKmI,GAAL,CAASJ,CAAT,CAAf;;AAEA,cAAGpO,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBG,QAAnB,IAA+B,QAAlC,EAA2C;AACzC,gBAAIwJ,MAAM;AACRzF,iBAAGmC,EAAEnC,CAAF,GAAMmC,EAAEhB,EADH;AAERlB,iBAAGkC,EAAElC,CAAF,GAAMkC,EAAEf;AAFH,aAAV;AAIA,gBAAIqE,IAAIzF,CAAJ,GAAQmC,EAAEvC,MAAV,GAAmBpG,IAAIM,MAAJ,CAAWE,CAAlC,EAAqCmI,EAAEhB,EAAF,GAAO,CAACgB,EAAEhB,EAAV,CAArC,KACK,IAAIsE,IAAIzF,CAAJ,GAAQmC,EAAEvC,MAAV,GAAmB,CAAvB,EAA0BuC,EAAEhB,EAAF,GAAO,CAACgB,EAAEhB,EAAV;AAC/B,gBAAIsE,IAAIxF,CAAJ,GAAQkC,EAAEvC,MAAV,GAAmBpG,IAAIM,MAAJ,CAAWI,CAAlC,EAAqCiI,EAAEf,EAAF,GAAO,CAACe,EAAEf,EAAV,CAArC,KACK,IAAIqE,IAAIxF,CAAJ,GAAQkC,EAAEvC,MAAV,GAAmB,CAAvB,EAA0BuC,EAAEf,EAAF,GAAO,CAACe,EAAEf,EAAV;AAChC;AAEF,SA3ByB;;AA6B1B;;;AA3BA,YAAIgG,gBAAgBvH,KAAK2H,GAAL,CAAShO,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBI,OAAxB,CAAgCrB,QAAhC,GAAyC,CAAlD,EAAqD,CAArD,CAApB;;AAEA,YAAI8I,KAAKnL,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBwJ,WAAxB,GAAsC3E,EAAEnC,CAAjD;AAAA,YACI4E,KAAKpL,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwByJ,WAAxB,GAAsC5E,EAAElC,CADjD;AAAA,YAEIgI,IAAItD,KAAGA,EAAH,GAAQC,KAAGA,EAFnB;;AAIA,YAAIkD,QAAQ,CAACV,aAAD,GAAiBa,CAAjB,GAAqB,CAAjC;;AAsBA,YAAGA,KAAKb,aAAR,EAAsB;AACpBhB;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGD,OA5CD,MA4CK;;AAEH,YAAG5M,IAAImE,GAAJ,CAAQgK,gBAAR,IAA4B,KAA/B,EAAqC;;AAEnCxF,YAAEhB,EAAF,GAAOgB,EAAEd,IAAT;AACAc,YAAEf,EAAF,GAAOe,EAAEb,IAAT;AAED;AAEF;AAEF;AAEF,GA/FD;;AAkGA9H,MAAIgE,EAAJ,CAAOV,KAAP,CAAa8G,YAAb,GAA4B,UAASzB,CAAT,EAAW;;AAErC,QAAG3I,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBC,OAAzB,CAAiClC,MAAjC,IAA2ChB,IAAI+C,aAAJ,CAAkB2J,MAAlB,IAA4B,WAA1E,EAAsF;;AAEpF,UAAIH,WAAW5D,EAAEnC,CAAF,GAAMxG,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBoI,KAA7C;AAAA,UACIM,WAAW7D,EAAElC,CAAF,GAAMzG,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBqI,KAD7C;AAAA,UAEIM,aAAapG,KAAKiF,IAAL,CAAUiB,WAASA,QAAT,GAAoBC,WAASA,QAAvC,CAFjB;;AAIA;AACA,UAAGC,cAAczM,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBC,IAAxB,CAA6BlB,QAA9C,EAAuD;;AAErD,YAAIkJ,eAAevL,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBC,IAAxB,CAA6BnB,WAA7B,CAAyCR,OAAzC,GAAoD6K,cAAc,IAAEzM,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBC,IAAxB,CAA6BnB,WAA7B,CAAyCR,OAAzD,CAAD,GAAsE5B,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBC,IAAxB,CAA6BlB,QAAzK;;AAEA,YAAGkJ,eAAe,CAAlB,EAAoB;;AAElB;AACA,cAAIC,aAAaxL,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BqJ,cAA3C;AACAzL,cAAIM,MAAJ,CAAWgF,GAAX,CAAekE,WAAf,GAA6B,UAAQgC,WAAWvE,CAAnB,GAAqB,GAArB,GAAyBuE,WAAWrE,CAApC,GAAsC,GAAtC,GAA0CqE,WAAWpE,CAArD,GAAuD,GAAvD,GAA2DmE,YAA3D,GAAwE,GAArG;AACAvL,cAAIM,MAAJ,CAAWgF,GAAX,CAAemE,SAAf,GAA2BzJ,IAAIY,SAAJ,CAAcwB,WAAd,CAA0Bd,KAArD;AACA;;AAEA;AACAtB,cAAIM,MAAJ,CAAWgF,GAAX,CAAe0D,SAAf;AACAhJ,cAAIM,MAAJ,CAAWgF,GAAX,CAAeoG,MAAf,CAAsB/C,EAAEnC,CAAxB,EAA2BmC,EAAElC,CAA7B;AACAzG,cAAIM,MAAJ,CAAWgF,GAAX,CAAeqG,MAAf,CAAsB3L,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBoI,KAA9C,EAAqDlM,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBqI,KAA7E;AACAnM,cAAIM,MAAJ,CAAWgF,GAAX,CAAejE,MAAf;AACArB,cAAIM,MAAJ,CAAWgF,GAAX,CAAeiE,SAAf;AAED;AAEF;AAEF;AAEF,GAlCD;;AAsCA;;AAEAvJ,MAAIgE,EAAJ,CAAOE,OAAP,CAAewK,eAAf,GAAiC,YAAU;;AAEzC;AACA,QAAG1O,IAAI+C,aAAJ,CAAkBC,SAAlB,IAA+B,QAAlC,EAA2C;AACzChD,UAAI+C,aAAJ,CAAkBxC,EAAlB,GAAuB0E,MAAvB;AACD,KAFD,MAEK;AACHjF,UAAI+C,aAAJ,CAAkBxC,EAAlB,GAAuBP,IAAIM,MAAJ,CAAWC,EAAlC;AACD;;AAGD;AACA,QAAGP,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBC,OAAzB,CAAiClC,MAAjC,IAA2ChB,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBG,OAAzB,CAAiCpC,MAA/E,EAAsF;;AAEpF;AACAhB,UAAI+C,aAAJ,CAAkBxC,EAAlB,CAAqBkF,gBAArB,CAAsC,WAAtC,EAAmD,UAASkJ,CAAT,EAAW;;AAE5D,YAAG3O,IAAI+C,aAAJ,CAAkBxC,EAAlB,IAAwB0E,MAA3B,EAAkC;AAChC,cAAIiH,QAAQyC,EAAEC,OAAd;AAAA,cACIzC,QAAQwC,EAAEE,OADd;AAED,SAHD,MAII;AACF,cAAI3C,QAAQyC,EAAEG,OAAF,IAAaH,EAAEC,OAA3B;AAAA,cACIzC,QAAQwC,EAAEI,OAAF,IAAaJ,EAAEE,OAD3B;AAED;;AAED7O,YAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBoI,KAAxB,GAAgCA,KAAhC;AACAlM,YAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBqI,KAAxB,GAAgCA,KAAhC;;AAEA,YAAGnM,IAAImE,GAAJ,CAAQiB,MAAX,EAAkB;AAChBpF,cAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBoI,KAAxB,IAAiClM,IAAIM,MAAJ,CAAW6E,OAA5C;AACAnF,cAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBqI,KAAxB,IAAiCnM,IAAIM,MAAJ,CAAW6E,OAA5C;AACD;;AAEDnF,YAAI+C,aAAJ,CAAkB2J,MAAlB,GAA2B,WAA3B;AAED,OArBD;;AAuBA;AACA1M,UAAI+C,aAAJ,CAAkBxC,EAAlB,CAAqBkF,gBAArB,CAAsC,YAAtC,EAAoD,UAASkJ,CAAT,EAAW;;AAE7D3O,YAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBoI,KAAxB,GAAgC,IAAhC;AACAlM,YAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBqI,KAAxB,GAAgC,IAAhC;AACAnM,YAAI+C,aAAJ,CAAkB2J,MAAlB,GAA2B,YAA3B;AAED,OAND;AAQD;;AAED;AACA,QAAG1M,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBG,OAAzB,CAAiCpC,MAApC,EAA2C;;AAEzChB,UAAI+C,aAAJ,CAAkBxC,EAAlB,CAAqBkF,gBAArB,CAAsC,OAAtC,EAA+C,YAAU;;AAEvDzF,YAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBwJ,WAAxB,GAAsCtN,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBoI,KAA9D;AACAlM,YAAI+C,aAAJ,CAAkBe,KAAlB,CAAwByJ,WAAxB,GAAsCvN,IAAI+C,aAAJ,CAAkBe,KAAlB,CAAwBqI,KAA9D;AACAnM,YAAI+C,aAAJ,CAAkBe,KAAlB,CAAwB4J,UAAxB,GAAqC,IAAIF,IAAJ,GAAWC,OAAX,EAArC;;AAEA,YAAGzN,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBG,OAAzB,CAAiCpC,MAApC,EAA2C;;AAEzC,kBAAOhB,IAAI+C,aAAJ,CAAkBE,MAAlB,CAAyBG,OAAzB,CAAiCD,IAAxC;;AAEE,iBAAK,MAAL;AACE,kBAAGnD,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBtB,MAAtB,EAA6B;AAC3BhB,oBAAIgE,EAAJ,CAAOV,KAAP,CAAayI,aAAb,CAA2B/L,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBK,IAAxB,CAA6BC,YAAxD,EAAsE5D,IAAI+C,aAAJ,CAAkBe,KAAxF;AACD,eAFD,MAEK;AACH,oBAAG9D,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBK,IAAxB,CAA6BC,YAA7B,IAA6C,CAAhD,EAAkD;AAChD5D,sBAAIgE,EAAJ,CAAOV,KAAP,CAAayI,aAAb,CAA2B/L,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBK,IAAxB,CAA6BC,YAAxD,EAAsE5D,IAAI+C,aAAJ,CAAkBe,KAAxF;AACD,iBAFD,MAGK,IAAG9D,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBK,IAAxB,CAA6BC,YAA7B,GAA4C,CAA/C,EAAiD;AACpD5D,sBAAIgE,EAAJ,CAAOV,KAAP,CAAayI,aAAb,CAA2B/L,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBK,IAAxB,CAA6BC,YAAxD;AACD;AACF;AACH;;AAEA,iBAAK,QAAL;AACE5D,kBAAIgE,EAAJ,CAAOV,KAAP,CAAa8I,eAAb,CAA6BpM,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBO,MAAxB,CAA+BD,YAA5D;AACF;;AAEA,iBAAK,QAAL;AACE5D,kBAAImE,GAAJ,CAAQkJ,eAAR,GAA0B,IAA1B;AACF;;AAEA,iBAAK,SAAL;AACErN,kBAAImE,GAAJ,CAAQgK,gBAAR,GAA2B,IAA3B;AACAnO,kBAAImE,GAAJ,CAAQ+J,aAAR,GAAwB,CAAxB;AACAlO,kBAAImE,GAAJ,CAAQ8J,cAAR,GAAyB,KAAzB;AACAe,yBAAW,YAAU;AACnBhP,oBAAImE,GAAJ,CAAQgK,gBAAR,GAA2B,KAA3B;AACD,eAFD,EAEGnO,IAAI+C,aAAJ,CAAkBO,KAAlB,CAAwBI,OAAxB,CAAgCD,QAAhC,GAAyC,IAF5C;AAGF;;AA9BF;AAkCD;AAEF,OA5CD;AA8CD;AAGF,GApGD;;AAsGAzD,MAAIgE,EAAJ,CAAOE,OAAP,CAAe2B,oBAAf,GAAsC,YAAU;;AAE9C,QAAG7F,IAAIY,SAAJ,CAAcC,MAAd,CAAqBE,OAArB,CAA6BC,MAAhC,EAAuC;;AAErC;AACA,UAAIiO,OAAOjP,IAAIM,MAAJ,CAAWC,EAAX,CAAce,KAAd,GAAsBtB,IAAIM,MAAJ,CAAWC,EAAX,CAAcoB,MAApC,GAA6C,IAAxD;AACA,UAAG3B,IAAImE,GAAJ,CAAQiB,MAAX,EAAkB;AAChB6J,eAAOA,QAAMjP,IAAIM,MAAJ,CAAW6E,OAAX,GAAmB,CAAzB,CAAP;AACD;;AAED;AACA,UAAI+J,eAAeD,OAAOjP,IAAIY,SAAJ,CAAcC,MAAd,CAAqBC,KAA5B,GAAoCd,IAAIY,SAAJ,CAAcC,MAAd,CAAqBE,OAArB,CAA6BE,UAApF;;AAEA;AACA,UAAIkO,oBAAoBnP,IAAIY,SAAJ,CAAckC,KAAd,CAAoBgE,MAApB,GAA6BoI,YAArD;AACA,UAAGC,oBAAoB,CAAvB,EAA0BnP,IAAIgE,EAAJ,CAAOV,KAAP,CAAayI,aAAb,CAA2B1F,KAAK+I,GAAL,CAASD,iBAAT,CAA3B,EAA1B,KACKnP,IAAIgE,EAAJ,CAAOV,KAAP,CAAa8I,eAAb,CAA6B+C,iBAA7B;AAEN;AAEF,GApBD;;AAuBAnP,MAAIgE,EAAJ,CAAOE,OAAP,CAAewC,YAAf,GAA8B,UAASwE,EAAT,EAAa/E,QAAb,EAAsB;AAClD,SAAI,IAAIwD,IAAI,CAAZ,EAAeA,IAAI3J,IAAIY,SAAJ,CAAckC,KAAd,CAAoBgE,MAAvC,EAA+C6C,GAA/C,EAAmD;AACjD,UAAIa,KAAKxK,IAAIY,SAAJ,CAAckC,KAAd,CAAoB6G,CAApB,CAAT;;AAEA,UAAIwB,KAAKD,GAAG1E,CAAH,GAAOgE,GAAGhE,CAAnB;AAAA,UACI4E,KAAKF,GAAGzE,CAAH,GAAO+D,GAAG/D,CADnB;AAAA,UAEI4E,OAAOhF,KAAKiF,IAAL,CAAUH,KAAGA,EAAH,GAAQC,KAAGA,EAArB,CAFX;;AAIA,UAAGC,QAAQH,GAAG9E,MAAH,GAAYoE,GAAGpE,MAA1B,EAAiC;AAC/B8E,WAAG1E,CAAH,GAAOL,WAAWA,SAASK,CAApB,GAAwBH,KAAKxE,MAAL,KAAgB7B,IAAIM,MAAJ,CAAWE,CAA1D;AACA0K,WAAGzE,CAAH,GAAON,WAAWA,SAASM,CAApB,GAAwBJ,KAAKxE,MAAL,KAAgB7B,IAAIM,MAAJ,CAAWI,CAA1D;AACAV,YAAIgE,EAAJ,CAAOE,OAAP,CAAewC,YAAf,CAA4BwE,EAA5B;AACD;AACF;AACF,GAdD;;AAiBAlL,MAAIgE,EAAJ,CAAOE,OAAP,CAAeoE,YAAf,GAA8B,UAASK,CAAT,EAAW;;AAEvC;AACA,QAAI0G,SAASrP,IAAImE,GAAJ,CAAQkE,UAArB;AAAA,QACIiH,SAAS,oBADb;AAAA,QAEIC,gBAAgBF,OAAOG,OAAP,CAAeF,MAAf,EAAuB,UAAUG,CAAV,EAAaxI,CAAb,EAAgBE,CAAhB,EAAmBC,CAAnB,EAAsB;AAC3D,UAAGuB,EAAEzH,KAAF,CAAQ6F,GAAX,EAAe;AACb,YAAI+B,cAAc,UAAQH,EAAEzH,KAAF,CAAQ6F,GAAR,CAAYE,CAApB,GAAsB,GAAtB,GAA0B0B,EAAEzH,KAAF,CAAQ6F,GAAR,CAAYI,CAAtC,GAAwC,GAAxC,GAA4CwB,EAAEzH,KAAF,CAAQ6F,GAAR,CAAYK,CAAxD,GAA0D,GAA1D,GAA8DuB,EAAE/G,OAAhE,GAAwE,GAA1F;AACD,OAFD,MAEK;AACH,YAAIkH,cAAc,UAAQH,EAAEzH,KAAF,CAAQqG,GAAR,CAAY7G,CAApB,GAAsB,GAAtB,GAA0BiI,EAAEzH,KAAF,CAAQqG,GAAR,CAAYF,CAAtC,GAAwC,IAAxC,GAA6CsB,EAAEzH,KAAF,CAAQqG,GAAR,CAAYD,CAAzD,GAA2D,IAA3D,GAAgEqB,EAAE/G,OAAlE,GAA0E,GAA5F;AACD;AACD,aAAOkH,WAAP;AACD,KAPe,CAFpB;;AAWA;AACA,QAAI4G,MAAM,IAAIC,IAAJ,CAAS,CAACJ,aAAD,CAAT,EAA0B,EAACnO,MAAM,+BAAP,EAA1B,CAAV;AAAA,QACIwO,SAAS3K,OAAO4K,GAAP,IAAc5K,OAAO6K,SAArB,IAAkC7K,MAD/C;AAAA,QAEI8K,MAAMH,OAAOI,eAAP,CAAuBN,GAAvB,CAFV;;AAIA;AACA,QAAIxH,MAAM,IAAI+H,KAAJ,EAAV;AACA/H,QAAIzC,gBAAJ,CAAqB,MAArB,EAA6B,YAAU;AACrCkD,QAAET,GAAF,CAAM5D,GAAN,GAAY4D,GAAZ;AACAS,QAAET,GAAF,CAAMM,MAAN,GAAe,IAAf;AACAoH,aAAOM,eAAP,CAAuBH,GAAvB;AACA/P,UAAImE,GAAJ,CAAQ6G,SAAR;AACD,KALD;AAMA9C,QAAIxG,GAAJ,GAAUqO,GAAV;AAED,GA7BD;;AAgCA/P,MAAIgE,EAAJ,CAAOE,OAAP,CAAeiM,UAAf,GAA4B,YAAU;AACpCC,yBAAqBpQ,IAAIgE,EAAJ,CAAO+G,aAA5B;AACA5K,cAAU0D,MAAV;AACAwM,aAAS,IAAT;AACD,GAJD;;AAOArQ,MAAIgE,EAAJ,CAAOE,OAAP,CAAekF,SAAf,GAA2B,UAASkH,CAAT,EAAYC,MAAZ,EAAoBC,MAApB,EAA4BC,UAA5B,EAAwCC,kBAAxC,EAA4DC,oBAA5D,EAAiF;;AAE1G;AACA,QAAIC,YAAYF,qBAAqBC,oBAArC;AACA,QAAIE,eAAeH,qBAAqBC,oBAAxC;AACA,QAAIG,uBAAwB,OAAOD,eAAe,CAAtB,CAAD,GAA6BA,YAAxD;AACA,QAAIE,gBAAgB1K,KAAK6C,EAAL,GAAU7C,KAAK6C,EAAL,GAAU4H,oBAAV,GAAiC,GAA/D,CAN0G,CAMtC;AACpER,MAAEU,IAAF;AACAV,MAAEtH,SAAF;AACAsH,MAAEW,SAAF,CAAYV,MAAZ,EAAoBC,MAApB;AACAF,MAAE5E,MAAF,CAAS,CAAT,EAAW,CAAX;AACA,SAAK,IAAI/B,IAAI,CAAb,EAAgBA,IAAIiH,SAApB,EAA+BjH,GAA/B,EAAoC;AAClC2G,QAAE3E,MAAF,CAAS8E,UAAT,EAAoB,CAApB;AACAH,QAAEW,SAAF,CAAYR,UAAZ,EAAuB,CAAvB;AACAH,QAAEY,MAAF,CAASH,aAAT;AACD;AACD;AACAT,MAAE5G,IAAF;AACA4G,MAAEa,OAAF;AAED,GApBD;;AAsBAnR,MAAIgE,EAAJ,CAAOE,OAAP,CAAekN,SAAf,GAA2B,YAAU;AACnCnM,WAAOoM,IAAP,CAAYrR,IAAIM,MAAJ,CAAWC,EAAX,CAAc+Q,SAAd,CAAwB,WAAxB,CAAZ,EAAkD,QAAlD;AACD,GAFD;;AAKAtR,MAAIgE,EAAJ,CAAOE,OAAP,CAAeqN,OAAf,GAAyB,UAASnQ,IAAT,EAAc;;AAErCpB,QAAImE,GAAJ,CAAQqN,SAAR,GAAoBtK,SAApB;;AAEA,QAAGlH,IAAIY,SAAJ,CAAcO,KAAd,CAAoBM,KAApB,CAA0BC,GAA1B,IAAiC,EAApC,EAAuC;;AAErC,UAAGN,QAAQ,OAAX,EAAmB;;AAEjB,YAAIqQ,MAAM,IAAIC,cAAJ,EAAV;AACAD,YAAIJ,IAAJ,CAAS,KAAT,EAAgBrR,IAAIY,SAAJ,CAAcO,KAAd,CAAoBM,KAApB,CAA0BC,GAA1C;AACA+P,YAAIE,kBAAJ,GAAyB,UAAUC,IAAV,EAAgB;AACvC,cAAGH,IAAII,UAAJ,IAAkB,CAArB,EAAuB;AACrB,gBAAGJ,IAAI/E,MAAJ,IAAc,GAAjB,EAAqB;AACnB1M,kBAAImE,GAAJ,CAAQkE,UAAR,GAAqBuJ,KAAKE,aAAL,CAAmBC,QAAxC;AACA/R,kBAAIgE,EAAJ,CAAOE,OAAP,CAAe8N,eAAf;AACD,aAHD,MAGK;AACHC,sBAAQC,GAAR,CAAY,6BAAZ;AACAlS,kBAAImE,GAAJ,CAAQqN,SAAR,GAAoB,IAApB;AACD;AACF;AACF,SAVD;AAWAC,YAAIU,IAAJ;AAED,OAjBD,MAiBK;;AAEH,YAAIjK,MAAM,IAAI+H,KAAJ,EAAV;AACA/H,YAAIzC,gBAAJ,CAAqB,MAArB,EAA6B,YAAU;AACrCzF,cAAImE,GAAJ,CAAQmF,OAAR,GAAkBpB,GAAlB;AACAlI,cAAIgE,EAAJ,CAAOE,OAAP,CAAe8N,eAAf;AACD,SAHD;AAIA9J,YAAIxG,GAAJ,GAAU1B,IAAIY,SAAJ,CAAcO,KAAd,CAAoBM,KAApB,CAA0BC,GAApC;AAED;AAEF,KA9BD,MA8BK;AACHuQ,cAAQC,GAAR,CAAY,0BAAZ;AACAlS,UAAImE,GAAJ,CAAQqN,SAAR,GAAoB,IAApB;AACD;AAEF,GAvCD;;AA0CAxR,MAAIgE,EAAJ,CAAOE,OAAP,CAAewE,IAAf,GAAsB,YAAU;;AAE9B,QAAG1I,IAAIY,SAAJ,CAAcO,KAAd,CAAoBC,IAApB,IAA4B,OAA/B,EAAuC;;AAErC,UAAGpB,IAAImE,GAAJ,CAAQiE,QAAR,IAAoB,OAAvB,EAA+B;;AAE7B,YAAGpI,IAAImE,GAAJ,CAAQ6G,SAAR,IAAqBhL,IAAIY,SAAJ,CAAcC,MAAd,CAAqBC,KAA7C,EAAmD;AACjDd,cAAIgE,EAAJ,CAAO4B,aAAP;AACA,cAAG,CAAC5F,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBtB,MAAvB,EAA+B6J,uBAAuB7K,IAAIgE,EAAJ,CAAO+G,aAA9B,EAA/B,KACK/K,IAAIgE,EAAJ,CAAO+G,aAAP,GAAuBqH,iBAAiBpS,IAAIgE,EAAJ,CAAOE,OAAP,CAAewE,IAAhC,CAAvB;AACN,SAJD,MAIK;AACH;AACA,cAAG,CAAC1I,IAAImE,GAAJ,CAAQqN,SAAZ,EAAuBxR,IAAIgE,EAAJ,CAAO+G,aAAP,GAAuBqH,iBAAiBpS,IAAIgE,EAAJ,CAAOE,OAAP,CAAewE,IAAhC,CAAvB;AACxB;AAEF,OAXD,MAWK;;AAEH,YAAG1I,IAAImE,GAAJ,CAAQmF,OAAR,IAAmBpC,SAAtB,EAAgC;AAC9BlH,cAAIgE,EAAJ,CAAO4B,aAAP;AACA,cAAG,CAAC5F,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBtB,MAAvB,EAA+B6J,uBAAuB7K,IAAIgE,EAAJ,CAAO+G,aAA9B,EAA/B,KACK/K,IAAIgE,EAAJ,CAAO+G,aAAP,GAAuBqH,iBAAiBpS,IAAIgE,EAAJ,CAAOE,OAAP,CAAewE,IAAhC,CAAvB;AACN,SAJD,MAIK;AACH,cAAG,CAAC1I,IAAImE,GAAJ,CAAQqN,SAAZ,EAAuBxR,IAAIgE,EAAJ,CAAO+G,aAAP,GAAuBqH,iBAAiBpS,IAAIgE,EAAJ,CAAOE,OAAP,CAAewE,IAAhC,CAAvB;AACxB;AAEF;AAEF,KAzBD,MAyBK;AACH1I,UAAIgE,EAAJ,CAAO4B,aAAP;AACA,UAAG,CAAC5F,IAAIY,SAAJ,CAAc0B,IAAd,CAAmBtB,MAAvB,EAA+B6J,uBAAuB7K,IAAIgE,EAAJ,CAAO+G,aAA9B,EAA/B,KACK/K,IAAIgE,EAAJ,CAAO+G,aAAP,GAAuBqH,iBAAiBpS,IAAIgE,EAAJ,CAAOE,OAAP,CAAewE,IAAhC,CAAvB;AACN;AAEF,GAjCD;;AAoCA1I,MAAIgE,EAAJ,CAAOE,OAAP,CAAe8N,eAAf,GAAiC,YAAU;;AAEzC;AACA,QAAGhS,IAAIY,SAAJ,CAAcO,KAAd,CAAoBC,IAApB,IAA4B,OAA/B,EAAuC;;AAErC,UAAGpB,IAAImE,GAAJ,CAAQiE,QAAR,IAAoB,OAApB,IAA+BpI,IAAImE,GAAJ,CAAQkE,UAAR,IAAsBnB,SAAxD,EAAkE;AAChElH,YAAImE,GAAJ,CAAQ2G,cAAR,GAAyBsH,iBAAiBC,KAAjB,CAAzB;AACD,OAFD,MAEK;AACH;AACAxH,+BAAuB7K,IAAImE,GAAJ,CAAQ2G,cAA/B;AACA,YAAG,CAAC9K,IAAImE,GAAJ,CAAQqN,SAAZ,EAAsB;AACpBxR,cAAIgE,EAAJ,CAAOE,OAAP,CAAeoI,IAAf;AACAtM,cAAIgE,EAAJ,CAAOE,OAAP,CAAewE,IAAf;AACD;AAEF;AAEF,KAdD,MAcK;AACH1I,UAAIgE,EAAJ,CAAOE,OAAP,CAAeoI,IAAf;AACAtM,UAAIgE,EAAJ,CAAOE,OAAP,CAAewE,IAAf;AACD;AAEF,GAtBD;;AAyBA1I,MAAIgE,EAAJ,CAAOE,OAAP,CAAeoI,IAAf,GAAsB,YAAU;;AAE9B;AACAtM,QAAIgE,EAAJ,CAAOgB,UAAP;AACAhF,QAAIgE,EAAJ,CAAOqB,UAAP;AACArF,QAAIgE,EAAJ,CAAOwB,UAAP;AACAxF,QAAIgE,EAAJ,CAAO8B,WAAP;AACA9F,QAAIgE,EAAJ,CAAO2B,eAAP;AACA3F,QAAIgE,EAAJ,CAAOE,OAAP,CAAe2B,oBAAf;;AAEA;AACA7F,QAAIY,SAAJ,CAAcwB,WAAd,CAA0BqJ,cAA1B,GAA2CzE,SAAShH,IAAIY,SAAJ,CAAcwB,WAAd,CAA0BlB,KAAnC,CAA3C;AAED,GAbD;;AAgBAlB,MAAIgE,EAAJ,CAAOE,OAAP,CAAe+G,KAAf,GAAuB,YAAU;;AAE/B,QAAGd,UAAU,OAAV,EAAmBnK,IAAIY,SAAJ,CAAcO,KAAd,CAAoBC,IAAvC,CAAH,EAAgD;AAC9CpB,UAAImE,GAAJ,CAAQiE,QAAR,GAAmBpI,IAAIY,SAAJ,CAAcO,KAAd,CAAoBM,KAApB,CAA0BC,GAA1B,CAA8B4Q,MAA9B,CAAqCtS,IAAIY,SAAJ,CAAcO,KAAd,CAAoBM,KAApB,CAA0BC,GAA1B,CAA8BoF,MAA9B,GAAuC,CAA5E,CAAnB;AACA9G,UAAIgE,EAAJ,CAAOE,OAAP,CAAeqN,OAAf,CAAuBvR,IAAImE,GAAJ,CAAQiE,QAA/B;AACD,KAHD,MAGK;AACHpI,UAAIgE,EAAJ,CAAOE,OAAP,CAAe8N,eAAf;AACD;AAEF,GATD;;AAcA;;AAGAhS,MAAIgE,EAAJ,CAAOE,OAAP,CAAewK,eAAf;;AAEA1O,MAAIgE,EAAJ,CAAOE,OAAP,CAAe+G,KAAf;AAID,CA13CD;;AA43CA;;AAEA7G,OAAOC,UAAP,GAAoB,SAASkO,QAAT,CAAmBC,WAAnB,EAAgCC,MAAhC,EAAwC;AAC1D,OAAK,IAAIC,QAAT,IAAqBD,MAArB,EAA6B;AAC3B,QAAIA,OAAOC,QAAP,KAAoBD,OAAOC,QAAP,EAAiBC,WAArC,IACHF,OAAOC,QAAP,EAAiBC,WAAjB,KAAiCvO,MADlC,EAC0C;AACxCoO,kBAAYE,QAAZ,IAAwBF,YAAYE,QAAZ,KAAyB,EAAjD;AACAH,eAASC,YAAYE,QAAZ,CAAT,EAAgCD,OAAOC,QAAP,CAAhC;AACD,KAJD,MAIO;AACLF,kBAAYE,QAAZ,IAAwBD,OAAOC,QAAP,CAAxB;AACD;AACF;AACD,SAAOF,WAAP;AACD,CAXD;;AAaAvN,OAAOmN,gBAAP,GAA2B,YAAU;AACnC,SAAQnN,OAAO2N,qBAAP,IACN3N,OAAO4N,2BADD,IAEN5N,OAAO6N,wBAFD,IAGN7N,OAAO8N,sBAHD,IAIN9N,OAAO+N,uBAJD,IAKN,UAASC,QAAT,EAAkB;AAChBhO,WAAO+J,UAAP,CAAkBiE,QAAlB,EAA4B,OAAO,EAAnC;AACD,GAPH;AAQD,CATyB,EAA1B;;AAWAhO,OAAO4F,sBAAP,GAAkC,YAAW;AAC3C,SAAO5F,OAAOmL,oBAAP,IACLnL,OAAOiO,iCADF,IAELjO,OAAOkO,8BAFF,IAGLlO,OAAOmO,4BAHF,IAILnO,OAAOoO,6BAJF,IAKLC,YALF;AAMD,CAP+B,EAAhC;;AASA,SAAStM,QAAT,CAAkBuM,GAAlB,EAAsB;AACpB;AACA;AACA,MAAIC,iBAAiB,kCAArB;AACAD,QAAMA,IAAI/D,OAAJ,CAAYgE,cAAZ,EAA4B,UAAS/D,CAAT,EAAYxI,CAAZ,EAAeE,CAAf,EAAkBC,CAAlB,EAAqB;AACpD,WAAOH,IAAIA,CAAJ,GAAQE,CAAR,GAAYA,CAAZ,GAAgBC,CAAhB,GAAoBA,CAA3B;AACF,GAFK,CAAN;AAGA,MAAIqM,SAAS,4CAA4CC,IAA5C,CAAiDH,GAAjD,CAAb;AACA,SAAOE,SAAS;AACZxM,OAAG0M,SAASF,OAAO,CAAP,CAAT,EAAoB,EAApB,CADS;AAEZtM,OAAGwM,SAASF,OAAO,CAAP,CAAT,EAAoB,EAApB,CAFS;AAGZrM,OAAGuM,SAASF,OAAO,CAAP,CAAT,EAAoB,EAApB;AAHS,GAAT,GAIH,IAJJ;AAKD;;AAED,SAAS1F,KAAT,CAAelN,MAAf,EAAuB+S,GAAvB,EAA4BC,GAA5B,EAAiC;AAC/B,SAAOxN,KAAKuN,GAAL,CAASvN,KAAKwN,GAAL,CAAShT,MAAT,EAAiB+S,GAAjB,CAAT,EAAgCC,GAAhC,CAAP;AACD;;AAED,SAAS1J,SAAT,CAAmBrJ,KAAnB,EAA0BgC,KAA1B,EAAiC;AAC/B,SAAOA,MAAMgR,OAAN,CAAchT,KAAd,IAAuB,CAAC,CAA/B;AACD;;AAGD;;AAEAmE,OAAOoL,MAAP,GAAgB,EAAhB;;AAEApL,OAAO8O,WAAP,GAAqB,UAAS9T,MAAT,EAAiBC,MAAjB,EAAwB;;AAE3C;;AAEA;AACA,MAAG,OAAOD,MAAP,IAAkB,QAArB,EAA8B;AAC5BC,aAASD,MAAT;AACAA,aAAS,cAAT;AACD;;AAED;AACA,MAAG,CAACA,MAAJ,EAAW;AACTA,aAAS,cAAT;AACD;;AAED;AACA,MAAI+T,UAAU5T,SAAS6T,cAAT,CAAwBhU,MAAxB,CAAd;AAAA,MACIiU,mBAAmB,wBADvB;AAAA,MAEIC,eAAeH,QAAQI,sBAAR,CAA+BF,gBAA/B,CAFnB;;AAIA;AACA,MAAGC,aAAarN,MAAhB,EAAuB;AACrB,WAAMqN,aAAarN,MAAb,GAAsB,CAA5B,EAA8B;AAC5BkN,cAAQK,WAAR,CAAoBF,aAAa,CAAb,CAApB;AACD;AACF;;AAED;AACA,MAAIhU,YAAYC,SAASkU,aAAT,CAAuB,QAAvB,CAAhB;AACAnU,YAAUoU,SAAV,GAAsBL,gBAAtB;;AAEA;AACA/T,YAAUqU,KAAV,CAAgBlT,KAAhB,GAAwB,MAAxB;AACAnB,YAAUqU,KAAV,CAAgB7S,MAAhB,GAAyB,MAAzB;;AAEA;AACA,MAAIrB,SAASF,SAAS6T,cAAT,CAAwBhU,MAAxB,EAAgCwU,WAAhC,CAA4CtU,SAA5C,CAAb;;AAEA;AACA,MAAGG,UAAU,IAAb,EAAkB;AAChB+P,WAAO1M,IAAP,CAAY,IAAI3D,GAAJ,CAAQC,MAAR,EAAgBC,MAAhB,CAAZ;AACD;AAEF,CA3CD;;AA6CA+E,OAAO8O,WAAP,CAAmBW,IAAnB,GAA0B,UAASzU,MAAT,EAAiB0U,gBAAjB,EAAmC1B,QAAnC,EAA4C;;AAEpE;AACA,MAAIxB,MAAM,IAAIC,cAAJ,EAAV;AACAD,MAAIJ,IAAJ,CAAS,KAAT,EAAgBsD,gBAAhB;AACAlD,MAAIE,kBAAJ,GAAyB,UAAUC,IAAV,EAAgB;AACvC,QAAGH,IAAII,UAAJ,IAAkB,CAArB,EAAuB;AACrB,UAAGJ,IAAI/E,MAAJ,IAAc,GAAjB,EAAqB;AACnB,YAAIxM,SAAS0U,KAAKC,KAAL,CAAWjD,KAAKE,aAAL,CAAmBC,QAA9B,CAAb;AACA9M,eAAO8O,WAAP,CAAmB9T,MAAnB,EAA2BC,MAA3B;AACA,YAAG+S,QAAH,EAAaA;AACd,OAJD,MAIK;AACHhB,gBAAQC,GAAR,CAAY,wCAAsCT,IAAI/E,MAAtD;AACAuF,gBAAQC,GAAR,CAAY,mCAAZ;AACD;AACF;AACF,GAXD;AAYAT,MAAIU,IAAJ;AAED,CAnBD;;AAqBA;AACA2C,QAAQ,aAAR,IAA0B7P,OAAO8O,WAAjC;AACAe,QAAQ,QAAR,IAAqB7P,OAAOoL,MAA5B,C;;;;;;;;;ACxgDA;;;;;;AAEA,IAAM0E,OAAOC,SAASC,QAAT,CAAkBC,KAAlB,CAAwB,eAAxB,CAAb;;AAEA,IAAIH,IAAJ,EAAU;AAAA;AACN,YAAMI,uBAAuB/U,SAASgU,sBAAT,CAAgC,wBAAhC,EAA0D,CAA1D,CAA7B;AACA,YAAMgB,UAAU,SAAVA,OAAU,CAACC,QAAD,EAAc;AAC1B,gBAAI,CAACA,QAAL,EAAeA,WAAW,cAAX;AACf,gBAAMC,OAAOlV,SAASmV,gBAAT,eAAsCF,QAAtC,QAAb;AACA,gBAAIG,aAAJ;;AAEA,gBAAI;AACAA,uBAAO,4BAAAC,GAA6BJ,QAA7B,SAAP;AACH,aAFD,CAEE,OAAOK,GAAP,EAAY;AACVF,uBAAO,mBAAAC,CAAA,CAAAA,CAAP;AACH;;AAED,gBAAIH,KAAKxO,MAAT,EAAiB;AACb1G,yBAASgU,sBAAT,CAAgC,6BAAhC,EAA+D,CAA/D,EAAkEuB,SAAlE,GAA8EL,KAAK,CAAL,EAAQM,SAAtF;AACH;;AAEDxV,qBAASgU,sBAAT,CAAgC,uBAAhC,EAAyD,CAAzD,EAA4DuB,SAA5D,GAAwEH,IAAxE;AACH,SAhBD;;AAkBA,YAAMK,WAAW,SAAXA,QAAW,CAACpP,CAAD,EAAIhD,QAAJ,EAAiB;AAC9B,gBAAIA,YAAY,CAAhB,EAAmB;AACnB,gBAAIqS,aAAarP,IAAIrG,SAAS2V,IAAT,CAAcC,SAAnC;AACA,gBAAIC,UAAUH,aAAarS,QAAb,GAAwB,EAAtC;;AAEAuL,uBAAW,YAAM;AACb5O,yBAAS2V,IAAT,CAAcC,SAAd,GAA0B5V,SAAS2V,IAAT,CAAcC,SAAd,GAA0BC,OAApD;AACA,oBAAI7V,SAAS2V,IAAT,CAAcC,SAAd,KAA4BvP,CAAhC,EAAmC;AACnCoP,yBAASpP,CAAT,EAAYhD,WAAW,EAAvB;AACH,aAJD,EAIG,EAJH;AAKH,SAVD;;AAYA,YAAMyS,WAAW,SAAXA,QAAW,CAAC5R,GAAD,EAAS;AACtB,gBAAI6R,SAAS,CAAb;AACA,gBAAI7R,IAAI8R,YAAR,EAAsB;AAClB,uBAAO,CAAP,EAAU;AACND,8BAAQ7R,IAAI+R,SAAZ;AACA,wBAAI,CAAC/R,IAAI8R,YAAT,EAAuB;AACnB;AACH;AACD9R,0BAAIA,IAAI8R,YAAR;AACH;AACJ,aARD,MAQO,IAAI9R,IAAImC,CAAR,EAAW;AACd0P,0BAAQ7R,IAAImC,CAAZ;AACH;AACD,mBAAO0P,MAAP;AACH,SAdD;;AAgBAhB,6BAAqB1P,gBAArB,CAAsC,OAAtC,EAA+C,aAAK;AAChD,gBAAIkJ,EAAE2H,MAAF,CAASC,QAAT,KAAsB,GAA1B,EAA+B;AAC/B5H,cAAE6H,cAAF;AACA7H,cAAE8H,eAAF;AACAzB,qBAAS0B,IAAT,GAAgB/H,EAAE2H,MAAF,CAASK,UAAT,CAAoB,MAApB,EAA4B7V,KAA5C;AACA,gBAAM8V,aAAaxW,SAASmV,gBAAT,CAA0B,kCAA1B,EAA8D,CAA9D,CAAnB;AACA,gBAAMsB,QAAQzW,SAASgU,sBAAT,CAAgC,6BAAhC,EAA+D,CAA/D,CAAd;AACA,gBAAI3N,IAAI,CAAR;;AAEAxB,mBAAO6R,MAAP,CAAcxV,KAAd,GAAsB,GAAtB,GAA4BmF,IAAIoQ,MAAMR,SAAtC,GAAkD5P,IAAIyP,SAASW,KAAT,CAAtD;;AAGAD,0BAAcA,WAAWG,SAAX,CAAqBlT,MAArB,CAA4B,QAA5B,CAAd;;AAEA8K,cAAE2H,MAAF,CAASU,YAAT,CAAsB,OAAtB,EAA+B,QAA/B;;AAEAnB,qBAASpP,CAAT,EAAY,GAAZ;;AAEA2O,oBAAQJ,SAAS0B,IAAT,CAAcpE,MAAd,CAAqB,CAArB,CAAR;AACH,SAnBD;;AAqBA6C,6BAAqBQ,SAArB,GAAiC,kBAAQnG,OAAR,CAAgB,IAAIyH,MAAJ,CAAW,QAAX,EAAqB,GAArB,CAAhB,EAA2C,SAA3C,CAAjC;;AAEA7B,gBAAQJ,SAAS0B,IAAT,CAAcpE,MAAd,CAAqB,CAArB,CAAR;AAvEM;AAwET,C;;;;;;;;;AC5ED;;;;AACA;;;;AAGA,IAAMyC,OAAOC,SAASC,QAAT,CAAkBC,KAAlB,CAAwB,WAAxB,CAAb;;AAEA,IAAIH,IAAJ,EAAU;AACN,QAAMmC,WAAW,yBAAS;AACtBnH,aAAK,uDADiB;AAEtBoH,gBAAQ,KAFc;AAGtBC,kBAAU;AAHY,KAAT,CAAjB;;AAMAF,aAASG,EAAT,CAAY,SAAZ,EAAuB,UAACC,KAAD,EAAQvF,QAAR,EAAqB;AACxC,YAAMwF,YAAYnX,SAASgU,sBAAT,CAAgC,eAAhC,EAAiD,CAAjD,CAAlB;AACA,YAAMoD,aAAapX,SAASgU,sBAAT,CAAgC,iBAAhC,EAAmD,CAAnD,CAAnB;AACA,YAAMqD,cAAc1F,SAAS,CAAT,CAApB;;AAEA,aAAK,IAAIpI,IAAI,CAAb,EAAgBA,IAAIoI,SAASjL,MAA7B,EAAqC6C,GAArC,EAA0C;AACtC,gBAAMrF,MAAMyN,SAASpI,CAAT,CAAZ;AACA,gBAAM+N,IAAItX,SAASkU,aAAT,CAAuB,GAAvB,CAAV;AACA,gBAAMqD,KAAKvX,SAASkU,aAAT,CAAuB,IAAvB,CAAX;AACAoD,cAAEE,IAAF,GAAStT,IAAIuT,QAAb;AACAH,cAAE/B,SAAF,SAAkBrR,IAAIwT,IAAtB;AACAJ,cAAEpB,MAAF,GAAW,QAAX;AACAiB,sBAAU9C,WAAV,CAAsBiD,CAAtB;AACAH,sBAAU9C,WAAV,CAAsBkD,EAAtB;AACH;;AAED,aAAK,IAAIpN,IAAI,CAAb,EAAgBA,IAAIkN,YAAYM,MAAZ,CAAmBjR,MAAvC,EAA+CyD,GAA/C,EAAoD;AAChD,gBAAIyN,KAAKP,YAAYM,MAAZ,CAAmBxN,CAAnB,CAAT;;AAEAyN,eAAGF,IAAH,CAAQ5C,KAAR,CAAc,aAAd,KAAgC9U,SAASgU,sBAAT,CAAgC,WAAhC,EAA6C,CAA7C,EAAgD4C,YAAhD,CAA6D,MAA7D,EAAqEgB,GAAGC,oBAAxE,CAAhC;AACAD,eAAGF,IAAH,CAAQ5C,KAAR,CAAc,eAAd,KAAkC9U,SAASgU,sBAAT,CAAgC,WAAhC,EAA6C,CAA7C,EAAgD4C,YAAhD,CAA6D,MAA7D,EAAqEgB,GAAGC,oBAAxE,CAAlC;AACAD,eAAGF,IAAH,CAAQ5C,KAAR,CAAc,YAAd,KAA+B9U,SAASgU,sBAAT,CAAgC,UAAhC,EAA4C,CAA5C,EAA+C4C,YAA/C,CAA4D,MAA5D,EAAoEgB,GAAGC,oBAAvE,CAA/B;AACAD,eAAGF,IAAH,CAAQ5C,KAAR,CAAc,cAAd,KAAiC9U,SAASgU,sBAAT,CAAgC,UAAhC,EAA4C,CAA5C,EAA+C4C,YAA/C,CAA4D,MAA5D,EAAoEgB,GAAGC,oBAAvE,CAAjC;AACAD,eAAGF,IAAH,CAAQ5C,KAAR,CAAc,cAAd,KAAiC9U,SAASgU,sBAAT,CAAgC,YAAhC,EAA8C,CAA9C,EAAiD4C,YAAjD,CAA8D,MAA9D,EAAsEgB,GAAGC,oBAAzE,CAAjC;AACAD,eAAGF,IAAH,CAAQ5C,KAAR,CAAc,gBAAd,KAAmC9U,SAASgU,sBAAT,CAAgC,YAAhC,EAA8C,CAA9C,EAAiD4C,YAAjD,CAA8D,MAA9D,EAAsEgB,GAAGC,oBAAzE,CAAnC;AACH;;AAEDT,mBAAW7B,SAAX,SAA2B8B,YAAYK,IAAvC;;AAEA1X,iBAASgU,sBAAT,CAAgC,iBAAhC,EAAmD,CAAnD,EAAsDuB,SAAtD,GAAkE,mBAASuC,MAAT,CAAgBT,YAAY1B,IAA5B,CAAlE;AACH,KA9BD;;AAgCAmB,aAASG,EAAT,CAAY,OAAZ,EAAqB,UAACC,KAAD,EAAQvF,QAAR,EAAqB;AACtCE,gBAAQC,GAAR,CAAY,OAAZ,EAAqBoF,KAArB;AACH,KAFD;;AAIAJ,aAAS/E,IAAT;AACH,C;;;;;;;;;AClDD,IAAMgG,WAAW/X,SAAS6T,cAAT,CAAwB,iBAAxB,CAAjB;;AAEAkE,SAAS1S,gBAAT,CAA0B,OAA1B,EAAmC,aAAK;AACpC,QAAM2S,MAAMzJ,EAAE2H,MAAF,CAAS+B,UAAT,CAAoBC,kBAAhC;;AAEA,QAAIF,IAAI7D,SAAJ,KAAkB,cAAtB,EAAsC;AAClC6D,YAAI7D,SAAJ,GAAgB,EAAhB;AACH,KAFD,MAEO;AACH6D,YAAI7D,SAAJ,GAAgB,cAAhB;AACH;AACJ,CARD,E;;;;;;ACFA,yC;;;;;;;;;ACAA;AACAO,QAAQyD,QAAR,GAAmB,mBAAA9C,CAAQ,EAAR,CAAnB;AACAX,QAAQD,KAAR,GAAgBC,QAAQyD,QAAR,CAAiBL,MAAjC,C;;;;;;;;;;;ACFA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,UAAUM,MAAV,EAAmB;;AAEpB;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,MAAIC,WAAWD,OAAOC,QAAP,GAAkB,UAASC,OAAT,EAAkB;AACjD,mBAAeA,OAAf,yCAAeA,OAAf;AACE,WAAK,WAAL;AACE,aAAKA,OAAL,GAAeD,SAASE,QAAT,CAAkBC,MAAjC;AACA;AACF,WAAK,QAAL;AACE,aAAKF,OAAL,GAAeA,OAAf;AACA;AACF;AACE,YAAKA,WAAWD,SAASE,QAAzB,EAAoC;AAClC,eAAKD,OAAL,GAAeD,SAASE,QAAT,CAAkBD,OAAlB,CAAf;AACD,SAFD,MAGK;AACH,gBAAM,IAAIG,KAAJ,CAAU,+BAA+BC,OAAOJ,OAAP,CAA/B,GAAiD,GAA3D,CAAN;AACD;AACD;AAdJ;AAgBA,SAAKK,QAAL,GAAgB,EAAhB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACD,GApBD;;AAsBA;;;;;;;AAOAT,SAAO3D,KAAP,GAAe,UAAUpC,MAAV,EAAkBiG,OAAlB,EAA4B;AACzC;AACA,QAAIQ,KAAK,IAAIT,QAAJ,CAAcC,OAAd,CAAT;AACA,WAAOQ,GAAGC,MAAH,CAAW1G,MAAX,CAAP;AACD,GAJD;;AAMA;;;;;;;;;AASA+F,SAAON,MAAP,GAAgB,SAASA,MAAT,CAAiBzF,MAAjB,EAA0BiG,OAA1B,EAAoCU,OAApC,EAA8C;AAC5D,QAAIC,QAAQb,OAAOc,UAAP,CAAmB7G,MAAnB,EAA4BiG,OAA5B,EAAsCU,OAAtC,CAAZ;;AAEA,WAAOZ,OAAOe,YAAP,CAAqBF,KAArB,CAAP;AACD,GAJD;;AAMA;;;;;;;;;;;AAWAb,SAAOc,UAAP,GAAoB,SAASA,UAAT,CAAqBD,KAArB,EAA4BX,OAA5B,EAAsCU,OAAtC,EAAgD;AAClE;AACA,QAAK,OAAOC,KAAP,KAAgB,QAArB,EAAgCA,QAAQ,KAAKxE,KAAL,CAAYwE,KAAZ,EAAmBX,OAAnB,CAAR;;AAEhC;;AAEA;AACA,QAAIc,QAAQC,aAAcJ,KAAd,CAAZ;AAAA,QACIK,OAAO,EADX;;AAGA,QAAKF,SAASA,MAAMG,UAApB,EAAiC;AAC/BD,aAAOF,MAAMG,UAAb;AACD;;AAED,QAAIC,OAAOC,qBAAsBR,KAAtB,EAA6BK,IAA7B,EAAoCN,OAApC,CAAX;AACAU,qBAAkBF,IAAlB;AACA,WAAOA,IAAP;AACD,GAjBD;;AAmBA;AACA,WAASG,iBAAT,GAA6B;AAC3B,WAAO,wBACCC,OAAO,KAAKC,QAAL,EAAP,CADD,GAEC,IAFD,GAGCD,OAAO,KAAKE,QAAZ,CAHD,GAIC,IAJD,GAKCF,OAAO,KAAKG,UAAZ,CALD,GAMC,IANR;AAOD;;AAED;AACA,WAASC,gBAAT,GAA4B;AAC1B,QAAIC,OAAO,mBAAA5E,CAAQ,EAAR,CAAX;AACA,WAAO,wBACC4E,KAAKC,OAAL,CAAa,KAAKL,QAAL,EAAb,CADD,GAEC,IAFD,GAGCI,KAAKC,OAAL,CAAa,KAAKJ,QAAlB,CAHD,GAIC,IAJD,GAKCG,KAAKC,OAAL,CAAa,KAAKH,UAAlB,CALD,GAMC,IANR;AAQD;;AAED,MAAII,WAAW9B,SAAS8B,QAAT,GAAoB,UAASC,KAAT,EAAgBC,KAAhB,EAAuBC,IAAvB,EAA6B;AAC9D;AACA,QAAKC,UAAU7T,MAAV,IAAoB,CAAzB,EAA6B2T,QAAQ,MAAR;;AAE7B,QAAIpT,IAAI,IAAIyR,MAAJ,CAAW0B,KAAX,CAAR;AACAnT,MAAE6S,QAAF,GAAaO,KAAb;AACA;AACApT,MAAEiT,OAAF,GAAYF,gBAAZ;AACA/S,MAAEuT,QAAF,GAAab,iBAAb;;AAEA,QAAKW,QAAQxT,SAAb,EACEG,EAAE8S,UAAF,GAAeO,IAAf;;AAEF,WAAOrT,CAAP;AACD,GAdD;;AAgBA,WAASwT,WAAT,CAAsBC,GAAtB,EAA4B;AAC1B,QAAIC,IAAI,CAAR;AAAA,QAAWpR,IAAI,CAAC,CAAhB;AACA,WAAQ,CAAEA,IAAImR,IAAIhH,OAAJ,CAAY,IAAZ,EAAkBnK,IAAI,CAAtB,CAAN,MAAqC,CAAC,CAA9C;AAAkDoR;AAAlD,KACA,OAAOA,CAAP;AACD;;AAED;AACAtC,WAAShQ,SAAT,CAAmBuS,YAAnB,GAAkC,SAASC,WAAT,CAAsB5B,KAAtB,EAA6B6B,SAA7B,EAAyC;AACzE7B,YAAQA,MAAM7J,OAAN,CAAc,eAAd,EAA+B,IAA/B,CAAR;AACA;AACA;AACA,QAAI2L,KAAK,mCAAT;AAAA,QACIC,SAAS,EADb;AAAA,QAEI3L,CAFJ;;AAIA,QAAI4L,UAAU,CAAd;;AAEA,QAAK,CAAE5L,IAAI,WAAWiE,IAAX,CAAgB2F,KAAhB,CAAN,KAAkC,IAAvC,EAA8C;AAC5C;AACAgC,iBAAWR,YAAapL,EAAE,CAAF,CAAb,CAAX;AACA0L,SAAGG,SAAH,GAAe7L,EAAE,CAAF,EAAK3I,MAApB;AACD;;AAED,WAAQ,CAAE2I,IAAI0L,GAAGzH,IAAH,CAAQ2F,KAAR,CAAN,MAA2B,IAAnC,EAA0C;AACxC,UAAI5J,EAAE,CAAF,KAAQ,KAAZ,EAAmB;AACjBA,UAAE,CAAF,IAAO,IAAP;AACA0L,WAAGG,SAAH;AACD;AACDF,aAAOzX,IAAP,CAAa4W,SAAU9K,EAAE,CAAF,CAAV,EAAgBA,EAAE,CAAF,CAAhB,EAAsB4L,OAAtB,CAAb;AACAA,iBAAWR,YAAapL,EAAE,CAAF,CAAb,CAAX;AACD;;AAED,WAAO2L,MAAP;AACD,GA1BD;;AA4BA;;;;;;;;;;;;;;;;;;;;;AAqBA3C,WAAShQ,SAAT,CAAmB8S,YAAnB,GAAkC,SAASA,YAAT,CAAuBf,KAAvB,EAA8BgB,IAA9B,EAAqC;AACrE,QAAIC,MAAM,KAAK/C,OAAL,CAAa8B,KAAvB;AAAA,QACIkB,MAAMD,IAAIE,SADd;;AAGA,QAAK,cAAcF,GAAnB,EAAyB;AACvB,aAAOA,IAAIG,QAAJ,CAAaC,IAAb,CAAkB,IAAlB,EAAwBrB,KAAxB,EAA+BgB,IAA/B,CAAP;AACD;;AAED,SAAM,IAAI7R,IAAI,CAAd,EAAiBA,IAAI+R,IAAI5U,MAAzB,EAAiC6C,GAAjC,EAAuC;AACrC;AACA,UAAImS,MAAML,IAAKC,IAAI/R,CAAJ,CAAL,EAAckS,IAAd,CAAoB,IAApB,EAA0BrB,KAA1B,EAAiCgB,IAAjC,CAAV;AACA,UAAKM,GAAL,EAAW;AACT;AACA,YAAK,CAACC,QAAQD,GAAR,CAAD,IAAmBA,IAAIhV,MAAJ,GAAa,CAAb,IAAkB,CAAGiV,QAAQD,IAAI,CAAJ,CAAR,CAA7C,EACE,KAAKE,KAAL,CAAWN,IAAI/R,CAAJ,CAAX,EAAmB,8BAAnB;AACF;AACA,eAAOmS,GAAP;AACD;AACF;;AAED;AACA,WAAO,EAAP;AACD,GAtBD;;AAwBArD,WAAShQ,SAAT,CAAmBwT,aAAnB,GAAmC,SAASA,aAAT,CAAwBzB,KAAxB,EAAgC;AACjE,WAAO,KAAK9B,OAAL,CAAawD,MAAb,CAAoBN,QAApB,CAA6BC,IAA7B,CAAmC,IAAnC,EAAyC/C,OAAQ0B,KAAR,CAAzC,CAAP;AACD,GAFD;;AAIA;;;;;;AAMA;AACA/B,WAAShQ,SAAT,CAAmB0Q,MAAnB,GAA4B,SAASA,MAAT,CAAiB1G,MAAjB,EAAyB0J,WAAzB,EAAuC;AACjE,QAAIf,SAAS3I,kBAAkB9L,KAAlB,GAA0B8L,MAA1B,GAAmC,KAAKuI,YAAL,CAAmBvI,MAAnB,CAAhD;;AAEA;AACA,QAAI2J,WAAW,KAAKC,IAApB;AACA,QAAI;AACF,WAAKA,IAAL,GAAYF,eAAe,KAAKE,IAApB,IAA4B,CAAE,UAAF,CAAxC;;AAEAjB,cACA,OAAQA,OAAOtU,MAAf,EAAwB;AACtB,YAAIM,IAAI,KAAKmU,YAAL,CAAmBH,OAAOkB,KAAP,EAAnB,EAAmClB,MAAnC,CAAR;;AAEA;AACA,YAAK,CAAChU,EAAEN,MAAR,EAAiB,SAASsU,MAAT;;AAEjB,aAAKiB,IAAL,CAAU1Y,IAAV,CAAe4Y,KAAf,CAAsB,KAAKF,IAA3B,EAAiCjV,CAAjC;AACD;AACD,aAAO,KAAKiV,IAAZ;AACD,KAbD,SAcQ;AACN,UAAKF,WAAL,EAAmB;AACjB,aAAKE,IAAL,GAAYD,QAAZ;AACD;AACF;AACF,GAxBD;;AA0BA;AACA3D,WAAShQ,SAAT,CAAmBuT,KAAnB,GAA2B,YAAY;AACrC,QAAIQ,OAAO7V,MAAM8B,SAAN,CAAgBgU,KAAhB,CAAsBZ,IAAtB,CAA4BlB,SAA5B,CAAX;AACA6B,SAAKE,OAAL,CAAa,KAAKzD,YAAlB;AACA,QAAK,OAAO0D,KAAP,KAAiB,WAAtB,EACIA,MAAMJ,KAAN,CAAaI,KAAb,EAAoBH,IAApB;AACJ,QAAK,OAAOvK,OAAP,KAAmB,WAAnB,IAAkC,OAAOA,QAAQC,GAAf,KAAuB,WAA9D,EACID,QAAQC,GAAR,CAAYqK,KAAZ,CAAmB,IAAnB,EAAyBC,IAAzB;AACL,GAPD;;AASA/D,WAAShQ,SAAT,CAAmBmU,kBAAnB,GAAwC,UAAUzB,EAAV,EAAcX,KAAd,EAAqBqC,EAArB,EAA0B;AAChE;AACA,QAAIpN,CAAJ;AAAA,QACIrI,IAAIoT,MAAMsC,OAAN,EADR;;AAGA,WAAQ1V,EAAEN,MAAF,IAAY,CAAC2I,IAAI0L,GAAGzH,IAAH,CAAQtM,CAAR,CAAL,KAAqB,IAAzC,EAAgD;AAC9CA,UAAIA,EAAEkL,MAAF,CAAU7C,EAAE,CAAF,EAAK3I,MAAf,CAAJ;AACA+V,SAAGhB,IAAH,CAAQ,IAAR,EAAcpM,CAAd;AACD;AACD,WAAOrI,CAAP;AACD,GAVD;;AAYA;;;;;AAKAqR,WAASE,QAAT,GAAoB,EAApB;;AAEA;;;;;;;;AAQAF,WAASE,QAAT,CAAkBC,MAAlB,GAA2B;AACzB4B,WAAO;AACLuC,iBAAW,SAASA,SAAT,CAAoBvC,KAApB,EAA2BgB,IAA3B,EAAkC;AAC3C,YAAI/L,IAAI+K,MAAMtF,KAAN,CAAa,mCAAb,CAAR;;AAEA,YAAK,CAACzF,CAAN,EAAU,OAAOvI,SAAP;;AAEV,YAAI8V,SAAS,CAAE,QAAF,EAAY,EAAEC,OAAOxN,EAAG,CAAH,EAAO3I,MAAhB,EAAZ,CAAb;AACAH,cAAM8B,SAAN,CAAgB9E,IAAhB,CAAqB4Y,KAArB,CAA2BS,MAA3B,EAAmC,KAAKf,aAAL,CAAmBxM,EAAG,CAAH,CAAnB,CAAnC;;AAEA,YAAKA,EAAE,CAAF,EAAK3I,MAAL,GAAc0T,MAAM1T,MAAzB,EACE0U,KAAKkB,OAAL,CAAcnC,SAAUC,MAAMlI,MAAN,CAAc7C,EAAE,CAAF,EAAK3I,MAAnB,CAAV,EAAuC0T,MAAMN,QAA7C,EAAuDM,MAAML,UAAN,GAAmB,CAA1E,CAAd;;AAEF,eAAO,CAAE6C,MAAF,CAAP;AACD,OAbI;;AAeLE,oBAAc,SAASA,YAAT,CAAuB1C,KAAvB,EAA8BgB,IAA9B,EAAqC;AACjD,YAAI/L,IAAI+K,MAAMtF,KAAN,CAAa,4BAAb,CAAR;;AAEA,YAAK,CAACzF,CAAN,EAAU,OAAOvI,SAAP;;AAEV,YAAI+V,QAAUxN,EAAG,CAAH,MAAW,GAAb,GAAqB,CAArB,GAAyB,CAArC;AACA,YAAIuN,SAAS,CAAE,QAAF,EAAY,EAAEC,OAAQA,KAAV,EAAZ,EAA+BxN,EAAG,CAAH,CAA/B,CAAb;;AAEA,YAAKA,EAAE,CAAF,EAAK3I,MAAL,GAAc0T,MAAM1T,MAAzB,EACE0U,KAAKkB,OAAL,CAAcnC,SAAUC,MAAMlI,MAAN,CAAc7C,EAAE,CAAF,EAAK3I,MAAnB,CAAV,EAAuC0T,MAAMN,QAA7C,EAAuDM,MAAML,UAAN,GAAmB,CAA1E,CAAd;;AAEF,eAAO,CAAE6C,MAAF,CAAP;AACD,OA3BI;;AA6BLG,YAAM,SAASA,IAAT,CAAe3C,KAAf,EAAsBgB,IAAtB,EAA6B;AACjC;AACA;AACA;AACA;AACA;;AAEA,YAAI4B,MAAM,EAAV;AAAA,YACIjC,KAAK,2BADT;AAAA,YAEIkC,KAFJ;;AAIA;AACA,YAAK,CAAC7C,MAAMtF,KAAN,CAAaiG,EAAb,CAAN,EAA0B,OAAOjU,SAAP;;AAE1BoW,sBACA,GAAG;AACD;AACA,cAAIlW,IAAI,KAAKwV,kBAAL,CACEzB,EADF,EACMX,MAAMsC,OAAN,EADN,EACuB,UAAUrN,CAAV,EAAc;AAAE2N,gBAAIzZ,IAAJ,CAAU8L,EAAE,CAAF,CAAV;AAAmB,WAD1D,CAAR;;AAGA,cAAKrI,EAAEN,MAAP,EAAgB;AACd;AACA0U,iBAAKkB,OAAL,CAAcnC,SAASnT,CAAT,EAAYoT,MAAMN,QAAlB,CAAd;AACA,kBAAMoD,YAAN;AACD,WAJD,MAKK,IAAK9B,KAAK1U,MAAV,EAAmB;AACtB;AACA,gBAAK,CAAC0U,KAAK,CAAL,EAAQtG,KAAR,CAAeiG,EAAf,CAAN,EAA4B,MAAMmC,YAAN;;AAE5B;AACAF,gBAAIzZ,IAAJ,CAAW6W,MAAMN,QAAN,CAAe1K,OAAf,CAAuB,QAAvB,EAAiC,EAAjC,EAAqC+N,SAArC,CAA+C,CAA/C,CAAX;;AAEA/C,oBAAQgB,KAAKc,KAAL,EAAR;AACD,WARI,MASA;AACH,kBAAMgB,YAAN;AACD;AACF,SAtBD,QAsBU,IAtBV;;AAwBA,eAAO,CAAE,CAAE,YAAF,EAAgBF,IAAII,IAAJ,CAAS,IAAT,CAAhB,CAAF,CAAP;AACD,OArEI;;AAuELC,iBAAW,SAASA,SAAT,CAAoBjD,KAApB,EAA2BgB,IAA3B,EAAkC;AAC3C;AACA,YAAI/L,IAAI+K,MAAMtF,KAAN,CAAa,wEAAb,CAAR;;AAEA,YAAK,CAACzF,CAAN,EAAU;AACR,iBAAOvI,SAAP;AACD;;AAED,YAAIwW,SAAS,CAAE,CAAE,IAAF,CAAF,CAAb;;AAEA;AACA,YAAKjO,EAAG,CAAH,CAAL,EAAc;AACZiO,iBAAOhB,OAAP,CAAeH,KAAf,CAAsBmB,MAAtB,EAA8B,KAAKnC,YAAL,CAAmB9L,EAAG,CAAH,CAAnB,EAA2B,EAA3B,CAA9B;AACD;;AAED;AACA,YAAKA,EAAG,CAAH,CAAL,EAAc;AACZ+L,eAAKkB,OAAL,CAAcnC,SAAU9K,EAAG,CAAH,CAAV,CAAd;AACD;;AAED,eAAOiO,MAAP;AACD,OA5FI;;AA8FL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,aAAQ,YAAY;AAClB;AACA,YAAIC,WAAW,eAAf;AAAA,YACIC,cAAc,OADlB;AAAA,YAEIC,cAAc,OAFlB;;AAGI;AACAC,qBAAa,IAAI9G,MAAJ,CAAY,eAAe2G,QAAf,GAA0B,SAAtC,CAJjB;AAAA,YAKII,YAAY,oBALhB;;AAOA;AACA;AACA,iBAASC,eAAT,CAA0BC,KAA1B,EAAkC;;AAEhC,iBAAO,IAAIjH,MAAJ;AACL;AACA,oBAAU+G,SAAV,GAAsB,KAAtB,GAA8BE,KAA9B,GAAsC,WAAtC,GAAoDN,QAApD,GAA+D,SAA/D;AACA;AACA,cAFA,GAEOI,SAFP,GAEmB,KAFnB,IAE4BE,QAAM,CAFlC,IAEuC,YAJlC,CAAP;AAMD;AACD,iBAASC,UAAT,CAAqB9E,KAArB,EAA6B;AAC3B,iBAAOA,MAAM7J,OAAN,CAAe,WAAf,EAA4B,MAA5B,CAAP;AACD;;AAED;AACA;AACA,iBAAS4O,GAAT,CAAaC,EAAb,EAAiBC,KAAjB,EAAwBpC,MAAxB,EAAgCqC,EAAhC,EAAoC;AAClC,cAAKD,KAAL,EAAa;AACXD,eAAG1a,IAAH,CAAS,CAAE,MAAF,EAAW6a,MAAX,CAAkBtC,MAAlB,CAAT;AACA;AACD;AACD;AACA,cAAIuC,SAASJ,GAAGA,GAAGvX,MAAH,GAAW,CAAd,aAA4BH,KAA5B,IAAqC0X,GAAGA,GAAGvX,MAAH,GAAY,CAAf,EAAkB,CAAlB,KAAwB,MAA7D,GACAuX,GAAGA,GAAGvX,MAAH,GAAW,CAAd,CADA,GAEAuX,EAFb;;AAIA;AACA,cAAKE,MAAMF,GAAGvX,MAAH,GAAY,CAAvB,EAA2BoV,OAAOQ,OAAP,CAAe6B,EAAf;;AAE3B,eAAM,IAAI5U,IAAI,CAAd,EAAiBA,IAAIuS,OAAOpV,MAA5B,EAAoC6C,GAApC,EAA0C;AACxC,gBAAI+U,OAAOxC,OAAOvS,CAAP,CAAX;AAAA,gBACIgV,SAAS,OAAOD,IAAP,IAAe,QAD5B;AAEA,gBAAKC,UAAUF,OAAO3X,MAAP,GAAgB,CAA1B,IAA+B,OAAO2X,OAAOA,OAAO3X,MAAP,GAAc,CAArB,CAAP,IAAkC,QAAtE,EAAiF;AAC/E2X,qBAAQA,OAAO3X,MAAP,GAAc,CAAtB,KAA6B4X,IAA7B;AACD,aAFD,MAGK;AACHD,qBAAO9a,IAAP,CAAa+a,IAAb;AACD;AACF;AACF;;AAED;AACA;AACA,iBAASE,oBAAT,CAA+BV,KAA/B,EAAsC9C,MAAtC,EAA+C;;AAE7C,cAAID,KAAK,IAAIlE,MAAJ,CAAY,OAAO+G,SAAP,GAAmB,GAAnB,GAAyBE,KAAzB,GAAiC,aAA7C,CAAT;AAAA,cACI1O,UAAU,IAAIyH,MAAJ,CAAW,MAAM+G,SAAN,GAAkB,GAAlB,GAAwBE,KAAxB,GAAgC,GAA3C,EAAgD,IAAhD,CADd;AAAA,cAEId,MAAM,EAFV;;AAIA,iBAAQhC,OAAOtU,MAAP,GAAgB,CAAxB,EAA4B;AAC1B,gBAAKqU,GAAGzH,IAAH,CAAS0H,OAAO,CAAP,CAAT,CAAL,EAA4B;AAC1B,kBAAIhU,IAAIgU,OAAOkB,KAAP,EAAR;;AACI;AACA9V,kBAAIY,EAAEoI,OAAF,CAAWA,OAAX,EAAoB,EAApB,CAFR;;AAIA4N,kBAAIzZ,IAAJ,CAAU4W,SAAU/T,CAAV,EAAaY,EAAE8S,QAAf,EAAyB9S,EAAE+S,UAA3B,CAAV;AACD,aAND,MAOK;AACH;AACD;AACF;AACD,iBAAOiD,GAAP;AACD;;AAED;AACA,iBAASyB,YAAT,CAAsBxX,CAAtB,EAAyBsC,CAAzB,EAA4BmV,KAA5B,EAAmC;AACjC,cAAIC,OAAO1X,EAAE0X,IAAb;AACA,cAAIC,UAAUD,KAAKA,KAAKjY,MAAL,GAAY,CAAjB,CAAd;;AAEA,cAAKkY,QAAQ,CAAR,aAAsBrY,KAAtB,IAA+BqY,QAAQ,CAAR,EAAW,CAAX,KAAiB,MAArD,EAA8D;AAC5D;AACD;AACD,cAAKrV,IAAI,CAAJ,IAASmV,MAAMhY,MAApB,EAA6B;AAC3B;AACA;AACAkY,oBAAQrb,IAAR,CAAc,CAAC,MAAD,EAAS6a,MAAT,CAAiBQ,QAAQ3S,MAAR,CAAe,CAAf,EAAkB2S,QAAQlY,MAAR,GAAiB,CAAnC,CAAjB,CAAd;AACD,WAJD,MAKK;AACH,gBAAImY,UAAUD,QAAQE,GAAR,EAAd;AACAF,oBAAQrb,IAAR,CAAc,CAAC,MAAD,EAAS6a,MAAT,CAAiBQ,QAAQ3S,MAAR,CAAe,CAAf,EAAkB2S,QAAQlY,MAAR,GAAiB,CAAnC,CAAjB,CAAd,EAAwEmY,OAAxE;AACD;AACF;;AAED;AACA,eAAO,UAAUzE,KAAV,EAAiBgB,IAAjB,EAAwB;AAC7B,cAAI/L,IAAI+K,MAAMtF,KAAN,CAAa6I,UAAb,CAAR;AACA,cAAK,CAACtO,CAAN,EAAU,OAAOvI,SAAP;;AAEV,mBAASiY,SAAT,CAAoB1P,CAApB,EAAwB;AACtB,gBAAIsP,OAAOlB,YAAYnK,IAAZ,CAAkBjE,EAAE,CAAF,CAAlB,IACA,CAAC,YAAD,CADA,GAEA,CAAC,YAAD,CAFX;;AAIAqP,kBAAMnb,IAAN,CAAY,EAAEob,MAAMA,IAAR,EAAcK,QAAQ3P,EAAE,CAAF,CAAtB,EAAZ;AACA,mBAAOsP,IAAP;AACD;;AAGD,cAAID,QAAQ,EAAZ;AAAA,cAAgB;AACZC,iBAAOI,UAAW1P,CAAX,CADX;AAAA,cAEIuP,OAFJ;AAAA,cAGIV,QAAQ,KAHZ;AAAA,cAIIlB,MAAM,CAAE0B,MAAM,CAAN,EAASC,IAAX,CAJV;AAAA,cAKIpV,CALJ;;AAOA;AACA0V,wBACA,OAAQ,IAAR,EAAe;AACb;AACA,gBAAIhC,QAAQ7C,MAAM8E,KAAN,CAAa,QAAb,CAAZ;;AAEA;AACA;AACA,gBAAIC,gBAAgB,EAApB;;AAEA;AACAC,0BACA,KAAM,IAAInE,UAAU,CAApB,EAAuBA,UAAUgC,MAAMvW,MAAvC,EAA+CuU,SAA/C,EAA2D;AACzD,kBAAIkD,KAAK,EAAT;AAAA,kBACIjX,IAAI+V,MAAMhC,OAAN,EAAe7L,OAAf,CAAuB,KAAvB,EAA8B,UAASuL,CAAT,EAAY;AAAEwD,qBAAKxD,CAAL,CAAQ,OAAO,EAAP;AAAY,eAAhE,CADR;;AAGA;AACA,kBAAI0E,UAAUxB,gBAAiBa,MAAMhY,MAAvB,CAAd;;AAEA2I,kBAAInI,EAAE4N,KAAF,CAASuK,OAAT,CAAJ;AACA;;AAEA;AACA,kBAAKhQ,EAAE,CAAF,MAASvI,SAAd,EAA0B;AACxB;AACA,oBAAKqY,cAAczY,MAAnB,EAA4B;AAC1BsX,sBAAKY,OAAL,EAAcV,KAAd,EAAqB,KAAKrC,aAAL,CAAoBsD,aAApB,CAArB,EAA0DhB,EAA1D;AACA;AACAD,0BAAQ,KAAR;AACAiB,kCAAgB,EAAhB;AACD;;AAED9P,kBAAE,CAAF,IAAO0O,WAAY1O,EAAE,CAAF,CAAZ,CAAP;AACA,oBAAIiQ,eAAerZ,KAAKQ,KAAL,CAAW4I,EAAE,CAAF,EAAK3I,MAAL,GAAY,CAAvB,IAA0B,CAA7C;AACA;AACA,oBAAK4Y,eAAeZ,MAAMhY,MAA1B,EAAmC;AACjC;AACA;AACAiY,yBAAOI,UAAW1P,CAAX,CAAP;AACAuP,0BAAQrb,IAAR,CAAcob,IAAd;AACAC,4BAAUD,KAAK,CAAL,IAAU,CAAE,UAAF,CAApB;AACD,iBAND,MAOK;AACH;AACA;AACA;AACA;AACA,sBAAIY,QAAQ,KAAZ;AACA,uBAAMhW,IAAI,CAAV,EAAaA,IAAImV,MAAMhY,MAAvB,EAA+B6C,GAA/B,EAAqC;AACnC,wBAAKmV,MAAOnV,CAAP,EAAWyV,MAAX,IAAqB3P,EAAE,CAAF,CAA1B,EAAiC;AACjCsP,2BAAOD,MAAOnV,CAAP,EAAWoV,IAAlB;AACAD,0BAAMzS,MAAN,CAAc1C,IAAE,CAAhB,EAAmBmV,MAAMhY,MAAN,IAAgB6C,IAAE,CAAlB,CAAnB;AACAgW,4BAAQ,IAAR;AACA;AACD;;AAED,sBAAI,CAACA,KAAL,EAAY;AACV;AACAD;AACA,wBAAKA,gBAAgBZ,MAAMhY,MAA3B,EAAoC;AAClCgY,4BAAMzS,MAAN,CAAaqT,YAAb,EAA2BZ,MAAMhY,MAAN,GAAe4Y,YAA1C;AACA;AACAX,6BAAOD,MAAMY,eAAa,CAAnB,EAAsBX,IAA7B;AACA;AACD,qBALD,MAMK;AACH;AACAA,6BAAOI,UAAU1P,CAAV,CAAP;AACAuP,8BAAQrb,IAAR,CAAaob,IAAb;AACD;AACF;;AAED;AACAC,4BAAU,CAAE,UAAF,CAAV;AACAD,uBAAKpb,IAAL,CAAUqb,OAAV;AACD,iBApDuB,CAoDtB;AACFT,qBAAK,EAAL;AACD;;AAED;AACA,kBAAKjX,EAAER,MAAF,GAAW2I,EAAE,CAAF,EAAK3I,MAArB,EAA8B;AAC5ByY,iCAAiBhB,KAAKjX,EAAEgL,MAAF,CAAU7C,EAAE,CAAF,EAAK3I,MAAf,CAAtB;AACD;AACF,aAjFY,CAiFX;;AAEF,gBAAKyY,cAAczY,MAAnB,EAA4B;AAC1BsX,kBAAKY,OAAL,EAAcV,KAAd,EAAqB,KAAKrC,aAAL,CAAoBsD,aAApB,CAArB,EAA0DhB,EAA1D;AACA;AACAD,sBAAQ,KAAR;AACAiB,8BAAgB,EAAhB;AACD;;AAED;AACA;AACA,gBAAIK,YAAYhB,qBAAsBE,MAAMhY,MAA5B,EAAoC0U,IAApC,CAAhB;;AAEA;AACA,gBAAKoE,UAAU9Y,MAAV,GAAmB,CAAxB,EAA4B;AAC1B;AACA+Y,sBAASf,KAAT,EAAgBD,YAAhB,EAA8B,IAA9B;;AAEAG,sBAAQrb,IAAR,CAAa4Y,KAAb,CAAoByC,OAApB,EAA6B,KAAK7F,MAAL,CAAayG,SAAb,EAAwB,EAAxB,CAA7B;AACD;;AAED,gBAAIE,aAAatE,KAAK,CAAL,KAAWA,KAAK,CAAL,EAAQsB,OAAR,EAAX,IAAgC,EAAjD;;AAEA,gBAAKgD,WAAW5K,KAAX,CAAiB6I,UAAjB,KAAgC+B,WAAW5K,KAAX,CAAkB,IAAlB,CAArC,EAAgE;AAC9DsF,sBAAQgB,KAAKc,KAAL,EAAR;;AAEA;AACA,kBAAIyD,KAAK,KAAKrH,OAAL,CAAa8B,KAAb,CAAmBiD,SAAnB,CAA8BjD,KAA9B,EAAqCgB,IAArC,CAAT;;AAEA,kBAAKuE,EAAL,EAAU;AACR3C,oBAAIzZ,IAAJ,CAAS4Y,KAAT,CAAea,GAAf,EAAoB2C,EAApB;AACA;AACD;;AAED;AACAF,sBAASf,KAAT,EAAgBD,YAAhB,EAA8B,IAA9B;;AAEAP,sBAAQ,IAAR;AACA,uBAASe,YAAT;AACD;AACD;AACD,WAjJ4B,CAiJ3B;;AAEF,iBAAOjC,GAAP;AACD,SApJD;AAqJD,OAnPM,EA/GF;;AAoWL4C,kBAAY,SAASA,UAAT,CAAqBxF,KAArB,EAA4BgB,IAA5B,EAAmC;AAC7C,YAAK,CAAChB,MAAMtF,KAAN,CAAa,KAAb,CAAN,EACE,OAAOhO,SAAP;;AAEF,YAAIwW,SAAS,EAAb;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAKlD,MAAO,CAAP,KAAc,GAAnB,EAAyB;AACvB,cAAI6C,QAAQ7C,MAAM8E,KAAN,CAAa,IAAb,CAAZ;AAAA,cACIW,OAAO,EADX;AAAA,cAEI5E,UAAUb,MAAML,UAFpB;;AAIA;AACA,iBAAQkD,MAAMvW,MAAN,IAAgBuW,MAAO,CAAP,EAAY,CAAZ,KAAmB,GAA3C,EAAiD;AAC7C4C,iBAAKtc,IAAL,CAAW0Z,MAAMf,KAAN,EAAX;AACAjB;AACH;;AAED,cAAI6E,WAAW3F,SAAU0F,KAAKzC,IAAL,CAAW,IAAX,CAAV,EAA6B,IAA7B,EAAmChD,MAAML,UAAzC,CAAf;AACAuD,iBAAO/Z,IAAP,CAAY4Y,KAAZ,CAAmBmB,MAAnB,EAA2B,KAAKnC,YAAL,CAAmB2E,QAAnB,EAA6B,EAA7B,CAA3B;AACA;AACA1F,kBAAQD,SAAU8C,MAAMG,IAAN,CAAY,IAAZ,CAAV,EAA8BhD,MAAMN,QAApC,EAA8CmB,OAA9C,CAAR;AACD;;AAGD;AACA,eAAQG,KAAK1U,MAAL,IAAe0U,KAAM,CAAN,EAAW,CAAX,KAAkB,GAAzC,EAA+C;AAC7C,cAAIpU,IAAIoU,KAAKc,KAAL,EAAR;AACA9B,kBAAQD,SAAUC,QAAQA,MAAMN,QAAd,GAAyB9S,CAAnC,EAAsCA,EAAE8S,QAAxC,EAAkDM,MAAML,UAAxD,CAAR;AACD;;AAED;AACA,YAAId,QAAQmB,MAAMhL,OAAN,CAAe,QAAf,EAAyB,EAAzB,CAAZ;AAAA,YACI4M,WAAW,KAAKC,IADpB;AAAA,YAEI8D,iBAAiB,KAAKhH,MAAL,CAAaE,KAAb,EAAoB,CAAE,YAAF,CAApB,CAFrB;AAAA,YAGI+G,OAAO3G,aAAc0G,cAAd,CAHX;;AAKA;AACA,YAAKC,QAAQA,KAAKzG,UAAlB,EAA+B;AAC7B,iBAAOyG,KAAKzG,UAAZ;AACA;AACA,cAAK0G,QAASD,IAAT,CAAL,EAAuB;AACrBD,2BAAe9T,MAAf,CAAuB,CAAvB,EAA0B,CAA1B;AACD;AACF;;AAEDqR,eAAO/Z,IAAP,CAAawc,cAAb;AACA,eAAOzC,MAAP;AACD,OAxZI;;AA0ZL4C,qBAAe,SAASA,aAAT,CAAwB9F,KAAxB,EAA+BgB,IAA/B,EAAqC;AAClD,YAAIL,KAAK,8DAAT;AACA;;AAEA,YAAK,CAACX,MAAMtF,KAAN,CAAYiG,EAAZ,CAAN,EACE,OAAOjU,SAAP;;AAEF;AACA,YAAK,CAACuS,aAAc,KAAK4C,IAAnB,CAAN,EAAkC;AAChC,eAAKA,IAAL,CAAUhQ,MAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,EAAxB;AACD;;AAED,YAAImN,QAAQC,aAAc,KAAK4C,IAAnB,CAAZ;;AAEA;AACA,YAAK7C,MAAMG,UAAN,KAAqBzS,SAA1B,EAAsC;AACpCsS,gBAAMG,UAAN,GAAmB,EAAnB;AACD;;AAED,YAAIvS,IAAI,KAAKwV,kBAAL,CAAwBzB,EAAxB,EAA4BX,KAA5B,EAAmC,UAAU/K,CAAV,EAAc;;AAEvD,cAAKA,EAAE,CAAF,KAAQA,EAAE,CAAF,EAAK,CAAL,KAAW,GAAnB,IAA0BA,EAAE,CAAF,EAAKA,EAAE,CAAF,EAAK3I,MAAL,GAAY,CAAjB,KAAuB,GAAtD,EACE2I,EAAE,CAAF,IAAOA,EAAE,CAAF,EAAK8N,SAAL,CAAgB,CAAhB,EAAmB9N,EAAE,CAAF,EAAK3I,MAAL,GAAc,CAAjC,CAAP;;AAEF,cAAIyZ,MAAM/G,MAAMG,UAAN,CAAkBlK,EAAE,CAAF,EAAK+Q,WAAL,EAAlB,IAAyC;AACjD5I,kBAAMnI,EAAE,CAAF;AAD2C,WAAnD;;AAIA,cAAKA,EAAE,CAAF,MAASvI,SAAd,EACEqZ,IAAI1J,KAAJ,GAAYpH,EAAE,CAAF,CAAZ,CADF,KAEK,IAAKA,EAAE,CAAF,MAASvI,SAAd,EACHqZ,IAAI1J,KAAJ,GAAYpH,EAAE,CAAF,CAAZ;AAEH,SAdO,CAAR;;AAgBA,YAAKrI,EAAEN,MAAP,EACE0U,KAAKkB,OAAL,CAAcnC,SAAUnT,CAAV,EAAaoT,MAAMN,QAAnB,CAAd;;AAEF,eAAO,EAAP;AACD,OAjcI;;AAmcLuG,YAAM,SAASA,IAAT,CAAejG,KAAf,EAAsBgB,IAAtB,EAA6B;AACjC;AACA,eAAO,CAAE,CAAC,MAAD,EAASgD,MAAT,CAAiB,KAAKvC,aAAL,CAAoBzB,KAApB,CAAjB,CAAF,CAAP;AACD;AAtcI;AADkB,GAA3B;;AA2cA/B,WAASE,QAAT,CAAkBC,MAAlB,CAAyBsD,MAAzB,GAAkC;;AAE9BwE,oBAAgB,SAASC,UAAT,CAAqBC,IAArB,EAA2BC,cAA3B,EAA2CC,cAA3C,EAA4D;AAC1E,UAAIrR,CAAJ;AAAA,UACIqM,GADJ;AAAA,UAEIR,YAAY,CAFhB;;AAIAuF,uBAAiBA,kBAAkB,KAAKnI,OAAL,CAAawD,MAAb,CAAoB6E,YAAvD;AACA,UAAI5F,KAAK,IAAIlE,MAAJ,CAAY,mBAAmB4J,eAAepO,MAAf,IAAyBoO,cAA5C,IAA8D,GAA1E,CAAT;;AAEApR,UAAI0L,GAAGzH,IAAH,CAASkN,IAAT,CAAJ;AACA,UAAI,CAACnR,CAAL,EAAQ;AACN;AACA,eAAO,CAAEmR,KAAK9Z,MAAP,EAAe8Z,IAAf,CAAP;AACD,OAHD,MAIK,IAAKnR,EAAE,CAAF,CAAL,EAAY;AACf;AACA,eAAO,CAAEA,EAAE,CAAF,EAAK3I,MAAP,EAAe2I,EAAE,CAAF,CAAf,CAAP;AACD;;AAED,UAAIqM,GAAJ;AACA,UAAKrM,EAAE,CAAF,KAAQ,KAAKiJ,OAAL,CAAawD,MAA1B,EAAmC;AACjCJ,cAAM,KAAKpD,OAAL,CAAawD,MAAb,CAAqBzM,EAAE,CAAF,CAArB,EAA4BoM,IAA5B,CACI,IADJ,EAEI+E,KAAKtO,MAAL,CAAa7C,EAAEuR,KAAf,CAFJ,EAE4BvR,CAF5B,EAE+BqR,kBAAkB,EAFjD,CAAN;AAGD;AACD;AACAhF,YAAMA,OAAO,CAAErM,EAAE,CAAF,EAAK3I,MAAP,EAAe2I,EAAE,CAAF,CAAf,CAAb;AACA,aAAOqM,GAAP;AACD,KA7B6B;;AA+B9BF,cAAU,SAASM,MAAT,CAAiB0E,IAAjB,EAAuBK,QAAvB,EAAkC;;AAE1C,UAAIC,MAAM,EAAV;AAAA,UACIpF,GADJ;;AAGA,eAASsC,GAAT,CAAa5X,CAAb,EAAgB;AACd;AACA,YAAK,OAAOA,CAAP,IAAY,QAAZ,IAAwB,OAAO0a,IAAIA,IAAIpa,MAAJ,GAAW,CAAf,CAAP,IAA4B,QAAzD,EACEoa,IAAKA,IAAIpa,MAAJ,GAAW,CAAhB,KAAuBN,CAAvB,CADF,KAGE0a,IAAIvd,IAAJ,CAAS6C,CAAT;AACH;;AAED,aAAQoa,KAAK9Z,MAAL,GAAc,CAAtB,EAA0B;AACxBgV,cAAM,KAAKpD,OAAL,CAAawD,MAAb,CAAoBwE,cAApB,CAAmC7E,IAAnC,CAAwC,IAAxC,EAA8C+E,IAA9C,EAAoDK,QAApD,EAA8DC,GAA9D,CAAN;AACAN,eAAOA,KAAKtO,MAAL,CAAawJ,IAAIQ,KAAJ,EAAb,CAAP;AACAuD,gBAAQ/D,GAAR,EAAasC,GAAb;AACD;;AAED,aAAO8C,GAAP;AACD,KAnD6B;;AAqD9B;AACA;AACA,SAAK,aAAY,CAAE,CAvDW;AAwD9B,SAAK,aAAY,CAAE,CAxDW;;AA0D9BC,gBAAa,4BA1DiB;;AA4D9B,UAAM,SAASC,OAAT,CAAkBR,IAAlB,EAAyB;AAC7B;AACA;AACA,UAAK,KAAKlI,OAAL,CAAawD,MAAb,CAAoBiF,UAApB,CAA+BzN,IAA/B,CAAqCkN,IAArC,CAAL,EACE,OAAO,CAAE,CAAF,EAAKA,KAAKS,MAAL,CAAa,CAAb,CAAL,CAAP,CADF;AAGE;AACA,eAAO,CAAE,CAAF,EAAK,IAAL,CAAP;AACH,KApE6B;;AAsE9B,UAAM,SAAS5f,KAAT,CAAgBmf,IAAhB,EAAuB;;AAE3B;AACA;;AAEA;AACA;AACA,UAAInR,IAAImR,KAAK1L,KAAL,CAAY,oEAAZ,CAAR;;AAEA,UAAKzF,CAAL,EAAS;AACP,YAAKA,EAAE,CAAF,KAAQA,EAAE,CAAF,EAAK,CAAL,KAAW,GAAnB,IAA0BA,EAAE,CAAF,EAAKA,EAAE,CAAF,EAAK3I,MAAL,GAAY,CAAjB,KAAuB,GAAtD,EACE2I,EAAE,CAAF,IAAOA,EAAE,CAAF,EAAK8N,SAAL,CAAgB,CAAhB,EAAmB9N,EAAE,CAAF,EAAK3I,MAAL,GAAc,CAAjC,CAAP;;AAEF2I,UAAE,CAAF,IAAO,KAAKiJ,OAAL,CAAawD,MAAb,CAAoBN,QAApB,CAA6BC,IAA7B,CAAmC,IAAnC,EAAyCpM,EAAE,CAAF,CAAzC,EAA+C,IAA/C,EAAsD,CAAtD,CAAP;;AAEA,YAAI+J,QAAQ,EAAE8H,KAAK7R,EAAE,CAAF,CAAP,EAAamI,MAAMnI,EAAE,CAAF,KAAQ,EAA3B,EAAZ;AACA,YAAKA,EAAE,CAAF,MAASvI,SAAd,EACEsS,MAAM3C,KAAN,GAAcpH,EAAE,CAAF,CAAd;;AAEF,eAAO,CAAEA,EAAE,CAAF,EAAK3I,MAAP,EAAe,CAAE,KAAF,EAAS0S,KAAT,CAAf,CAAP;AACD;;AAED;AACA/J,UAAImR,KAAK1L,KAAL,CAAY,4BAAZ,CAAJ;;AAEA,UAAKzF,CAAL,EAAS;AACP;AACA;AACA,eAAO,CAAEA,EAAE,CAAF,EAAK3I,MAAP,EAAe,CAAE,SAAF,EAAa,EAAEwa,KAAK7R,EAAE,CAAF,CAAP,EAAa8Q,KAAK9Q,EAAE,CAAF,EAAK+Q,WAAL,EAAlB,EAAsCe,UAAU9R,EAAE,CAAF,CAAhD,EAAb,CAAf,CAAP;AACD;;AAED;AACA,aAAO,CAAE,CAAF,EAAK,IAAL,CAAP;AACD,KAvG6B;;AAyG9B,SAAK,SAAS6F,IAAT,CAAesL,IAAf,EAAsB;;AAEzB,UAAIY,OAAO1I,OAAO8H,IAAP,CAAX;AACA;AACA,UAAI9E,MAAMrD,SAASgJ,cAAT,CAAwBC,iBAAxB,CAA0C7F,IAA1C,CAAgD,IAAhD,EAAsD+E,KAAKtO,MAAL,CAAY,CAAZ,CAAtD,EAAsE,GAAtE,CAAV;;AAEA;AACA,UAAK,CAACwJ,GAAN,EAAY,OAAO,CAAE,CAAF,EAAK,GAAL,CAAP;;AAEZ,UAAI6F,WAAW,IAAI7F,IAAK,CAAL,CAAnB;AAAA,UACI8F,WAAW9F,IAAK,CAAL,CADf;AAAA,UAEIxG,IAFJ;AAAA,UAGIkE,KAHJ;;AAKA;AACA;AACAoH,aAAOA,KAAKtO,MAAL,CAAaqP,QAAb,CAAP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAIlS,IAAImR,KAAK1L,KAAL,CAAY,sDAAZ,CAAR;AACA,UAAKzF,CAAL,EAAS;AACP,YAAIM,MAAMN,EAAE,CAAF,CAAV;AACAkS,oBAAYlS,EAAE,CAAF,EAAK3I,MAAjB;;AAEA,YAAKiJ,OAAOA,IAAI,CAAJ,KAAU,GAAjB,IAAwBA,IAAIA,IAAIjJ,MAAJ,GAAW,CAAf,KAAqB,GAAlD,EACEiJ,MAAMA,IAAIwN,SAAJ,CAAe,CAAf,EAAkBxN,IAAIjJ,MAAJ,GAAa,CAA/B,CAAN;;AAEF;AACA,YAAK,CAAC2I,EAAE,CAAF,CAAN,EAAa;AACX,cAAIoS,cAAc,CAAlB,CADW,CACU;AACrB,eAAM,IAAIC,MAAM,CAAhB,EAAmBA,MAAM/R,IAAIjJ,MAA7B,EAAqCgb,KAArC,EAA6C;AAC3C,oBAAS/R,IAAI+R,GAAJ,CAAT;AACA,mBAAK,GAAL;AACED;AACA;AACF,mBAAK,GAAL;AACE,oBAAK,EAAEA,WAAF,IAAiB,CAAtB,EAAyB;AACvBF,8BAAY5R,IAAIjJ,MAAJ,GAAagb,GAAzB;AACA/R,wBAAMA,IAAIwN,SAAJ,CAAc,CAAd,EAAiBuE,GAAjB,CAAN;AACD;AACD;AATF;AAWD;AACF;;AAED;AACA/R,cAAM,KAAK2I,OAAL,CAAawD,MAAb,CAAoBN,QAApB,CAA6BC,IAA7B,CAAmC,IAAnC,EAAyC9L,GAAzC,EAA8C,IAA9C,EAAqD,CAArD,CAAN;;AAEAyJ,gBAAQ,EAAE5B,MAAM7H,OAAO,EAAf,EAAR;AACA,YAAKN,EAAE,CAAF,MAASvI,SAAd,EACEsS,MAAM3C,KAAN,GAAcpH,EAAE,CAAF,CAAd;;AAEF6F,eAAO,CAAE,MAAF,EAAUkE,KAAV,EAAkBgF,MAAlB,CAA0BoD,QAA1B,CAAP;AACA,eAAO,CAAED,QAAF,EAAYrM,IAAZ,CAAP;AACD;;AAED;AACA;AACA7F,UAAImR,KAAK1L,KAAL,CAAY,eAAZ,CAAJ;;AAEA,UAAKzF,CAAL,EAAS;;AAEPkS,oBAAYlS,EAAG,CAAH,EAAO3I,MAAnB;;AAEA;AACA0S,gBAAQ,EAAE+G,KAAK,CAAE9Q,EAAG,CAAH,KAAUqJ,OAAO8I,QAAP,CAAZ,EAA+BpB,WAA/B,EAAP,EAAsDe,UAAUC,KAAKlP,MAAL,CAAa,CAAb,EAAgBqP,QAAhB,CAAhE,EAAR;;AAEArM,eAAO,CAAE,UAAF,EAAckE,KAAd,EAAsBgF,MAAtB,CAA8BoD,QAA9B,CAAP;;AAEA;AACA;AACA;AACA,eAAO,CAAED,QAAF,EAAYrM,IAAZ,CAAP;AACD;;AAED;AACA;AACA,UAAKsM,SAAS9a,MAAT,IAAmB,CAAnB,IAAwB,OAAO8a,SAAS,CAAT,CAAP,IAAsB,QAAnD,EAA8D;;AAE5DpI,gBAAQ,EAAE+G,KAAKqB,SAAS,CAAT,EAAYpB,WAAZ,EAAP,EAAmCe,UAAUC,KAAKlP,MAAL,CAAa,CAAb,EAAgBqP,QAAhB,CAA7C,EAAR;AACArM,eAAO,CAAE,UAAF,EAAckE,KAAd,EAAqBoI,SAAS,CAAT,CAArB,CAAP;AACA,eAAO,CAAED,QAAF,EAAYrM,IAAZ,CAAP;AACD;;AAED;AACA,aAAO,CAAE,CAAF,EAAK,GAAL,CAAP;AACD,KApM6B;;AAuM9B,SAAK,SAASyM,QAAT,CAAmBnB,IAAnB,EAA0B;AAC7B,UAAInR,CAAJ;;AAEA,UAAK,CAAEA,IAAImR,KAAK1L,KAAL,CAAY,yDAAZ,CAAN,KAAmF,IAAxF,EAA+F;AAC7F,YAAKzF,EAAE,CAAF,CAAL,EAAY;AACV,iBAAO,CAAEA,EAAE,CAAF,EAAK3I,MAAP,EAAe,CAAE,MAAF,EAAU,EAAE8Q,MAAM,YAAYnI,EAAE,CAAF,CAApB,EAAV,EAAsCA,EAAE,CAAF,CAAtC,CAAf,CAAP;AAED,SAHD,MAIK,IAAKA,EAAE,CAAF,KAAQ,QAAb,EAAwB;AAC3B,iBAAO,CAAEA,EAAE,CAAF,EAAK3I,MAAP,EAAe,CAAE,MAAF,EAAU,EAAE8Q,MAAMnI,EAAE,CAAF,CAAR,EAAV,EAA0BA,EAAE,CAAF,EAAK6C,MAAL,CAAY,UAAUxL,MAAtB,CAA1B,CAAf,CAAP;AACD,SAFI,MAIH,OAAO,CAAE2I,EAAE,CAAF,EAAK3I,MAAP,EAAe,CAAE,MAAF,EAAU,EAAE8Q,MAAMnI,EAAE,CAAF,CAAR,EAAV,EAA0BA,EAAE,CAAF,CAA1B,CAAf,CAAP;AACH;;AAED,aAAO,CAAE,CAAF,EAAK,GAAL,CAAP;AACD,KAvN6B;;AAyN9B,SAAK,SAASuS,UAAT,CAAqBpB,IAArB,EAA4B;AAC/B;AACA;AACA,UAAInR,IAAImR,KAAK1L,KAAL,CAAY,oBAAZ,CAAR;;AAEA,UAAKzF,KAAKA,EAAE,CAAF,CAAV,EACE,OAAO,CAAEA,EAAE,CAAF,EAAK3I,MAAL,GAAc2I,EAAE,CAAF,EAAK3I,MAArB,EAA6B,CAAE,YAAF,EAAgB2I,EAAE,CAAF,CAAhB,CAA7B,CAAP,CADF,KAEK;AACH;AACA,eAAO,CAAE,CAAF,EAAK,GAAL,CAAP;AACD;AACF,KApO6B;;AAsO9B,YAAQ,SAASwS,SAAT,CAAoBrB,IAApB,EAA2B;AACjC,aAAO,CAAE,CAAF,EAAK,CAAE,WAAF,CAAL,CAAP;AACD;;AAxO6B,GAAlC;;AA4OA;AACA,WAASsB,SAAT,CAAoBC,GAApB,EAAyBjJ,EAAzB,EAA8B;;AAE5B,QAAIkJ,aAAaD,MAAM,QAAvB;AAAA,QACIE,aAAaF,OAAO,QAAP,GAAkB,UAAlB,GAA+B,cADhD;;AAGA,aAASG,QAAT,CAAkBR,GAAlB,EAAuB;AACrB,WAAKS,SAAL,GAAiBT,GAAjB;AACA,WAAKhK,IAAL,GAAY,WAAWoB,EAAvB;AACD;;AAED,WAAO,UAAW0H,IAAX,EAAiB4B,UAAjB,EAA8B;;AAEnC,UAAK,KAAKJ,UAAL,EAAiB,CAAjB,KAAuBlJ,EAA5B,EAAiC;AAC/B;AACA;AACA,aAAKkJ,UAAL,EAAiB9F,KAAjB;;AAEA;AACA,eAAM,CAAEsE,KAAK9Z,MAAP,EAAe,IAAIwb,QAAJ,CAAa1B,KAAK9Z,MAAL,GAAYoS,GAAGpS,MAA5B,CAAf,CAAN;AACD,OAPD,MAQK;AACH;AACA,YAAI2b,QAAQ,KAAKJ,UAAL,EAAiB5F,KAAjB,EAAZ;AAAA,YACIiG,QAAQ,KAAKN,UAAL,EAAiB3F,KAAjB,EADZ;;AAGA,aAAK2F,UAAL,EAAiB1F,OAAjB,CAAyBxD,EAAzB;;AAEA;;AAEA;AACA,YAAI4C,MAAM,KAAKG,aAAL,CAAoB2E,KAAKtO,MAAL,CAAa4G,GAAGpS,MAAhB,CAApB,CAAV;AACA;;AAEA,YAAI6b,OAAO7G,IAAIA,IAAIhV,MAAJ,GAAa,CAAjB,CAAX;;AAEA;;AAEA,YAAIuL,QAAQ,KAAK+P,UAAL,EAAiB9F,KAAjB,EAAZ;AACA,YAAKqG,gBAAgBL,QAArB,EAAgC;AAC9BxG,cAAIoD,GAAJ;AACA;AACA,cAAIyC,WAAWf,KAAK9Z,MAAL,GAAc6b,KAAKJ,SAAlC;AACA,iBAAO,CAAEZ,QAAF,EAAY,CAAEQ,GAAF,EAAQ3D,MAAR,CAAe1C,GAAf,CAAZ,CAAP;AACD,SALD,MAMK;AACH;AACA,eAAKuG,UAAL,IAAmBI,KAAnB;AACA,eAAKL,UAAL,IAAmBM,KAAnB;;AAEA;AACA,iBAAO,CAAExJ,GAAGpS,MAAL,EAAaoS,EAAb,CAAP;AACD;AACF;AACF,KA3CD,CAV4B,CAqDzB;AACJ;;AAEDT,WAASE,QAAT,CAAkBC,MAAlB,CAAyBsD,MAAzB,CAAgC,IAAhC,IAAwCgG,UAAU,QAAV,EAAoB,IAApB,CAAxC;AACAzJ,WAASE,QAAT,CAAkBC,MAAlB,CAAyBsD,MAAzB,CAAgC,IAAhC,IAAwCgG,UAAU,QAAV,EAAoB,IAApB,CAAxC;AACAzJ,WAASE,QAAT,CAAkBC,MAAlB,CAAyBsD,MAAzB,CAAgC,GAAhC,IAAwCgG,UAAU,IAAV,EAAgB,GAAhB,CAAxC;AACAzJ,WAASE,QAAT,CAAkBC,MAAlB,CAAyBsD,MAAzB,CAAgC,GAAhC,IAAwCgG,UAAU,IAAV,EAAgB,GAAhB,CAAxC;;AAGA;AACAzJ,WAASmK,eAAT,GAA2B,UAASnU,CAAT,EAAY;AACrC,QAAIiN,MAAM,EAAV;AACA,SAAM,IAAI/R,CAAV,IAAe8E,CAAf,EAAmB;AACjB,UAAK9E,KAAK,WAAL,IAAoBA,KAAK,UAA9B,EAA2C;AAC3C+R,UAAI/X,IAAJ,CAAUgG,CAAV;AACD;AACD8E,MAAEkN,SAAF,GAAcD,GAAd;AACD,GAPD;;AASA;AACAjD,WAASoK,mBAAT,GAA+B,UAASpU,CAAT,EAAY;AACzC,QAAIwS,WAAW,EAAf;;AAEA,SAAM,IAAItX,CAAV,IAAe8E,CAAf,EAAmB;AACjB;AACA,UAAK9E,EAAEuL,KAAF,CAAS,UAAT,CAAL,EAA4B;AAC5B,UAAI5N,IAAIqC,EAAE6F,OAAF,CAAW,sBAAX,EAAmC,MAAnC,EACEA,OADF,CACW,IADX,EACiB,KADjB,CAAR;AAEAyR,eAAStd,IAAT,CAAegG,EAAE7C,MAAF,IAAY,CAAZ,GAAgBQ,CAAhB,GAAoB,QAAQA,CAAR,GAAY,GAA/C;AACD;;AAED2Z,eAAWA,SAASzD,IAAT,CAAc,GAAd,CAAX;AACA/O,MAAEsS,YAAF,GAAiBE,QAAjB;AACA;;AAEA,QAAIjd,KAAKyK,EAAEmN,QAAX;AACAnN,MAAEmN,QAAF,GAAa,UAASgF,IAAT,EAAekC,OAAf,EAAwB;AACnC,UAAKA,WAAW5b,SAAhB,EAA4B;AAC1B,eAAOlD,GAAG6X,IAAH,CAAQ,IAAR,EAAc+E,IAAd,EAAoBkC,OAApB,CAAP;AACD,OAFD,MAIA;AACE,eAAO9e,GAAG6X,IAAH,CAAQ,IAAR,EAAc+E,IAAd,EAAoBK,QAApB,CAAP;AACD;AACF,KARD;AASD,GAzBD;;AA2BAxI,WAASgJ,cAAT,GAA0B,EAA1B;AACAhJ,WAASgJ,cAAT,CAAwBC,iBAAxB,GAA4C,UAAUd,IAAV,EAAgBmC,IAAhB,EAAuB;AACjE,QAAIpB,WAAW,CAAf;AAAA,QACIqB,QAAQ,EADZ;;AAGA,WAAQ,IAAR,EAAe;AACb,UAAKpC,KAAKS,MAAL,CAAaM,QAAb,KAA2BoB,IAAhC,EAAuC;AACrC;AACApB;AACA,eAAO,CAAEA,QAAF,EAAYqB,KAAZ,CAAP;AACD;;AAED,UAAKrB,YAAYf,KAAK9Z,MAAtB,EAA+B;AAC7B;AACA,eAAO,IAAP;AACD;;AAED,UAAIgV,MAAM,KAAKpD,OAAL,CAAawD,MAAb,CAAoBwE,cAApB,CAAmC7E,IAAnC,CAAwC,IAAxC,EAA8C+E,KAAKtO,MAAL,CAAaqP,QAAb,CAA9C,CAAV;AACAA,kBAAY7F,IAAK,CAAL,CAAZ;AACA;AACAkH,YAAMrf,IAAN,CAAW4Y,KAAX,CAAkByG,KAAlB,EAAyBlH,IAAIW,KAAJ,CAAW,CAAX,CAAzB;AACD;AACF,GArBD;;AAuBA;AACAhE,WAASwK,eAAT,GAA2B,UAAUxU,CAAV,EAAc;AACvC,aAASyU,KAAT,GAAiB,CAAE;AACnBA,UAAMza,SAAN,GAAkBgG,EAAE+L,KAApB;AACA,aAAS2I,MAAT,GAAkB,CAAE;AACpBA,WAAO1a,SAAP,GAAmBgG,EAAEyN,MAArB;;AAEA,WAAO,EAAE1B,OAAO,IAAI0I,KAAJ,EAAT,EAAsBhH,QAAQ,IAAIiH,MAAJ,EAA9B,EAAP;AACD,GAPD;;AASA1K,WAASmK,eAAT,CAA2BnK,SAASE,QAAT,CAAkBC,MAAlB,CAAyB4B,KAApD;AACA/B,WAASoK,mBAAT,CAA8BpK,SAASE,QAAT,CAAkBC,MAAlB,CAAyBsD,MAAvD;;AAEAzD,WAASE,QAAT,CAAkByK,MAAlB,GAA2B3K,SAASwK,eAAT,CAA0BxK,SAASE,QAAT,CAAkBC,MAA5C,CAA3B;;AAEAH,WAASE,QAAT,CAAkByK,MAAlB,CAAyBC,eAAzB,GAA2C,SAASA,eAAT,CAA0BC,WAA1B,EAAwC;AACjF,QAAIC,OAAOC,gBAAiBF,WAAjB,CAAX;AAAA,QACIlD,OAAO,EADX;;AAGA,SAAM,IAAIzW,IAAI,CAAd,EAAiBA,IAAI4Z,KAAKzc,MAA1B,EAAkC,EAAE6C,CAApC,EAAwC;AACtC;AACA,UAAK,KAAK8Z,IAAL,CAAWF,KAAM5Z,CAAN,CAAX,CAAL,EAA8B;AAC5ByW,aAAKnT,EAAL,GAAUsW,KAAM5Z,CAAN,EAAU4T,SAAV,CAAqB,CAArB,CAAV;AACD;AACD;AAHA,WAIK,IAAK,MAAMkG,IAAN,CAAYF,KAAM5Z,CAAN,CAAZ,CAAL,EAA+B;AAClC;AACA,cAAKyW,KAAK,OAAL,CAAL,EAAqB;AACnBA,iBAAK,OAAL,IAAgBA,KAAK,OAAL,IAAgBmD,KAAM5Z,CAAN,EAAU6F,OAAV,CAAmB,GAAnB,EAAwB,GAAxB,CAAhC;AACD,WAFD,MAGK;AACH4Q,iBAAK,OAAL,IAAgBmD,KAAM5Z,CAAN,EAAU4T,SAAV,CAAqB,CAArB,CAAhB;AACD;AACF;AACD;AATK,aAUA,IAAK,KAAKkG,IAAL,CAAWF,KAAM5Z,CAAN,CAAX,CAAL,EAA8B;AACjC,gBAAItC,IAAIkc,KAAM5Z,CAAN,EAAU2V,KAAV,CAAiB,IAAjB,CAAR;AACAc,iBAAM/Y,EAAG,CAAH,CAAN,IAAiBA,EAAG,CAAH,CAAjB;AACD;AACF;;AAED,WAAO+Y,IAAP;AACD,GA3BD;;AA6BA,WAASoD,eAAT,CAA0BF,WAA1B,EAAwC;AACtC,QAAIC,OAAOD,YAAYhE,KAAZ,CAAmB,EAAnB,CAAX;AAAA,QACIoE,QAAQ,CAAE,EAAF,CADZ;AAAA,QAEIC,YAAY,KAFhB;;AAIA,WAAQJ,KAAKzc,MAAb,EAAsB;AACpB,UAAI8c,SAASL,KAAKjH,KAAL,EAAb;AACA,cAASsH,MAAT;AACE,aAAK,GAAL;AACE;AACA,cAAKD,SAAL,EAAiB;AACfD,kBAAOA,MAAM5c,MAAN,GAAe,CAAtB,KAA6B8c,MAA7B;AACD;AACD;AAHA,eAIK;AACHF,oBAAM/f,IAAN,CAAY,EAAZ;AACD;AACD;AACF,aAAK,GAAL;AACA,aAAK,GAAL;AACE;AACAggB,sBAAY,CAACA,SAAb;AACA;AACF,aAAK,IAAL;AACE;AACA;AACAC,mBAASL,KAAKjH,KAAL,EAAT;AACF;AACEoH,gBAAOA,MAAM5c,MAAN,GAAe,CAAtB,KAA6B8c,MAA7B;AACA;AAtBJ;AAwBD;;AAED,WAAOF,KAAP;AACD;;AAEDjL,WAASE,QAAT,CAAkByK,MAAlB,CAAyB5I,KAAzB,CAA+BqJ,aAA/B,GAA+C,SAASA,aAAT,CAAwBrJ,KAAxB,EAA+BgB,IAA/B,EAAsC;AACnF;AACA,QAAKhB,MAAML,UAAN,GAAmB,CAAxB,EAA4B,OAAOjT,SAAP;;AAE5B;AACA,QAAK,CAAEsT,MAAMtF,KAAN,CAAa,uBAAb,CAAP,EAAgD,OAAOhO,SAAP;;AAEhD;AACA,QAAK,CAACuS,aAAc,KAAK4C,IAAnB,CAAN,EAAkC;AAChC,WAAKA,IAAL,CAAUhQ,MAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,EAAxB;AACD;;AAED,QAAIyX,QAAQtJ,MAAM8E,KAAN,CAAa,IAAb,CAAZ;AACA,SAAM3W,CAAN,IAAWmb,KAAX,EAAmB;AACjB,UAAIrU,IAAIqU,MAAOnb,CAAP,EAAWuM,KAAX,CAAkB,gBAAlB,CAAR;AAAA,UACI6O,MAAMtU,EAAG,CAAH,EAAO+Q,WAAP,EADV;AAAA,UAEI1f,QAAQ2O,EAAG,CAAH,CAFZ;;AAIA,WAAK4M,IAAL,CAAW,CAAX,EAAgB0H,GAAhB,IAAwBjjB,KAAxB;AACD;;AAED;AACA,WAAO,EAAP;AACD,GAvBD;;AAyBA2X,WAASE,QAAT,CAAkByK,MAAlB,CAAyB5I,KAAzB,CAA+BwJ,UAA/B,GAA4C,SAASA,UAAT,CAAqBxJ,KAArB,EAA4BgB,IAA5B,EAAmC;AAC7E;AACA,QAAI/L,IAAI+K,MAAMtF,KAAN,CAAa,2CAAb,CAAR;AACA,QAAK,CAACzF,CAAN,EAAU,OAAOvI,SAAP;;AAEV;AACA,QAAIkZ,OAAO,KAAK1H,OAAL,CAAa2K,eAAb,CAA8B5T,EAAG,CAAH,CAA9B,CAAX;;AAEA,QAAIiH,IAAJ;;AAEA;AACA,QAAKjH,EAAG,CAAH,MAAW,EAAhB,EAAqB;AACnB,UAAIwU,OAAO,KAAK5H,IAAL,CAAW,KAAKA,IAAL,CAAUvV,MAAV,GAAmB,CAA9B,CAAX;AACA4P,aAAO+C,aAAcwK,IAAd,CAAP;;AAEA;AACA,UAAK,OAAOA,IAAP,KAAgB,QAArB,EAAgC,OAAO/c,SAAP;;AAEhC;AACA,UAAK,CAACwP,IAAN,EAAa;AACXA,eAAO,EAAP;AACAuN,aAAK5X,MAAL,CAAa,CAAb,EAAgB,CAAhB,EAAmBqK,IAAnB;AACD;;AAED;AACA,WAAMgB,CAAN,IAAW0I,IAAX,EAAkB;AAChB1J,aAAMgB,CAAN,IAAY0I,KAAM1I,CAAN,CAAZ;AACD;;AAED;AACA,aAAO,EAAP;AACD;;AAED;AACA,QAAItQ,IAAIoT,MAAMhL,OAAN,CAAe,OAAf,EAAwB,EAAxB,CAAR;AAAA,QACIiE,SAAS,KAAK8H,YAAL,CAAmBnU,CAAnB,EAAsB,EAAtB,CADb;;AAGA;AACAsP,WAAO+C,aAAchG,OAAQ,CAAR,CAAd,CAAP;AACA,QAAK,CAACiD,IAAN,EAAa;AACXA,aAAO,EAAP;AACAjD,aAAQ,CAAR,EAAYpH,MAAZ,CAAoB,CAApB,EAAuB,CAAvB,EAA0BqK,IAA1B;AACD;;AAED;AACA,SAAMgB,CAAN,IAAW0I,IAAX,EAAkB;AAChB1J,WAAMgB,CAAN,IAAY0I,KAAM1I,CAAN,CAAZ;AACD;;AAED,WAAOjE,MAAP;AACD,GAlDD;;AAoDAgF,WAASE,QAAT,CAAkByK,MAAlB,CAAyB5I,KAAzB,CAA+B0J,eAA/B,GAAiD,SAASA,eAAT,CAA0B1J,KAA1B,EAAiCgB,IAAjC,EAAwC;AACvF;AACA,QAAI2I,QAAQ,kCAAZ;AAAA,QACIpF,OAAO,CAAE,IAAF,CADX;AAAA,QAEIpV,CAFJ;AAAA,QAEO8F,CAFP;;AAIA;AACA,QAAOA,IAAI+K,MAAMtF,KAAN,CAAaiP,KAAb,CAAX,EAAoC;AAClC;AACA,UAAI/I,SAAS,CAAEZ,KAAF,CAAb;AACA,aAAQgB,KAAK1U,MAAL,IAAeqd,MAAMzQ,IAAN,CAAY8H,KAAM,CAAN,CAAZ,CAAvB,EAAiD;AAC/CJ,eAAOzX,IAAP,CAAa6X,KAAKc,KAAL,EAAb;AACD;;AAED,WAAM,IAAIlV,IAAI,CAAd,EAAiBA,IAAIgU,OAAOtU,MAA5B,EAAoC,EAAEM,CAAtC,EAA0C;AACxC,YAAIqI,IAAI2L,OAAQhU,CAAR,EAAY8N,KAAZ,CAAmBiP,KAAnB,CAAR;AAAA,YACIC,QAAQ3U,EAAG,CAAH,EAAOD,OAAP,CAAgB,KAAhB,EAAuB,EAAvB,EAA4B8P,KAA5B,CAAmC,IAAnC,CADZ;AAAA,YAEI+E,QAAQ5U,EAAG,CAAH,EAAO6P,KAAP,CAAc,QAAd,CAFZ;;AAIA;;AAEA,aAAM3V,IAAI,CAAV,EAAaA,IAAIya,MAAMtd,MAAvB,EAA+B,EAAE6C,CAAjC,EAAqC;AACnCoV,eAAKpb,IAAL,CAAW,CAAE,IAAF,EAAQygB,MAAOza,CAAP,CAAR,CAAX;AACD;;AAED,aAAMA,IAAI,CAAV,EAAaA,IAAI0a,MAAMvd,MAAvB,EAA+B,EAAE6C,CAAjC,EAAqC;AACnC;AACAoV,eAAKpb,IAAL,CAAW,CAAE,IAAF,EAAS6a,MAAT,CAAiB,KAAKvC,aAAL,CAAoBoI,MAAO1a,CAAP,EAAW6F,OAAX,CAAoB,SAApB,EAA+B,IAA/B,CAApB,CAAjB,CAAX;AACD;AACF;AACF,KAvBD,MAwBK;AACH,aAAOtI,SAAP;AACD;;AAED,WAAO,CAAE6X,IAAF,CAAP;AACD,GApCD;;AAsCA;AACA;;AAEAtG,WAASE,QAAT,CAAkByK,MAAlB,CAAyB5I,KAAzB,CAA+B8J,KAA/B,GAAuC,SAASA,KAAT,CAAgB9J,KAAhB,EAAuBgB,IAAvB,EAA6B;;AAEhE,QAAI+I,sBAAsB,SAAtBA,mBAAsB,CAASld,CAAT,EAAYmd,EAAZ,EAAgB;AACtCA,WAAKA,MAAM,KAAX;AACA,UAAIA,GAAGtP,KAAH,CAAS,qBAAT,CAAJ,EAAqC;AAAEsP,aAAK,OAAOA,EAAZ;AAAiB;AACxD,UAAI1I,MAAM,EAAV;AAAA,UACI7U,IAAI,IAAIgQ,MAAJ,CAAW,sBAAsBuN,EAAtB,GAA2B,MAA3B,GAAoCA,EAApC,GAAyC,MAApD,CADR;AAAA,UAEI/U,CAFJ;AAGA,aAAMA,IAAIpI,EAAE6N,KAAF,CAAQjO,CAAR,CAAV,EAAsB;AAClB6U,YAAInY,IAAJ,CAAS8L,EAAE,CAAF,CAAT;AACApI,YAAIoI,EAAE,CAAF,CAAJ;AACH;AACDqM,UAAInY,IAAJ,CAAS0D,CAAT;AACA,aAAOyU,GAAP;AACH,KAZD;;AAcA,QAAI2I,eAAe,4EAAnB;;AACI;AACAC,sBAAkB,yGAFtB;AAAA,QAGI/a,CAHJ;AAAA,QAGO8F,CAHP;AAIA,QAAIA,IAAI+K,MAAMtF,KAAN,CAAYuP,YAAZ,CAAR,EAAmC;AAC/B;AACA;AACAhV,QAAE,CAAF,IAAOA,EAAE,CAAF,EAAKD,OAAL,CAAa,UAAb,EAAyB,EAAzB,CAAP;AACH,KAJD,MAIO,IAAI,EAAIC,IAAI+K,MAAMtF,KAAN,CAAYwP,eAAZ,CAAR,CAAJ,EAA2C;AAC9C,aAAOxd,SAAP;AACH;;AAED,QAAIod,QAAQ,CAAE,OAAF,EAAW,CAAE,OAAF,EAAW,CAAE,IAAF,CAAX,CAAX,EAAkC,CAAE,OAAF,CAAlC,CAAZ;;AAEA;AACA;AACA7U,MAAE,CAAF,IAAOA,EAAE,CAAF,EAAKD,OAAL,CAAa,QAAb,EAAuB,EAAvB,EAA2B8P,KAA3B,CAAiC,GAAjC,CAAP;;AAEA;AACA,QAAIqF,aAAa,EAAjB;AACA9E,YAASpQ,EAAE,CAAF,CAAT,EAAe,UAAUpI,CAAV,EAAa;AACxB,UAAIA,EAAE6N,KAAF,CAAQ,aAAR,CAAJ,EAAkCyP,WAAWhhB,IAAX,CAAgB,EAACihB,OAAO,OAAR,EAAhB,EAAlC,KACK,IAAIvd,EAAE6N,KAAF,CAAQ,aAAR,CAAJ,EAA6ByP,WAAWhhB,IAAX,CAAgB,EAACihB,OAAO,MAAR,EAAhB,EAA7B,KACA,IAAIvd,EAAE6N,KAAF,CAAQ,cAAR,CAAJ,EAA6ByP,WAAWhhB,IAAX,CAAgB,EAACihB,OAAO,QAAR,EAAhB,EAA7B,KAC6BD,WAAWhhB,IAAX,CAAgB,EAAhB;AACrC,KALD;;AAOA;AACA8L,MAAE,CAAF,IAAO8U,oBAAoB9U,EAAE,CAAF,EAAKD,OAAL,CAAa,QAAb,EAAuB,EAAvB,CAApB,EAAgD,GAAhD,CAAP;AACA,SAAK7F,IAAI,CAAT,EAAYA,IAAI8F,EAAE,CAAF,EAAK3I,MAArB,EAA6B6C,GAA7B,EAAkC;AAC9B2a,YAAM,CAAN,EAAS,CAAT,EAAY3gB,IAAZ,CAAiB,CAAC,IAAD,EAAOghB,WAAWhb,CAAX,KAAiB,EAAxB,EAA4B6U,MAA5B,CACb,KAAKvC,aAAL,CAAmBxM,EAAE,CAAF,EAAK9F,CAAL,EAAQkb,IAAR,EAAnB,CADa,CAAjB;AAEH;;AAED;AACAhF,YAASpQ,EAAE,CAAF,EAAKD,OAAL,CAAa,UAAb,EAAyB,EAAzB,EAA6B8P,KAA7B,CAAmC,IAAnC,CAAT,EAAmD,UAAUwF,GAAV,EAAe;AAC9D,UAAIC,WAAW,CAAC,IAAD,CAAf;AACAD,YAAMP,oBAAoBO,GAApB,EAAyB,GAAzB,CAAN;AACA,WAAKnb,IAAI,CAAT,EAAYA,IAAImb,IAAIhe,MAApB,EAA4B6C,GAA5B,EAAiC;AAC7Bob,iBAASphB,IAAT,CAAc,CAAC,IAAD,EAAOghB,WAAWhb,CAAX,KAAiB,EAAxB,EAA4B6U,MAA5B,CAAmC,KAAKvC,aAAL,CAAmB6I,IAAInb,CAAJ,EAAOkb,IAAP,EAAnB,CAAnC,CAAd;AACH;AACDP,YAAM,CAAN,EAAS3gB,IAAT,CAAcohB,QAAd;AACH,KAPD,EAOG,IAPH;;AASA,WAAO,CAACT,KAAD,CAAP;AACH,GA7DD;;AA+DA7L,WAASE,QAAT,CAAkByK,MAAlB,CAAyBlH,MAAzB,CAAiC,IAAjC,IAA0C,SAAS8I,WAAT,CAAsBpE,IAAtB,EAA4BqE,OAA5B,EAAqC/D,GAArC,EAA2C;AACnF,QAAK,CAACA,IAAIpa,MAAV,EAAmB;AACjB,aAAO,CAAE,CAAF,EAAK,IAAL,CAAP;AACD;;AAED;AACA,QAAIoe,SAAShE,IAAKA,IAAIpa,MAAJ,GAAa,CAAlB,CAAb;;AAEA,QAAK,OAAOoe,MAAP,KAAkB,QAAvB,EAAkC;AAChC,aAAO,CAAE,CAAF,EAAK,IAAL,CAAP;AACD;;AAED;AACA,QAAIzV,IAAImR,KAAK1L,KAAL,CAAY,+BAAZ,CAAR;;AAEA;AACA,QAAK,CAACzF,CAAN,EAAU;AACR,aAAO,CAAE,CAAF,EAAK,IAAL,CAAP;AACD;;AAED;AACA,QAAI8T,OAAO,KAAK7K,OAAL,CAAa2K,eAAb,CAA8B5T,EAAG,CAAH,CAA9B,CAAX;AAAA,QACI2Q,OAAO3G,aAAcyL,MAAd,CADX;;AAGA,QAAK,CAAC9E,IAAN,EAAa;AACXA,aAAO,EAAP;AACA8E,aAAO7Y,MAAP,CAAe,CAAf,EAAkB,CAAlB,EAAqB+T,IAArB;AACD;;AAED,SAAM,IAAI+E,CAAV,IAAe5B,IAAf,EAAsB;AACpBnD,WAAM+E,CAAN,IAAY5B,KAAM4B,CAAN,CAAZ;AACD;;AAED;AACA,WAAO,CAAE1V,EAAG,CAAH,EAAO3I,MAAT,EAAiB,EAAjB,CAAP;AACD,GAnCD;;AAqCA2R,WAASE,QAAT,CAAkByK,MAAlB,CAAyBlH,MAAzB,CAAgCiF,UAAhC,GAA6C,8BAA7C;;AAEA1I,WAASmK,eAAT,CAA2BnK,SAASE,QAAT,CAAkByK,MAAlB,CAAyB5I,KAApD;AACA/B,WAASoK,mBAAT,CAA8BpK,SAASE,QAAT,CAAkByK,MAAlB,CAAyBlH,MAAvD;;AAEA,MAAIH,UAAUpV,MAAMoV,OAAN,IAAiB,UAASzX,GAAT,EAAc;AAC3C,WAAOF,OAAOqE,SAAP,CAAiBwR,QAAjB,CAA0B4B,IAA1B,CAA+BvX,GAA/B,KAAuC,gBAA9C;AACD,GAFD;;AAIA,MAAIub,OAAJ;AACA;AACA,MAAKlZ,MAAM8B,SAAN,CAAgBoX,OAArB,EAA+B;AAC7BA,cAAU,iBAAUuF,GAAV,EAAevI,EAAf,EAAmBwI,KAAnB,EAA2B;AACnC,aAAOD,IAAIvF,OAAJ,CAAahD,EAAb,EAAiBwI,KAAjB,CAAP;AACD,KAFD;AAGD,GAJD,MAKK;AACHxF,cAAU,iBAASuF,GAAT,EAAcvI,EAAd,EAAkBwI,KAAlB,EAAyB;AACjC,WAAK,IAAI1b,IAAI,CAAb,EAAgBA,IAAIyb,IAAIte,MAAxB,EAAgC6C,GAAhC,EAAqC;AACnCkT,WAAGhB,IAAH,CAAQwJ,SAASD,GAAjB,EAAsBA,IAAIzb,CAAJ,CAAtB,EAA8BA,CAA9B,EAAiCyb,GAAjC;AACD;AACF,KAJD;AAKD;;AAED,MAAI/E,UAAU,SAAVA,OAAU,CAAU/b,GAAV,EAAgB;AAC5B,SAAM,IAAIyf,GAAV,IAAiBzf,GAAjB,EAAuB;AACrB,UAAKghB,eAAezJ,IAAf,CAAqBvX,GAArB,EAA0Byf,GAA1B,CAAL,EAAuC;AACrC,eAAO,KAAP;AACD;AACF;;AAED,WAAO,IAAP;AACD,GARD;;AAUA,WAAStK,YAAT,CAAuBiE,MAAvB,EAAgC;AAC9B,WAAO3B,QAAQ2B,MAAR,KACAA,OAAO5W,MAAP,GAAgB,CADhB,IAEA,QAAO4W,OAAQ,CAAR,CAAP,MAAuB,QAFvB,IAGA,CAAG3B,QAAQ2B,OAAQ,CAAR,CAAR,CAHH,GAIDA,OAAQ,CAAR,CAJC,GAKDxW,SALN;AAMD;;AAID;;;;;;;;;;;;;AAaAsR,SAAOe,YAAP,GAAsB,UAAUmE,MAAV,EAAkBtE,OAAlB,EAA4B;AAChDA,cAAUA,WAAW,EAArB;AACA;AACAA,YAAQmM,IAAR,GAAenM,QAAQmM,IAAR,IAAgB,KAA/B;;AAEA,QAAIC,UAAU,EAAd;;AAEA,QAAKpM,QAAQmM,IAAb,EAAoB;AAClBC,cAAQ7hB,IAAR,CAAc8hB,YAAa/H,MAAb,CAAd;AACD,KAFD,MAGK;AACHA,aAAOpB,KAAP,GADG,CACa;AAChB,UAAKoB,OAAO5W,MAAP,IAAiB,QAAO4W,OAAQ,CAAR,CAAP,MAAuB,QAAxC,IAAoD,EAAGA,OAAQ,CAAR,aAAuB/W,KAA1B,CAAzD,EAA6F;AAC3F+W,eAAOpB,KAAP,GAD2F,CAC3E;AACjB;;AAED,aAAQoB,OAAO5W,MAAf,EAAwB;AACtB0e,gBAAQ7hB,IAAR,CAAc8hB,YAAa/H,OAAOpB,KAAP,EAAb,CAAd;AACD;AACF;;AAED,WAAOkJ,QAAQhI,IAAR,CAAc,MAAd,CAAP;AACD,GAtBD;;AAwBA,WAASkI,UAAT,CAAqB9E,IAArB,EAA4B;AAC1B,WAAOA,KAAKpR,OAAL,CAAc,IAAd,EAAoB,OAApB,EACKA,OADL,CACc,IADd,EACoB,MADpB,EAEKA,OAFL,CAEc,IAFd,EAEoB,MAFpB,EAGKA,OAHL,CAGc,IAHd,EAGoB,QAHpB,EAIKA,OAJL,CAIc,IAJd,EAIoB,OAJpB,CAAP;AAKD;;AAED,WAASiW,WAAT,CAAsB/H,MAAtB,EAA+B;AAC7B;AACA,QAAK,OAAOA,MAAP,KAAkB,QAAvB,EAAkC;AAChC,aAAOgI,WAAYhI,MAAZ,CAAP;AACD;;AAED,QAAIyE,MAAMzE,OAAOpB,KAAP,EAAV;AAAA,QACI3F,aAAa,EADjB;AAAA,QAEI6O,UAAU,EAFd;;AAIA,QAAK9H,OAAO5W,MAAP,IAAiB,QAAO4W,OAAQ,CAAR,CAAP,MAAuB,QAAxC,IAAoD,EAAGA,OAAQ,CAAR,aAAuB/W,KAA1B,CAAzD,EAA6F;AAC3FgQ,mBAAa+G,OAAOpB,KAAP,EAAb;AACD;;AAED,WAAQoB,OAAO5W,MAAf,EAAwB;AACtB0e,cAAQ7hB,IAAR,CAAc8hB,YAAa/H,OAAOpB,KAAP,EAAb,CAAd;AACD;;AAED,QAAIqJ,YAAY,EAAhB;AACA,SAAM,IAAIjO,CAAV,IAAef,UAAf,EAA4B;AAC1BgP,mBAAa,MAAMjO,CAAN,GAAU,IAAV,GAAiBgO,WAAY/O,WAAYe,CAAZ,CAAZ,CAAjB,GAAiD,GAA9D;AACD;;AAED;AACA,QAAKyK,OAAO,KAAP,IAAgBA,OAAO,IAAvB,IAA+BA,OAAO,IAA3C,EAAkD;AAChD,aAAO,MAAKA,GAAL,GAAWwD,SAAX,GAAuB,IAA9B;AACD,KAFD,MAGK;AACH,aAAO,MAAKxD,GAAL,GAAWwD,SAAX,GAAuB,GAAvB,GAA6BH,QAAQhI,IAAR,CAAc,EAAd,CAA7B,GAAkD,IAAlD,GAAyD2E,GAAzD,GAA+D,GAAtE;AACD;AACF;;AAED,WAAStI,oBAAT,CAA+BwC,IAA/B,EAAqC1C,UAArC,EAAiDP,OAAjD,EAA2D;AACzD,QAAIzP,CAAJ;AACAyP,cAAUA,WAAW,EAArB;;AAEA;AACA,QAAIsE,SAASrB,KAAKI,KAAL,CAAY,CAAZ,CAAb;;AAEA,QAAK,OAAOrD,QAAQwM,kBAAf,KAAsC,UAA3C,EAAwD;AACpDlI,eAAStE,QAAQwM,kBAAR,CAA2BlI,MAA3B,EAAmC/D,UAAnC,CAAT;AACH;;AAED;AACA,QAAIH,QAAQC,aAAciE,MAAd,CAAZ;AACA,QAAKlE,KAAL,EAAa;AACXkE,aAAQ,CAAR,IAAc,EAAd;AACA,WAAM/T,CAAN,IAAW6P,KAAX,EAAmB;AACjBkE,eAAQ,CAAR,EAAa/T,CAAb,IAAmB6P,MAAO7P,CAAP,CAAnB;AACD;AACD6P,cAAQkE,OAAQ,CAAR,CAAR;AACD;;AAED;AACA,QAAK,OAAOA,MAAP,KAAkB,QAAvB,EAAkC;AAChC,aAAOA,MAAP;AACD;;AAED;AACA,YAASA,OAAQ,CAAR,CAAT;AACE,WAAK,QAAL;AACEA,eAAQ,CAAR,IAAc,MAAMA,OAAQ,CAAR,EAAYT,KAAhC;AACA,eAAOS,OAAQ,CAAR,EAAYT,KAAnB;AACA;AACF,WAAK,YAAL;AACES,eAAQ,CAAR,IAAc,IAAd;AACA;AACF,WAAK,YAAL;AACEA,eAAQ,CAAR,IAAc,IAAd;AACA;AACF,WAAK,UAAL;AACEA,eAAQ,CAAR,IAAc,IAAd;AACA;AACF,WAAK,MAAL;AACEA,eAAQ,CAAR,IAAc,GAAd;AACA;AACF,WAAK,UAAL;AACEA,eAAQ,CAAR,IAAc,MAAd;AACA,YAAKlE,KAAL,EAAa,OAAOA,MAAMG,UAAb;AACb;AACF,WAAK,YAAL;AACE+D,eAAQ,CAAR,IAAc,KAAd;AACA/T,YAAI6P,QAAQ,CAAR,GAAY,CAAhB;AACA,YAAI2D,OAAO,CAAE,MAAF,CAAX;AACAA,aAAKxZ,IAAL,CAAU4Y,KAAV,CAAiBY,IAAjB,EAAuBO,OAAOrR,MAAP,CAAe1C,CAAf,EAAkB+T,OAAO5W,MAAP,GAAgB6C,CAAlC,CAAvB;AACA+T,eAAQ/T,CAAR,IAAcwT,IAAd;AACA;AACF,WAAK,YAAL;AACEO,eAAQ,CAAR,IAAc,MAAd;AACA;AACF,WAAK,KAAL;AACEA,eAAQ,CAAR,EAAYhc,GAAZ,GAAkBgc,OAAQ,CAAR,EAAY9F,IAA9B;AACA,eAAO8F,OAAQ,CAAR,EAAY9F,IAAnB;AACA;AACF,WAAK,WAAL;AACE8F,eAAQ,CAAR,IAAc,IAAd;AACF;AACA,WAAK,MAAL;AACEA,eAAQ,CAAR,IAAc,GAAd;AACA;AACF,WAAK,UAAL;AACEA,eAAQ,CAAR,IAAc,GAAd;;AAEA;AACA,YAAI6C,MAAM5G,WAAYH,MAAM+G,GAAlB,CAAV;;AAEA;AACA,YAAKA,GAAL,EAAW;AACT,iBAAO/G,MAAM+G,GAAb;;AAEA;AACA/G,gBAAM5B,IAAN,GAAa2I,IAAI3I,IAAjB;AACA,cAAK2I,IAAI1J,KAAT,EAAiB;AACf2C,kBAAM3C,KAAN,GAAc0J,IAAI1J,KAAlB;AACD;;AAED;AACA,iBAAO2C,MAAM+H,QAAb;AACD;AACD;AAZA,aAaK;AACH,mBAAO/H,MAAM+H,QAAb;AACD;AACD;AACF,WAAK,SAAL;AACE7D,eAAQ,CAAR,IAAc,KAAd;;AAEA;AACA,YAAI6C,MAAM5G,WAAYH,MAAM+G,GAAlB,CAAV;;AAEA;AACA,YAAKA,GAAL,EAAW;AACT,iBAAO/G,MAAM+G,GAAb;;AAEA;AACA/G,gBAAM9X,GAAN,GAAY6e,IAAI3I,IAAhB;AACA,cAAK2I,IAAI1J,KAAT,EAAiB;AACf2C,kBAAM3C,KAAN,GAAc0J,IAAI1J,KAAlB;AACD;;AAED;AACA,iBAAO2C,MAAM+H,QAAb;AACD;AACD;AAZA,aAaK;AACH,mBAAO/H,MAAM+H,QAAb;AACD;AACD;AAxFJ;;AA2FA;AACA5X,QAAI,CAAJ;;AAEA;AACA,QAAK6P,KAAL,EAAa;AACX;AACA,WAAM,IAAIuK,GAAV,IAAiBrG,OAAQ,CAAR,CAAjB,EAA+B;AAC3B/T,YAAI,CAAJ;AACA;AACH;AACD;AACA,UAAKA,MAAM,CAAX,EAAe;AACb+T,eAAOrR,MAAP,CAAe1C,CAAf,EAAkB,CAAlB;AACD;AACF;;AAED,WAAQA,IAAI+T,OAAO5W,MAAnB,EAA2B,EAAE6C,CAA7B,EAAiC;AAC/B+T,aAAQ/T,CAAR,IAAckQ,qBAAsB6D,OAAQ/T,CAAR,CAAtB,EAAmCgQ,UAAnC,EAA+CP,OAA/C,CAAd;AACD;;AAED,WAAOsE,MAAP;AACD;;AAGD;AACA,WAAS5D,gBAAT,CAA2B4D,MAA3B,EAAoC;AAClC;AACA,QAAI/T,IAAI8P,aAAciE,MAAd,IAAyB,CAAzB,GAA6B,CAArC;;AAEA,WAAQ/T,IAAI+T,OAAO5W,MAAnB,EAA4B;AAC1B;AACA,UAAK,OAAO4W,OAAQ/T,CAAR,CAAP,KAAuB,QAA5B,EAAuC;AACrC,YAAKA,IAAI,CAAJ,GAAQ+T,OAAO5W,MAAf,IAAyB,OAAO4W,OAAQ/T,IAAI,CAAZ,CAAP,KAA2B,QAAzD,EAAoE;AAClE;AACA+T,iBAAQ/T,CAAR,KAAe+T,OAAOrR,MAAP,CAAe1C,IAAI,CAAnB,EAAsB,CAAtB,EAA2B,CAA3B,CAAf;AACD,SAHD,MAIK;AACH,YAAEA,CAAF;AACD;AACF;AACD;AATA,WAUK;AACHmQ,2BAAkB4D,OAAQ/T,CAAR,CAAlB;AACA,YAAEA,CAAF;AACD;AACF;AACF;AAEA,CA7qDD,EA6qDM,YAAW;AACf,MAAK,KAAL,EAAsC;AACpC1E,WAAOsT,QAAP,GAAkB,EAAlB;AACA,WAAOtT,OAAOsT,QAAd;AACD,GAHD,MAIK;AACH,WAAOzD,OAAP;AACD;AACF,CARI,EA7qDL,E;;;;;;;;;;;ACPA,IAAI+Q,eAAe,mBAAApQ,CAAQ,EAAR,EAAkBoQ,YAArC;AAAA,IACIC,cAAc,mBAAArQ,CAAQ,EAAR,CADlB;;AAGA,SAASsQ,YAAT,CAAsBnU,IAAtB,EAA2B;AACvB,QAAG;AACC,eAAOgD,KAAKC,KAAL,CAAWjD,IAAX,CAAP;AACH,KAFD,CAEC,OAAMoU,KAAN,EAAY;AACT,eAAOA,KAAP;AACH;AACJ;;AAED,SAASC,OAAT,GAAkB;AACf,SAAKC,OAAL,CAAaC,KAAb;AACA,SAAKC,IAAL,CAAU,SAAV;AACF;;AAED,SAASC,IAAT,CAAcC,QAAd,EAAuB;AACnB,QAAIC,eAAJ;AAAA,QACIC,OAAO,IADX;;AAGA,QAAG,OAAOF,QAAP,KAAoB,QAAvB,EAAgC;AAC5BA,mBAAW;AACPvW,iBAAKuW;AADE,SAAX;AAGH;;AAED,QAAG,QAAOA,QAAP,yCAAOA,QAAP,OAAoB,QAAvB,EAAgC;AAC5BA,mBAAW,EAAX;AACH;;AAEDE,SAAKF,QAAL,GAAgBA,QAAhB;AACAE,SAAKN,OAAL,GAAe,IAAIxU,cAAJ,EAAf;AACA8U,SAAKF,QAAL,CAAcnP,MAAd,GAAuBqP,KAAKF,QAAL,CAAcnP,MAAd,IAAwB,KAA/C;;AAEA,QAAGqP,KAAKF,QAAL,CAAcG,IAAd,IAAsB,CAAC,iBAAD,IAAsBD,KAAKN,OAApD,EAA4D;AACxD,YAAI,OAAOQ,cAAP,KAA0B,WAA9B,EAA2C;AACvC;AACAF,iBAAKN,OAAL,GAAe,IAAIQ,cAAJ,EAAf;AACH,SAHD,MAGO;AACH;AACAF,iBAAKJ,IAAL,CAAU,OAAV,EAAmB,IAAIvN,KAAJ,CAAU,uCAAV,CAAnB;AACH;AACJ;;AAED,QAAG2N,KAAKF,QAAL,CAAcK,KAAd,KAAwB,KAA3B,EAAiC;AAC7BH,aAAKF,QAAL,CAAc1U,IAAd,GAAqB4U,KAAKF,QAAL,CAAc1U,IAAd,IAAsB,EAA3C;AACA4U,aAAKF,QAAL,CAAc1U,IAAd,CAAmBgV,CAAnB,GAAuB,IAAIpZ,IAAJ,GAAWC,OAAX,EAAvB;AACH;;AAED,QAAG+Y,KAAKF,QAAL,CAAcnP,MAAd,CAAqBqJ,WAArB,OAAuC,KAAvC,IAAgD,QAAOgG,KAAKF,QAAL,CAAc1U,IAArB,MAA8B,QAAjF,EAA0F;AACtF,YAAIiV,WAAWL,KAAKF,QAAL,CAAcvW,GAAd,CAAkBuP,KAAlB,CAAwB,GAAxB,CAAf;;AAEAiH,0BAAkBT,YAAYjR,KAAZ,CAAkBgS,SAAS,CAAT,CAAlB,CAAlB;;AAEA,aAAI,IAAI9C,GAAR,IAAeyC,KAAKF,QAAL,CAAc1U,IAA7B,EAAkC;AAC9B2U,4BAAgBxC,GAAhB,IAAuByC,KAAKF,QAAL,CAAc1U,IAAd,CAAmBmS,GAAnB,CAAvB;AACH;;AAED,YAAI+C,wBAAwBhB,YAAYiB,SAAZ,CAAsBR,eAAtB,CAA5B;;AAEAC,aAAKF,QAAL,CAAcvW,GAAd,GAAoB8W,SAAS,CAAT,KAAeC,wBAAwB,MAAMA,qBAA9B,GAAsD,EAArE,CAApB;AACAN,aAAKF,QAAL,CAAc1U,IAAd,GAAqB,IAArB;AACH;;AAED4U,SAAKN,OAAL,CAAazgB,gBAAb,CAA8B,UAA9B,EAA0C,UAAS6R,KAAT,EAAe;AACrDkP,aAAKJ,IAAL,CAAU,UAAV,EAAsB9O,KAAtB;AACH,KAFD,EAEG,KAFH;;AAIAkP,SAAKN,OAAL,CAAazgB,gBAAb,CAA8B,MAA9B,EAAsC,UAAS6R,KAAT,EAAe;AACjD,YAAI1F,OAAO0F,MAAMhB,MAAN,CAAa0Q,YAAxB;;AAEA,YAAGR,KAAKF,QAAL,CAAclP,QAAd,IAA0BoP,KAAKF,QAAL,CAAclP,QAAd,CAAuBoJ,WAAvB,OAAyC,MAAtE,EAA6E;AACzE,gBAAG5O,SAAS,EAAZ,EAAe;AACXA,uBAAO1K,SAAP;AACH,aAFD,MAEK;AACD0K,uBAAOmU,aAAanU,IAAb,CAAP;AACA,oBAAGA,gBAAgBiH,KAAnB,EAAyB;AACrB2N,yBAAKJ,IAAL,CAAU,OAAV,EAAmB9O,KAAnB,EAA0B1F,IAA1B;AACA;AACH;AACJ;AACJ;;AAED,YAAG0F,MAAMhB,MAAN,CAAa5J,MAAb,IAAuB,GAA1B,EAA8B;AAC1B8Z,iBAAKJ,IAAL,CAAU,OAAV,EAAmB9O,KAAnB,EAA0B1F,IAA1B;AACH,SAFD,MAEO;AACH4U,iBAAKJ,IAAL,CAAU,SAAV,EAAqB9O,KAArB,EAA4B1F,IAA5B;AACH;AAEJ,KArBD,EAqBG,KArBH;;AAuBA4U,SAAKN,OAAL,CAAazgB,gBAAb,CAA8B,OAA9B,EAAuC,UAAS6R,KAAT,EAAe;AAClDkP,aAAKJ,IAAL,CAAU,OAAV,EAAmB9O,KAAnB;AACH,KAFD,EAEG,KAFH;;AAIAkP,SAAKN,OAAL,CAAazgB,gBAAb,CAA8B,OAA9B,EAAuC,UAAS6R,KAAT,EAAe;AAClDkP,aAAKJ,IAAL,CAAU,OAAV,EAAmB9O,KAAnB,EAA0B,IAAIuB,KAAJ,CAAU,oBAAV,CAA1B;AACA2N,aAAKJ,IAAL,CAAU,OAAV,EAAmB9O,KAAnB;AACH,KAHD,EAGG,KAHH;;AAKAkP,SAAKN,OAAL,CAAazgB,gBAAb,CAA8B,SAA9B,EAAyC,UAAS6R,KAAT,EAAe;AACpDhE,qBAAakT,KAAKS,eAAlB;AACAT,aAAKJ,IAAL,CAAU,UAAV,EAAsB9O,KAAtB;AACH,KAHD,EAGG,KAHH;;AAKAkP,SAAKN,OAAL,CAAa7U,IAAb,CAAkBmV,KAAKF,QAAL,CAAcnP,MAAd,IAAwB,KAA1C,EAAiDqP,KAAKF,QAAL,CAAcvW,GAA/D,EAAoE,IAApE;;AAEA,QAAGyW,KAAKF,QAAL,CAAcG,IAAd,IAAsB,qBAAqBD,KAAKN,OAAnD,EAA4D;AACxDM,aAAKN,OAAL,CAAagB,eAAb,GAA+B,CAAC,CAACZ,SAASY,eAA1C;AACH;;AAED;AACA,QAAGV,KAAKF,QAAL,CAAca,WAAd,KAA8B,KAAjC,EAAuC;AACnCX,aAAKN,OAAL,CAAakB,gBAAb,CAA8B,cAA9B,EAA8CZ,KAAKF,QAAL,CAAca,WAAd,IAA6B,iCAA3E;AACH;AACD,QAAGX,KAAKF,QAAL,CAAce,aAAd,KAAgC,KAAnC,EAA0C;AACtCb,aAAKN,OAAL,CAAakB,gBAAb,CAA8B,kBAA9B,EAAkDZ,KAAKF,QAAL,CAAce,aAAd,IAA+B,gBAAjF;AACH;AACD,QAAGb,KAAKF,QAAL,CAAcgB,IAAjB,EAAsB;AAClBd,aAAKN,OAAL,CAAakB,gBAAb,CAA8B,eAA9B,EAA+CZ,KAAKF,QAAL,CAAcgB,IAA7D;AACH;;AAED;AACA,SAAI,IAAIC,SAAR,IAAqBf,KAAKF,QAAL,CAAckB,OAAnC,EAA2C;AACvChB,aAAKN,OAAL,CAAakB,gBAAb,CAA8BG,SAA9B,EAAyCf,KAAKF,QAAL,CAAckB,OAAd,CAAsBD,SAAtB,CAAzC;AACH;;AAED,QAAGf,KAAKF,QAAL,CAAcmB,WAAd,KAA8B,KAA9B,IAAuCjB,KAAKF,QAAL,CAAclP,QAAd,KAA2B,MAArE,EAA4E;AACxEoP,aAAKF,QAAL,CAAc1U,IAAd,GAAqBgD,KAAKmS,SAAL,CAAeP,KAAKF,QAAL,CAAc1U,IAA7B,CAArB;AACH;AACJ;;AAEDyU,KAAK5d,SAAL,GAAiBrE,OAAOsjB,MAAP,CAAc7B,aAAapd,SAA3B,CAAjB;;AAEA4d,KAAK5d,SAAL,CAAe0J,IAAf,GAAsB,YAAU;AAC5B,QAAIqU,OAAO,IAAX;;AAEAA,SAAKS,eAAL,GAAuBjY,WACnB,YAAU;AACNiX,gBAAQ1J,KAAR,CAAciK,IAAd,EAAoB,EAApB;AACH,KAHkB,EAInBA,KAAKF,QAAL,CAAcL,OAAd,IAAyB,MAJN,CAAvB;;AAOAO,SAAKN,OAAL,CAAa/T,IAAb,CAAkBqU,KAAKF,QAAL,CAAc1U,IAAd,IAAsB4U,KAAKF,QAAL,CAAc1U,IAAtD;AACH,CAXD;;AAaA+V,OAAO7S,OAAP,GAAiBuR,IAAjB,C;;;;;;;;;ACnJA;;;;;;;AAOA,CAAC,YAAY;AACZ;;AACA,KAAIP,cAAc,EAAlB;;AAEAA,aAAYjR,KAAZ,GAAoB,UAAUiG,GAAV,EAAe;AAClC,MAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAC5B,UAAO,EAAP;AACA;;AAEDA,QAAMA,IAAI+J,IAAJ,GAAWrV,OAAX,CAAmB,SAAnB,EAA8B,EAA9B,CAAN;;AAEA,MAAI,CAACsL,GAAL,EAAU;AACT,UAAO,EAAP;AACA;;AAED,SAAOA,IAAI+J,IAAJ,GAAWvF,KAAX,CAAiB,GAAjB,EAAsBsI,MAAtB,CAA6B,UAAUxK,GAAV,EAAeyK,KAAf,EAAsB;AACzD,OAAInE,QAAQmE,MAAMrY,OAAN,CAAc,KAAd,EAAqB,GAArB,EAA0B8P,KAA1B,CAAgC,GAAhC,CAAZ;AACA,OAAIyE,MAAML,MAAM,CAAN,CAAV;AACA,OAAIoE,MAAMpE,MAAM,CAAN,CAAV;;AAEAK,SAAMgE,mBAAmBhE,GAAnB,CAAN;AACA;AACA;AACA+D,SAAMA,QAAQ5gB,SAAR,GAAoB,IAApB,GAA2B6gB,mBAAmBD,GAAnB,CAAjC;;AAEA,OAAI,CAAC1K,IAAIkI,cAAJ,CAAmBvB,GAAnB,CAAL,EAA8B;AAC7B3G,QAAI2G,GAAJ,IAAW+D,GAAX;AACA,IAFD,MAEO,IAAInhB,MAAMoV,OAAN,CAAcqB,IAAI2G,GAAJ,CAAd,CAAJ,EAA6B;AACnC3G,QAAI2G,GAAJ,EAASpgB,IAAT,CAAcmkB,GAAd;AACA,IAFM,MAEA;AACN1K,QAAI2G,GAAJ,IAAW,CAAC3G,IAAI2G,GAAJ,CAAD,EAAW+D,GAAX,CAAX;AACA;;AAED,UAAO1K,GAAP;AACA,GAnBM,EAmBJ,EAnBI,CAAP;AAoBA,EA/BD;;AAiCA0I,aAAYiB,SAAZ,GAAwB,UAAUziB,GAAV,EAAe;AACtC,SAAOA,MAAMF,OAAO4jB,IAAP,CAAY1jB,GAAZ,EAAiB2jB,GAAjB,CAAqB,UAAUlE,GAAV,EAAe;AAChD,OAAI+D,MAAMxjB,IAAIyf,GAAJ,CAAV;;AAEA,OAAIpd,MAAMoV,OAAN,CAAc+L,GAAd,CAAJ,EAAwB;AACvB,WAAOA,IAAIG,GAAJ,CAAQ,UAAUC,IAAV,EAAgB;AAC9B,YAAOC,mBAAmBpE,GAAnB,IAA0B,GAA1B,GAAgCoE,mBAAmBD,IAAnB,CAAvC;AACA,KAFM,EAEJ1K,IAFI,CAEC,GAFD,CAAP;AAGA;;AAED,UAAO2K,mBAAmBpE,GAAnB,IAA0B,GAA1B,GAAgCoE,mBAAmBL,GAAnB,CAAvC;AACA,GAVY,EAUVtK,IAVU,CAUL,GAVK,CAAN,GAUQ,EAVf;AAWA,EAZD;;AAcA,KAAI,IAAJ,EAAgD;AAC/C4K,EAAA,kCAAO,YAAW;AAAE,UAAOtC,WAAP;AAAqB,GAAzC;AACA,EAFD,MAEO,IAAI,OAAO6B,MAAP,KAAkB,WAAlB,IAAiCA,OAAO7S,OAA5C,EAAqD;AAC3D6S,SAAO7S,OAAP,GAAiBgR,WAAjB;AACA,EAFM,MAEA;AACNuC,OAAKvC,WAAL,GAAmBA,WAAnB;AACA;AACD,CA1DD,I;;;;;;;;;;;ACPA,IAAI3e,CAAJ;;AAEA;AACAA,IAAK,YAAW;AAAE,QAAO,IAAP;AAAc,CAA5B,EAAJ;;AAEA,IAAI;AACH;AACAA,KAAIA,KAAKmhB,SAAS,aAAT,GAAL,IAAkC,CAAC,GAAEC,IAAH,EAAS,MAAT,CAAtC;AACA,CAHD,CAGE,OAAM5Z,CAAN,EAAS;AACV;AACA,KAAG,QAAO1J,MAAP,yCAAOA,MAAP,OAAkB,QAArB,EACCkC,IAAIlC,MAAJ;AACD;;AAED;AACA;AACA;;AAEA0iB,OAAO7S,OAAP,GAAiB3N,CAAjB,C;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS0e,YAAT,GAAwB;AACtB,OAAK2C,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AACA,OAAKC,aAAL,GAAqB,KAAKA,aAAL,IAAsBvhB,SAA3C;AACD;AACDygB,OAAO7S,OAAP,GAAiB+Q,YAAjB;;AAEA;AACAA,aAAaA,YAAb,GAA4BA,YAA5B;;AAEAA,aAAapd,SAAb,CAAuB+f,OAAvB,GAAiCthB,SAAjC;AACA2e,aAAapd,SAAb,CAAuBggB,aAAvB,GAAuCvhB,SAAvC;;AAEA;AACA;AACA2e,aAAa6C,mBAAb,GAAmC,EAAnC;;AAEA;AACA;AACA7C,aAAapd,SAAb,CAAuBkgB,eAAvB,GAAyC,UAAS5N,CAAT,EAAY;AACnD,MAAI,CAAC6N,SAAS7N,CAAT,CAAD,IAAgBA,IAAI,CAApB,IAAyB8N,MAAM9N,CAAN,CAA7B,EACE,MAAM+N,UAAU,6BAAV,CAAN;AACF,OAAKL,aAAL,GAAqB1N,CAArB;AACA,SAAO,IAAP;AACD,CALD;;AAOA8K,aAAapd,SAAb,CAAuB2d,IAAvB,GAA8B,UAAShlB,IAAT,EAAe;AAC3C,MAAI2nB,EAAJ,EAAQC,OAAR,EAAiBlH,GAAjB,EAAsBtF,IAAtB,EAA4B7S,CAA5B,EAA+Bsf,SAA/B;;AAEA,MAAI,CAAC,KAAKT,OAAV,EACE,KAAKA,OAAL,GAAe,EAAf;;AAEF;AACA,MAAIpnB,SAAS,OAAb,EAAsB;AACpB,QAAI,CAAC,KAAKonB,OAAL,CAAaxC,KAAd,IACCkD,SAAS,KAAKV,OAAL,CAAaxC,KAAtB,KAAgC,CAAC,KAAKwC,OAAL,CAAaxC,KAAb,CAAmBlf,MADzD,EACkE;AAChEiiB,WAAKpO,UAAU,CAAV,CAAL;AACA,UAAIoO,cAAclQ,KAAlB,EAAyB;AACvB,cAAMkQ,EAAN,CADuB,CACb;AACX,OAFD,MAEO;AACL;AACA,YAAIrT,MAAM,IAAImD,KAAJ,CAAU,2CAA2CkQ,EAA3C,GAAgD,GAA1D,CAAV;AACArT,YAAIyT,OAAJ,GAAcJ,EAAd;AACA,cAAMrT,GAAN;AACD;AACF;AACF;;AAEDsT,YAAU,KAAKR,OAAL,CAAapnB,IAAb,CAAV;;AAEA,MAAIgoB,YAAYJ,OAAZ,CAAJ,EACE,OAAO,KAAP;;AAEF,MAAIK,WAAWL,OAAX,CAAJ,EAAyB;AACvB,YAAQrO,UAAU7T,MAAlB;AACE;AACA,WAAK,CAAL;AACEkiB,gBAAQnN,IAAR,CAAa,IAAb;AACA;AACF,WAAK,CAAL;AACEmN,gBAAQnN,IAAR,CAAa,IAAb,EAAmBlB,UAAU,CAAV,CAAnB;AACA;AACF,WAAK,CAAL;AACEqO,gBAAQnN,IAAR,CAAa,IAAb,EAAmBlB,UAAU,CAAV,CAAnB,EAAiCA,UAAU,CAAV,CAAjC;AACA;AACF;AACA;AACE6B,eAAO7V,MAAM8B,SAAN,CAAgBgU,KAAhB,CAAsBZ,IAAtB,CAA2BlB,SAA3B,EAAsC,CAAtC,CAAP;AACAqO,gBAAQzM,KAAR,CAAc,IAAd,EAAoBC,IAApB;AAdJ;AAgBD,GAjBD,MAiBO,IAAI0M,SAASF,OAAT,CAAJ,EAAuB;AAC5BxM,WAAO7V,MAAM8B,SAAN,CAAgBgU,KAAhB,CAAsBZ,IAAtB,CAA2BlB,SAA3B,EAAsC,CAAtC,CAAP;AACAsO,gBAAYD,QAAQvM,KAAR,EAAZ;AACAqF,UAAMmH,UAAUniB,MAAhB;AACA,SAAK6C,IAAI,CAAT,EAAYA,IAAImY,GAAhB,EAAqBnY,GAArB;AACEsf,gBAAUtf,CAAV,EAAa4S,KAAb,CAAmB,IAAnB,EAAyBC,IAAzB;AADF;AAED;;AAED,SAAO,IAAP;AACD,CArDD;;AAuDAqJ,aAAapd,SAAb,CAAuB6gB,WAAvB,GAAqC,UAASloB,IAAT,EAAemoB,QAAf,EAAyB;AAC5D,MAAI9Z,CAAJ;;AAEA,MAAI,CAAC4Z,WAAWE,QAAX,CAAL,EACE,MAAMT,UAAU,6BAAV,CAAN;;AAEF,MAAI,CAAC,KAAKN,OAAV,EACE,KAAKA,OAAL,GAAe,EAAf;;AAEF;AACA;AACA,MAAI,KAAKA,OAAL,CAAagB,WAAjB,EACE,KAAKpD,IAAL,CAAU,aAAV,EAAyBhlB,IAAzB,EACUioB,WAAWE,SAASA,QAApB,IACAA,SAASA,QADT,GACoBA,QAF9B;;AAIF,MAAI,CAAC,KAAKf,OAAL,CAAapnB,IAAb,CAAL;AACE;AACA,SAAKonB,OAAL,CAAapnB,IAAb,IAAqBmoB,QAArB,CAFF,KAGK,IAAIL,SAAS,KAAKV,OAAL,CAAapnB,IAAb,CAAT,CAAJ;AACH;AACA,SAAKonB,OAAL,CAAapnB,IAAb,EAAmBuC,IAAnB,CAAwB4lB,QAAxB,EAFG;AAIH;AACA,SAAKf,OAAL,CAAapnB,IAAb,IAAqB,CAAC,KAAKonB,OAAL,CAAapnB,IAAb,CAAD,EAAqBmoB,QAArB,CAArB;;AAEF;AACA,MAAIL,SAAS,KAAKV,OAAL,CAAapnB,IAAb,CAAT,KAAgC,CAAC,KAAKonB,OAAL,CAAapnB,IAAb,EAAmBqoB,MAAxD,EAAgE;AAC9D,QAAI,CAACL,YAAY,KAAKX,aAAjB,CAAL,EAAsC;AACpChZ,UAAI,KAAKgZ,aAAT;AACD,KAFD,MAEO;AACLhZ,UAAIoW,aAAa6C,mBAAjB;AACD;;AAED,QAAIjZ,KAAKA,IAAI,CAAT,IAAc,KAAK+Y,OAAL,CAAapnB,IAAb,EAAmB0F,MAAnB,GAA4B2I,CAA9C,EAAiD;AAC/C,WAAK+Y,OAAL,CAAapnB,IAAb,EAAmBqoB,MAAnB,GAA4B,IAA5B;AACAxX,cAAQ+T,KAAR,CAAc,kDACA,qCADA,GAEA,kDAFd,EAGc,KAAKwC,OAAL,CAAapnB,IAAb,EAAmB0F,MAHjC;AAIA,UAAI,OAAOmL,QAAQyX,KAAf,KAAyB,UAA7B,EAAyC;AACvC;AACAzX,gBAAQyX,KAAR;AACD;AACF;AACF;;AAED,SAAO,IAAP;AACD,CAhDD;;AAkDA7D,aAAapd,SAAb,CAAuB4O,EAAvB,GAA4BwO,aAAapd,SAAb,CAAuB6gB,WAAnD;;AAEAzD,aAAapd,SAAb,CAAuBkhB,IAAvB,GAA8B,UAASvoB,IAAT,EAAemoB,QAAf,EAAyB;AACrD,MAAI,CAACF,WAAWE,QAAX,CAAL,EACE,MAAMT,UAAU,6BAAV,CAAN;;AAEF,MAAIc,QAAQ,KAAZ;;AAEA,WAASziB,CAAT,GAAa;AACX,SAAK0iB,cAAL,CAAoBzoB,IAApB,EAA0B+F,CAA1B;;AAEA,QAAI,CAACyiB,KAAL,EAAY;AACVA,cAAQ,IAAR;AACAL,eAAShN,KAAT,CAAe,IAAf,EAAqB5B,SAArB;AACD;AACF;;AAEDxT,IAAEoiB,QAAF,GAAaA,QAAb;AACA,OAAKlS,EAAL,CAAQjW,IAAR,EAAc+F,CAAd;;AAEA,SAAO,IAAP;AACD,CAnBD;;AAqBA;AACA0e,aAAapd,SAAb,CAAuBohB,cAAvB,GAAwC,UAASzoB,IAAT,EAAemoB,QAAf,EAAyB;AAC/D,MAAIxK,IAAJ,EAAU5Y,QAAV,EAAoBW,MAApB,EAA4B6C,CAA5B;;AAEA,MAAI,CAAC0f,WAAWE,QAAX,CAAL,EACE,MAAMT,UAAU,6BAAV,CAAN;;AAEF,MAAI,CAAC,KAAKN,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAapnB,IAAb,CAAtB,EACE,OAAO,IAAP;;AAEF2d,SAAO,KAAKyJ,OAAL,CAAapnB,IAAb,CAAP;AACA0F,WAASiY,KAAKjY,MAAd;AACAX,aAAW,CAAC,CAAZ;;AAEA,MAAI4Y,SAASwK,QAAT,IACCF,WAAWtK,KAAKwK,QAAhB,KAA6BxK,KAAKwK,QAAL,KAAkBA,QADpD,EAC+D;AAC7D,WAAO,KAAKf,OAAL,CAAapnB,IAAb,CAAP;AACA,QAAI,KAAKonB,OAAL,CAAaqB,cAAjB,EACE,KAAKzD,IAAL,CAAU,gBAAV,EAA4BhlB,IAA5B,EAAkCmoB,QAAlC;AAEH,GAND,MAMO,IAAIL,SAASnK,IAAT,CAAJ,EAAoB;AACzB,SAAKpV,IAAI7C,MAAT,EAAiB6C,MAAM,CAAvB,GAA2B;AACzB,UAAIoV,KAAKpV,CAAL,MAAY4f,QAAZ,IACCxK,KAAKpV,CAAL,EAAQ4f,QAAR,IAAoBxK,KAAKpV,CAAL,EAAQ4f,QAAR,KAAqBA,QAD9C,EACyD;AACvDpjB,mBAAWwD,CAAX;AACA;AACD;AACF;;AAED,QAAIxD,WAAW,CAAf,EACE,OAAO,IAAP;;AAEF,QAAI4Y,KAAKjY,MAAL,KAAgB,CAApB,EAAuB;AACrBiY,WAAKjY,MAAL,GAAc,CAAd;AACA,aAAO,KAAK0hB,OAAL,CAAapnB,IAAb,CAAP;AACD,KAHD,MAGO;AACL2d,WAAK1S,MAAL,CAAYlG,QAAZ,EAAsB,CAAtB;AACD;;AAED,QAAI,KAAKqiB,OAAL,CAAaqB,cAAjB,EACE,KAAKzD,IAAL,CAAU,gBAAV,EAA4BhlB,IAA5B,EAAkCmoB,QAAlC;AACH;;AAED,SAAO,IAAP;AACD,CA3CD;;AA6CA1D,aAAapd,SAAb,CAAuBqhB,kBAAvB,GAA4C,UAAS1oB,IAAT,EAAe;AACzD,MAAI2iB,GAAJ,EAASkF,SAAT;;AAEA,MAAI,CAAC,KAAKT,OAAV,EACE,OAAO,IAAP;;AAEF;AACA,MAAI,CAAC,KAAKA,OAAL,CAAaqB,cAAlB,EAAkC;AAChC,QAAIlP,UAAU7T,MAAV,KAAqB,CAAzB,EACE,KAAK0hB,OAAL,GAAe,EAAf,CADF,KAEK,IAAI,KAAKA,OAAL,CAAapnB,IAAb,CAAJ,EACH,OAAO,KAAKonB,OAAL,CAAapnB,IAAb,CAAP;AACF,WAAO,IAAP;AACD;;AAED;AACA,MAAIuZ,UAAU7T,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,SAAKid,GAAL,IAAY,KAAKyE,OAAjB,EAA0B;AACxB,UAAIzE,QAAQ,gBAAZ,EAA8B;AAC9B,WAAK+F,kBAAL,CAAwB/F,GAAxB;AACD;AACD,SAAK+F,kBAAL,CAAwB,gBAAxB;AACA,SAAKtB,OAAL,GAAe,EAAf;AACA,WAAO,IAAP;AACD;;AAEDS,cAAY,KAAKT,OAAL,CAAapnB,IAAb,CAAZ;;AAEA,MAAIioB,WAAWJ,SAAX,CAAJ,EAA2B;AACzB,SAAKY,cAAL,CAAoBzoB,IAApB,EAA0B6nB,SAA1B;AACD,GAFD,MAEO,IAAIA,SAAJ,EAAe;AACpB;AACA,WAAOA,UAAUniB,MAAjB;AACE,WAAK+iB,cAAL,CAAoBzoB,IAApB,EAA0B6nB,UAAUA,UAAUniB,MAAV,GAAmB,CAA7B,CAA1B;AADF;AAED;AACD,SAAO,KAAK0hB,OAAL,CAAapnB,IAAb,CAAP;;AAEA,SAAO,IAAP;AACD,CAtCD;;AAwCAykB,aAAapd,SAAb,CAAuBwgB,SAAvB,GAAmC,UAAS7nB,IAAT,EAAe;AAChD,MAAIgc,GAAJ;AACA,MAAI,CAAC,KAAKoL,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAapnB,IAAb,CAAtB,EACEgc,MAAM,EAAN,CADF,KAEK,IAAIiM,WAAW,KAAKb,OAAL,CAAapnB,IAAb,CAAX,CAAJ,EACHgc,MAAM,CAAC,KAAKoL,OAAL,CAAapnB,IAAb,CAAD,CAAN,CADG,KAGHgc,MAAM,KAAKoL,OAAL,CAAapnB,IAAb,EAAmBqb,KAAnB,EAAN;AACF,SAAOW,GAAP;AACD,CATD;;AAWAyI,aAAapd,SAAb,CAAuBshB,aAAvB,GAAuC,UAAS3oB,IAAT,EAAe;AACpD,MAAI,KAAKonB,OAAT,EAAkB;AAChB,QAAIwB,aAAa,KAAKxB,OAAL,CAAapnB,IAAb,CAAjB;;AAEA,QAAIioB,WAAWW,UAAX,CAAJ,EACE,OAAO,CAAP,CADF,KAEK,IAAIA,UAAJ,EACH,OAAOA,WAAWljB,MAAlB;AACH;AACD,SAAO,CAAP;AACD,CAVD;;AAYA+e,aAAakE,aAAb,GAA6B,UAASE,OAAT,EAAkB7oB,IAAlB,EAAwB;AACnD,SAAO6oB,QAAQF,aAAR,CAAsB3oB,IAAtB,CAAP;AACD,CAFD;;AAIA,SAASioB,UAAT,CAAoBa,GAApB,EAAyB;AACvB,SAAO,OAAOA,GAAP,KAAe,UAAtB;AACD;;AAED,SAAStB,QAAT,CAAkBsB,GAAlB,EAAuB;AACrB,SAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AAED,SAAShB,QAAT,CAAkBgB,GAAlB,EAAuB;AACrB,SAAO,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAf,IAA2BA,QAAQ,IAA1C;AACD;;AAED,SAASd,WAAT,CAAqBc,GAArB,EAA0B;AACxB,SAAOA,QAAQ,KAAK,CAApB;AACD,C;;;;;;;;;AC7SD;AACA,IAAItd,UAAU+a,OAAO7S,OAAP,GAAiB,EAA/B;;AAEA;AACA;AACA;AACA;;AAEA,IAAIqV,gBAAJ;AACA,IAAIC,kBAAJ;;AAEA,SAASC,gBAAT,GAA4B;AACxB,UAAM,IAAIxR,KAAJ,CAAU,iCAAV,CAAN;AACH;AACD,SAASyR,mBAAT,GAAgC;AAC5B,UAAM,IAAIzR,KAAJ,CAAU,mCAAV,CAAN;AACH;AACA,aAAY;AACT,QAAI;AACA,YAAI,OAAO7J,UAAP,KAAsB,UAA1B,EAAsC;AAClCmb,+BAAmBnb,UAAnB;AACH,SAFD,MAEO;AACHmb,+BAAmBE,gBAAnB;AACH;AACJ,KAND,CAME,OAAO1b,CAAP,EAAU;AACRwb,2BAAmBE,gBAAnB;AACH;AACD,QAAI;AACA,YAAI,OAAO/W,YAAP,KAAwB,UAA5B,EAAwC;AACpC8W,iCAAqB9W,YAArB;AACH,SAFD,MAEO;AACH8W,iCAAqBE,mBAArB;AACH;AACJ,KAND,CAME,OAAO3b,CAAP,EAAU;AACRyb,6BAAqBE,mBAArB;AACH;AACJ,CAnBA,GAAD;AAoBA,SAASC,UAAT,CAAoBC,GAApB,EAAyB;AACrB,QAAIL,qBAAqBnb,UAAzB,EAAqC;AACjC;AACA,eAAOA,WAAWwb,GAAX,EAAgB,CAAhB,CAAP;AACH;AACD;AACA,QAAI,CAACL,qBAAqBE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgEnb,UAApE,EAAgF;AAC5Emb,2BAAmBnb,UAAnB;AACA,eAAOA,WAAWwb,GAAX,EAAgB,CAAhB,CAAP;AACH;AACD,QAAI;AACA;AACA,eAAOL,iBAAiBK,GAAjB,EAAsB,CAAtB,CAAP;AACH,KAHD,CAGE,OAAM7b,CAAN,EAAQ;AACN,YAAI;AACA;AACA,mBAAOwb,iBAAiBtO,IAAjB,CAAsB,IAAtB,EAA4B2O,GAA5B,EAAiC,CAAjC,CAAP;AACH,SAHD,CAGE,OAAM7b,CAAN,EAAQ;AACN;AACA,mBAAOwb,iBAAiBtO,IAAjB,CAAsB,IAAtB,EAA4B2O,GAA5B,EAAiC,CAAjC,CAAP;AACH;AACJ;AAGJ;AACD,SAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,QAAIN,uBAAuB9W,YAA3B,EAAyC;AACrC;AACA,eAAOA,aAAaoX,MAAb,CAAP;AACH;AACD;AACA,QAAI,CAACN,uBAAuBE,mBAAvB,IAA8C,CAACF,kBAAhD,KAAuE9W,YAA3E,EAAyF;AACrF8W,6BAAqB9W,YAArB;AACA,eAAOA,aAAaoX,MAAb,CAAP;AACH;AACD,QAAI;AACA;AACA,eAAON,mBAAmBM,MAAnB,CAAP;AACH,KAHD,CAGE,OAAO/b,CAAP,EAAS;AACP,YAAI;AACA;AACA,mBAAOyb,mBAAmBvO,IAAnB,CAAwB,IAAxB,EAA8B6O,MAA9B,CAAP;AACH,SAHD,CAGE,OAAO/b,CAAP,EAAS;AACP;AACA;AACA,mBAAOyb,mBAAmBvO,IAAnB,CAAwB,IAAxB,EAA8B6O,MAA9B,CAAP;AACH;AACJ;AAIJ;AACD,IAAIC,QAAQ,EAAZ;AACA,IAAIC,WAAW,KAAf;AACA,IAAIC,YAAJ;AACA,IAAIC,aAAa,CAAC,CAAlB;;AAEA,SAASC,eAAT,GAA2B;AACvB,QAAI,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;AAC5B;AACH;AACDD,eAAW,KAAX;AACA,QAAIC,aAAa/jB,MAAjB,EAAyB;AACrB6jB,gBAAQE,aAAarM,MAAb,CAAoBmM,KAApB,CAAR;AACH,KAFD,MAEO;AACHG,qBAAa,CAAC,CAAd;AACH;AACD,QAAIH,MAAM7jB,MAAV,EAAkB;AACdkkB;AACH;AACJ;;AAED,SAASA,UAAT,GAAsB;AAClB,QAAIJ,QAAJ,EAAc;AACV;AACH;AACD,QAAI3E,UAAUsE,WAAWQ,eAAX,CAAd;AACAH,eAAW,IAAX;;AAEA,QAAI9I,MAAM6I,MAAM7jB,MAAhB;AACA,WAAMgb,GAAN,EAAW;AACP+I,uBAAeF,KAAf;AACAA,gBAAQ,EAAR;AACA,eAAO,EAAEG,UAAF,GAAehJ,GAAtB,EAA2B;AACvB,gBAAI+I,YAAJ,EAAkB;AACdA,6BAAaC,UAAb,EAAyBG,GAAzB;AACH;AACJ;AACDH,qBAAa,CAAC,CAAd;AACAhJ,cAAM6I,MAAM7jB,MAAZ;AACH;AACD+jB,mBAAe,IAAf;AACAD,eAAW,KAAX;AACAH,oBAAgBxE,OAAhB;AACH;;AAEDrZ,QAAQse,QAAR,GAAmB,UAAUV,GAAV,EAAe;AAC9B,QAAIhO,OAAO,IAAI7V,KAAJ,CAAUgU,UAAU7T,MAAV,GAAmB,CAA7B,CAAX;AACA,QAAI6T,UAAU7T,MAAV,GAAmB,CAAvB,EAA0B;AACtB,aAAK,IAAI6C,IAAI,CAAb,EAAgBA,IAAIgR,UAAU7T,MAA9B,EAAsC6C,GAAtC,EAA2C;AACvC6S,iBAAK7S,IAAI,CAAT,IAAcgR,UAAUhR,CAAV,CAAd;AACH;AACJ;AACDghB,UAAMhnB,IAAN,CAAW,IAAIwnB,IAAJ,CAASX,GAAT,EAAchO,IAAd,CAAX;AACA,QAAImO,MAAM7jB,MAAN,KAAiB,CAAjB,IAAsB,CAAC8jB,QAA3B,EAAqC;AACjCL,mBAAWS,UAAX;AACH;AACJ,CAXD;;AAaA;AACA,SAASG,IAAT,CAAcX,GAAd,EAAmB1nB,KAAnB,EAA0B;AACtB,SAAK0nB,GAAL,GAAWA,GAAX;AACA,SAAK1nB,KAAL,GAAaA,KAAb;AACH;AACDqoB,KAAK1iB,SAAL,CAAewiB,GAAf,GAAqB,YAAY;AAC7B,SAAKT,GAAL,CAASjO,KAAT,CAAe,IAAf,EAAqB,KAAKzZ,KAA1B;AACH,CAFD;AAGA8J,QAAQiK,KAAR,GAAgB,SAAhB;AACAjK,QAAQwe,OAAR,GAAkB,IAAlB;AACAxe,QAAQye,GAAR,GAAc,EAAd;AACAze,QAAQ0e,IAAR,GAAe,EAAf;AACA1e,QAAQ2e,OAAR,GAAkB,EAAlB,C,CAAsB;AACtB3e,QAAQ4e,QAAR,GAAmB,EAAnB;;AAEA,SAASC,IAAT,GAAgB,CAAE;;AAElB7e,QAAQyK,EAAR,GAAaoU,IAAb;AACA7e,QAAQ0c,WAAR,GAAsBmC,IAAtB;AACA7e,QAAQ+c,IAAR,GAAe8B,IAAf;AACA7e,QAAQ8e,GAAR,GAAcD,IAAd;AACA7e,QAAQid,cAAR,GAAyB4B,IAAzB;AACA7e,QAAQkd,kBAAR,GAA6B2B,IAA7B;AACA7e,QAAQwZ,IAAR,GAAeqF,IAAf;;AAEA7e,QAAQ+e,OAAR,GAAkB,UAAU7T,IAAV,EAAgB;AAC9B,UAAM,IAAIe,KAAJ,CAAU,kCAAV,CAAN;AACH,CAFD;;AAIAjM,QAAQgf,GAAR,GAAc,YAAY;AAAE,WAAO,GAAP;AAAY,CAAxC;AACAhf,QAAQif,KAAR,GAAgB,UAAUC,GAAV,EAAe;AAC3B,UAAM,IAAIjT,KAAJ,CAAU,gCAAV,CAAN;AACH,CAFD;AAGAjM,QAAQmf,KAAR,GAAgB,YAAW;AAAE,WAAO,CAAP;AAAW,CAAxC,C;;;;;;;;;ACnLA,IAAI,OAAO3nB,OAAOsjB,MAAd,KAAyB,UAA7B,EAAyC;AACvC;AACAC,SAAO7S,OAAP,GAAiB,SAASkX,QAAT,CAAkBC,IAAlB,EAAwBC,SAAxB,EAAmC;AAClDD,SAAKE,MAAL,GAAcD,SAAd;AACAD,SAAKxjB,SAAL,GAAiBrE,OAAOsjB,MAAP,CAAcwE,UAAUzjB,SAAxB,EAAmC;AAClDkK,mBAAa;AACX7R,eAAOmrB,IADI;AAEXG,oBAAY,KAFD;AAGXC,kBAAU,IAHC;AAIXC,sBAAc;AAJH;AADqC,KAAnC,CAAjB;AAQD,GAVD;AAWD,CAbD,MAaO;AACL;AACA3E,SAAO7S,OAAP,GAAiB,SAASkX,QAAT,CAAkBC,IAAlB,EAAwBC,SAAxB,EAAmC;AAClDD,SAAKE,MAAL,GAAcD,SAAd;AACA,QAAIK,WAAW,SAAXA,QAAW,GAAY,CAAE,CAA7B;AACAA,aAAS9jB,SAAT,GAAqByjB,UAAUzjB,SAA/B;AACAwjB,SAAKxjB,SAAL,GAAiB,IAAI8jB,QAAJ,EAAjB;AACAN,SAAKxjB,SAAL,CAAekK,WAAf,GAA6BsZ,IAA7B;AACD,GAND;AAOD,C;;;;;;;;;;;ACtBDtE,OAAO7S,OAAP,GAAiB,SAAS0X,QAAT,CAAkBtC,GAAlB,EAAuB;AACtC,SAAOA,OAAO,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAtB,IACF,OAAOA,IAAIuC,IAAX,KAAoB,UADlB,IAEF,OAAOvC,IAAIxgB,IAAX,KAAoB,UAFlB,IAGF,OAAOwgB,IAAIwC,SAAX,KAAyB,UAH9B;AAID,CALD,C;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,eAAe,UAAnB;AACA7X,QAAQ8X,MAAR,GAAiB,UAASxe,CAAT,EAAY;AAC3B,MAAI,CAACye,SAASze,CAAT,CAAL,EAAkB;AAChB,QAAI0e,UAAU,EAAd;AACA,SAAK,IAAInjB,IAAI,CAAb,EAAgBA,IAAIgR,UAAU7T,MAA9B,EAAsC6C,GAAtC,EAA2C;AACzCmjB,cAAQnpB,IAAR,CAAa2W,QAAQK,UAAUhR,CAAV,CAAR,CAAb;AACD;AACD,WAAOmjB,QAAQtP,IAAR,CAAa,GAAb,CAAP;AACD;;AAED,MAAI7T,IAAI,CAAR;AACA,MAAI6S,OAAO7B,SAAX;AACA,MAAImH,MAAMtF,KAAK1V,MAAf;AACA,MAAIgU,MAAMhC,OAAO1K,CAAP,EAAUoB,OAAV,CAAkBmd,YAAlB,EAAgC,UAASnmB,CAAT,EAAY;AACpD,QAAIA,MAAM,IAAV,EAAgB,OAAO,GAAP;AAChB,QAAImD,KAAKmY,GAAT,EAAc,OAAOtb,CAAP;AACd,YAAQA,CAAR;AACE,WAAK,IAAL;AAAW,eAAOsS,OAAO0D,KAAK7S,GAAL,CAAP,CAAP;AACX,WAAK,IAAL;AAAW,eAAOojB,OAAOvQ,KAAK7S,GAAL,CAAP,CAAP;AACX,WAAK,IAAL;AACE,YAAI;AACF,iBAAOiL,KAAKmS,SAAL,CAAevK,KAAK7S,GAAL,CAAf,CAAP;AACD,SAFD,CAEE,OAAOid,CAAP,EAAU;AACV,iBAAO,YAAP;AACD;AACH;AACE,eAAOpgB,CAAP;AAVJ;AAYD,GAfS,CAAV;AAgBA,OAAK,IAAIA,IAAIgW,KAAK7S,CAAL,CAAb,EAAsBA,IAAImY,GAA1B,EAA+Btb,IAAIgW,KAAK,EAAE7S,CAAP,CAAnC,EAA8C;AAC5C,QAAIqjB,OAAOxmB,CAAP,KAAa,CAAC0iB,SAAS1iB,CAAT,CAAlB,EAA+B;AAC7BsU,aAAO,MAAMtU,CAAb;AACD,KAFD,MAEO;AACLsU,aAAO,MAAMR,QAAQ9T,CAAR,CAAb;AACD;AACF;AACD,SAAOsU,GAAP;AACD,CApCD;;AAuCA;AACA;AACA;AACAhG,QAAQmY,SAAR,GAAoB,UAASjpB,EAAT,EAAakpB,GAAb,EAAkB;AACpC;AACA,MAAI9D,YAAY+D,OAAOvgB,OAAnB,CAAJ,EAAiC;AAC/B,WAAO,YAAW;AAChB,aAAOkI,QAAQmY,SAAR,CAAkBjpB,EAAlB,EAAsBkpB,GAAtB,EAA2B3Q,KAA3B,CAAiC,IAAjC,EAAuC5B,SAAvC,CAAP;AACD,KAFD;AAGD;;AAED,MAAI/N,QAAQwgB,aAAR,KAA0B,IAA9B,EAAoC;AAClC,WAAOppB,EAAP;AACD;;AAED,MAAIylB,SAAS,KAAb;AACA,WAAS4D,UAAT,GAAsB;AACpB,QAAI,CAAC5D,MAAL,EAAa;AACX,UAAI7c,QAAQ0gB,gBAAZ,EAA8B;AAC5B,cAAM,IAAIzU,KAAJ,CAAUqU,GAAV,CAAN;AACD,OAFD,MAEO,IAAItgB,QAAQ2gB,gBAAZ,EAA8B;AACnCtb,gBAAQyX,KAAR,CAAcwD,GAAd;AACD,OAFM,MAEA;AACLjb,gBAAQ+T,KAAR,CAAckH,GAAd;AACD;AACDzD,eAAS,IAAT;AACD;AACD,WAAOzlB,GAAGuY,KAAH,CAAS,IAAT,EAAe5B,SAAf,CAAP;AACD;;AAED,SAAO0S,UAAP;AACD,CA5BD;;AA+BA,IAAIG,SAAS,EAAb;AACA,IAAIC,YAAJ;AACA3Y,QAAQ4Y,QAAR,GAAmB,UAASC,GAAT,EAAc;AAC/B,MAAIvE,YAAYqE,YAAZ,CAAJ,EACEA,eAAe7gB,QAAQye,GAAR,CAAYuC,UAAZ,IAA0B,EAAzC;AACFD,QAAMA,IAAIE,WAAJ,EAAN;AACA,MAAI,CAACL,OAAOG,GAAP,CAAL,EAAkB;AAChB,QAAI,IAAI1W,MAAJ,CAAW,QAAQ0W,GAAR,GAAc,KAAzB,EAAgC,GAAhC,EAAqClK,IAArC,CAA0CgK,YAA1C,CAAJ,EAA6D;AAC3D,UAAIK,MAAMlhB,QAAQkhB,GAAlB;AACAN,aAAOG,GAAP,IAAc,YAAW;AACvB,YAAIT,MAAMpY,QAAQ8X,MAAR,CAAerQ,KAAf,CAAqBzH,OAArB,EAA8B6F,SAA9B,CAAV;AACA1I,gBAAQ+T,KAAR,CAAc,WAAd,EAA2B2H,GAA3B,EAAgCG,GAAhC,EAAqCZ,GAArC;AACD,OAHD;AAID,KAND,MAMO;AACLM,aAAOG,GAAP,IAAc,YAAW,CAAE,CAA3B;AACD;AACF;AACD,SAAOH,OAAOG,GAAP,CAAP;AACD,CAhBD;;AAmBA;;;;;;;AAOA;AACA,SAASrT,OAAT,CAAiBhW,GAAjB,EAAsBypB,IAAtB,EAA4B;AAC1B;AACA,MAAIzoB,MAAM;AACR0oB,UAAM,EADE;AAERC,aAASC;AAFD,GAAV;AAIA;AACA,MAAIvT,UAAU7T,MAAV,IAAoB,CAAxB,EAA2BxB,IAAI4Y,KAAJ,GAAYvD,UAAU,CAAV,CAAZ;AAC3B,MAAIA,UAAU7T,MAAV,IAAoB,CAAxB,EAA2BxB,IAAI6oB,MAAJ,GAAaxT,UAAU,CAAV,CAAb;AAC3B,MAAIyT,UAAUL,IAAV,CAAJ,EAAqB;AACnB;AACAzoB,QAAI+oB,UAAJ,GAAiBN,IAAjB;AACD,GAHD,MAGO,IAAIA,IAAJ,EAAU;AACf;AACAjZ,YAAQwZ,OAAR,CAAgBhpB,GAAhB,EAAqByoB,IAArB;AACD;AACD;AACA,MAAI3E,YAAY9jB,IAAI+oB,UAAhB,CAAJ,EAAiC/oB,IAAI+oB,UAAJ,GAAiB,KAAjB;AACjC,MAAIjF,YAAY9jB,IAAI4Y,KAAhB,CAAJ,EAA4B5Y,IAAI4Y,KAAJ,GAAY,CAAZ;AAC5B,MAAIkL,YAAY9jB,IAAI6oB,MAAhB,CAAJ,EAA6B7oB,IAAI6oB,MAAJ,GAAa,KAAb;AAC7B,MAAI/E,YAAY9jB,IAAIipB,aAAhB,CAAJ,EAAoCjpB,IAAIipB,aAAJ,GAAoB,IAApB;AACpC,MAAIjpB,IAAI6oB,MAAR,EAAgB7oB,IAAI2oB,OAAJ,GAAcO,gBAAd;AAChB,SAAOC,YAAYnpB,GAAZ,EAAiBhB,GAAjB,EAAsBgB,IAAI4Y,KAA1B,CAAP;AACD;AACDpJ,QAAQwF,OAAR,GAAkBA,OAAlB;;AAGA;AACAA,QAAQ6T,MAAR,GAAiB;AACf,UAAS,CAAC,CAAD,EAAI,EAAJ,CADM;AAEf,YAAW,CAAC,CAAD,EAAI,EAAJ,CAFI;AAGf,eAAc,CAAC,CAAD,EAAI,EAAJ,CAHC;AAIf,aAAY,CAAC,CAAD,EAAI,EAAJ,CAJG;AAKf,WAAU,CAAC,EAAD,EAAK,EAAL,CALK;AAMf,UAAS,CAAC,EAAD,EAAK,EAAL,CANM;AAOf,WAAU,CAAC,EAAD,EAAK,EAAL,CAPK;AAQf,UAAS,CAAC,EAAD,EAAK,EAAL,CARM;AASf,UAAS,CAAC,EAAD,EAAK,EAAL,CATM;AAUf,WAAU,CAAC,EAAD,EAAK,EAAL,CAVK;AAWf,aAAY,CAAC,EAAD,EAAK,EAAL,CAXG;AAYf,SAAQ,CAAC,EAAD,EAAK,EAAL,CAZO;AAaf,YAAW,CAAC,EAAD,EAAK,EAAL;AAbI,CAAjB;;AAgBA;AACA7T,QAAQoU,MAAR,GAAiB;AACf,aAAW,MADI;AAEf,YAAU,QAFK;AAGf,aAAW,QAHI;AAIf,eAAa,MAJE;AAKf,UAAQ,MALO;AAMf,YAAU,OANK;AAOf,UAAQ,SAPO;AAQf;AACA,YAAU;AATK,CAAjB;;AAaA,SAASF,gBAAT,CAA0B1T,GAA1B,EAA+B6T,SAA/B,EAA0C;AACxC,MAAIna,QAAQ8F,QAAQoU,MAAR,CAAeC,SAAf,CAAZ;;AAEA,MAAIna,KAAJ,EAAW;AACT,WAAO,YAAY8F,QAAQ6T,MAAR,CAAe3Z,KAAf,EAAsB,CAAtB,CAAZ,GAAuC,GAAvC,GAA6CsG,GAA7C,GACA,SADA,GACYR,QAAQ6T,MAAR,CAAe3Z,KAAf,EAAsB,CAAtB,CADZ,GACuC,GAD9C;AAED,GAHD,MAGO;AACL,WAAOsG,GAAP;AACD;AACF;;AAGD,SAASoT,cAAT,CAAwBpT,GAAxB,EAA6B6T,SAA7B,EAAwC;AACtC,SAAO7T,GAAP;AACD;;AAGD,SAAS8T,WAAT,CAAqB9rB,KAArB,EAA4B;AAC1B,MAAI4T,OAAO,EAAX;;AAEA5T,QAAM+c,OAAN,CAAc,UAASiI,GAAT,EAAc+G,GAAd,EAAmB;AAC/BnY,SAAKoR,GAAL,IAAY,IAAZ;AACD,GAFD;;AAIA,SAAOpR,IAAP;AACD;;AAGD,SAAS+X,WAAT,CAAqBnpB,GAArB,EAA0BxE,KAA1B,EAAiCguB,YAAjC,EAA+C;AAC7C;AACA;AACA,MAAIxpB,IAAIipB,aAAJ,IACAztB,KADA,IAEAuoB,WAAWvoB,MAAMwZ,OAAjB,CAFA;AAGA;AACAxZ,QAAMwZ,OAAN,KAAkBxF,QAAQwF,OAJ1B;AAKA;AACA,IAAExZ,MAAM6R,WAAN,IAAqB7R,MAAM6R,WAAN,CAAkBlK,SAAlB,KAAgC3H,KAAvD,CANJ,EAMmE;AACjE,QAAIsc,MAAMtc,MAAMwZ,OAAN,CAAcwU,YAAd,EAA4BxpB,GAA5B,CAAV;AACA,QAAI,CAACunB,SAASzP,GAAT,CAAL,EAAoB;AAClBA,YAAMqR,YAAYnpB,GAAZ,EAAiB8X,GAAjB,EAAsB0R,YAAtB,CAAN;AACD;AACD,WAAO1R,GAAP;AACD;;AAED;AACA,MAAI2R,YAAYC,gBAAgB1pB,GAAhB,EAAqBxE,KAArB,CAAhB;AACA,MAAIiuB,SAAJ,EAAe;AACb,WAAOA,SAAP;AACD;;AAED;AACA,MAAI/G,OAAO5jB,OAAO4jB,IAAP,CAAYlnB,KAAZ,CAAX;AACA,MAAImuB,cAAcL,YAAY5G,IAAZ,CAAlB;;AAEA,MAAI1iB,IAAI+oB,UAAR,EAAoB;AAClBrG,WAAO5jB,OAAO8qB,mBAAP,CAA2BpuB,KAA3B,CAAP;AACD;;AAED;AACA;AACA,MAAIquB,QAAQruB,KAAR,MACIknB,KAAKlU,OAAL,CAAa,SAAb,KAA2B,CAA3B,IAAgCkU,KAAKlU,OAAL,CAAa,aAAb,KAA+B,CADnE,CAAJ,EAC2E;AACzE,WAAOsb,YAAYtuB,KAAZ,CAAP;AACD;;AAED;AACA,MAAIknB,KAAKlhB,MAAL,KAAgB,CAApB,EAAuB;AACrB,QAAIuiB,WAAWvoB,KAAX,CAAJ,EAAuB;AACrB,UAAIgX,OAAOhX,MAAMgX,IAAN,GAAa,OAAOhX,MAAMgX,IAA1B,GAAiC,EAA5C;AACA,aAAOxS,IAAI2oB,OAAJ,CAAY,cAAcnW,IAAd,GAAqB,GAAjC,EAAsC,SAAtC,CAAP;AACD;AACD,QAAIuX,SAASvuB,KAAT,CAAJ,EAAqB;AACnB,aAAOwE,IAAI2oB,OAAJ,CAAYhX,OAAOxO,SAAP,CAAiBwR,QAAjB,CAA0B4B,IAA1B,CAA+B/a,KAA/B,CAAZ,EAAmD,QAAnD,CAAP;AACD;AACD,QAAIwuB,OAAOxuB,KAAP,CAAJ,EAAmB;AACjB,aAAOwE,IAAI2oB,OAAJ,CAAYzgB,KAAK/E,SAAL,CAAewR,QAAf,CAAwB4B,IAAxB,CAA6B/a,KAA7B,CAAZ,EAAiD,MAAjD,CAAP;AACD;AACD,QAAIquB,QAAQruB,KAAR,CAAJ,EAAoB;AAClB,aAAOsuB,YAAYtuB,KAAZ,CAAP;AACD;AACF;;AAED,MAAIyuB,OAAO,EAAX;AAAA,MAAezsB,QAAQ,KAAvB;AAAA,MAA8B0sB,SAAS,CAAC,GAAD,EAAM,GAAN,CAAvC;;AAEA;AACA,MAAIzT,QAAQjb,KAAR,CAAJ,EAAoB;AAClBgC,YAAQ,IAAR;AACA0sB,aAAS,CAAC,GAAD,EAAM,GAAN,CAAT;AACD;;AAED;AACA,MAAInG,WAAWvoB,KAAX,CAAJ,EAAuB;AACrB,QAAIia,IAAIja,MAAMgX,IAAN,GAAa,OAAOhX,MAAMgX,IAA1B,GAAiC,EAAzC;AACAyX,WAAO,eAAexU,CAAf,GAAmB,GAA1B;AACD;;AAED;AACA,MAAIsU,SAASvuB,KAAT,CAAJ,EAAqB;AACnByuB,WAAO,MAAMtY,OAAOxO,SAAP,CAAiBwR,QAAjB,CAA0B4B,IAA1B,CAA+B/a,KAA/B,CAAb;AACD;;AAED;AACA,MAAIwuB,OAAOxuB,KAAP,CAAJ,EAAmB;AACjByuB,WAAO,MAAM/hB,KAAK/E,SAAL,CAAegnB,WAAf,CAA2B5T,IAA3B,CAAgC/a,KAAhC,CAAb;AACD;;AAED;AACA,MAAIquB,QAAQruB,KAAR,CAAJ,EAAoB;AAClByuB,WAAO,MAAMH,YAAYtuB,KAAZ,CAAb;AACD;;AAED,MAAIknB,KAAKlhB,MAAL,KAAgB,CAAhB,KAAsB,CAAChE,KAAD,IAAUhC,MAAMgG,MAAN,IAAgB,CAAhD,CAAJ,EAAwD;AACtD,WAAO0oB,OAAO,CAAP,IAAYD,IAAZ,GAAmBC,OAAO,CAAP,CAA1B;AACD;;AAED,MAAIV,eAAe,CAAnB,EAAsB;AACpB,QAAIO,SAASvuB,KAAT,CAAJ,EAAqB;AACnB,aAAOwE,IAAI2oB,OAAJ,CAAYhX,OAAOxO,SAAP,CAAiBwR,QAAjB,CAA0B4B,IAA1B,CAA+B/a,KAA/B,CAAZ,EAAmD,QAAnD,CAAP;AACD,KAFD,MAEO;AACL,aAAOwE,IAAI2oB,OAAJ,CAAY,UAAZ,EAAwB,SAAxB,CAAP;AACD;AACF;;AAED3oB,MAAI0oB,IAAJ,CAASrqB,IAAT,CAAc7C,KAAd;;AAEA,MAAI4uB,MAAJ;AACA,MAAI5sB,KAAJ,EAAW;AACT4sB,aAASC,YAAYrqB,GAAZ,EAAiBxE,KAAjB,EAAwBguB,YAAxB,EAAsCG,WAAtC,EAAmDjH,IAAnD,CAAT;AACD,GAFD,MAEO;AACL0H,aAAS1H,KAAKC,GAAL,CAAS,UAASlE,GAAT,EAAc;AAC9B,aAAO6L,eAAetqB,GAAf,EAAoBxE,KAApB,EAA2BguB,YAA3B,EAAyCG,WAAzC,EAAsDlL,GAAtD,EAA2DjhB,KAA3D,CAAP;AACD,KAFQ,CAAT;AAGD;;AAEDwC,MAAI0oB,IAAJ,CAAS9O,GAAT;;AAEA,SAAO2Q,qBAAqBH,MAArB,EAA6BH,IAA7B,EAAmCC,MAAnC,CAAP;AACD;;AAGD,SAASR,eAAT,CAAyB1pB,GAAzB,EAA8BxE,KAA9B,EAAqC;AACnC,MAAIsoB,YAAYtoB,KAAZ,CAAJ,EACE,OAAOwE,IAAI2oB,OAAJ,CAAY,WAAZ,EAAyB,WAAzB,CAAP;AACF,MAAIpB,SAAS/rB,KAAT,CAAJ,EAAqB;AACnB,QAAIgvB,SAAS,OAAOlb,KAAKmS,SAAL,CAAejmB,KAAf,EAAsB0O,OAAtB,CAA8B,QAA9B,EAAwC,EAAxC,EACsBA,OADtB,CAC8B,IAD9B,EACoC,KADpC,EAEsBA,OAFtB,CAE8B,MAF9B,EAEsC,GAFtC,CAAP,GAEoD,IAFjE;AAGA,WAAOlK,IAAI2oB,OAAJ,CAAY6B,MAAZ,EAAoB,QAApB,CAAP;AACD;AACD,MAAIlH,SAAS9nB,KAAT,CAAJ,EACE,OAAOwE,IAAI2oB,OAAJ,CAAY,KAAKntB,KAAjB,EAAwB,QAAxB,CAAP;AACF,MAAIstB,UAAUttB,KAAV,CAAJ,EACE,OAAOwE,IAAI2oB,OAAJ,CAAY,KAAKntB,KAAjB,EAAwB,SAAxB,CAAP;AACF;AACA,MAAIksB,OAAOlsB,KAAP,CAAJ,EACE,OAAOwE,IAAI2oB,OAAJ,CAAY,MAAZ,EAAoB,MAApB,CAAP;AACH;;AAGD,SAASmB,WAAT,CAAqBtuB,KAArB,EAA4B;AAC1B,SAAO,MAAM+X,MAAMpQ,SAAN,CAAgBwR,QAAhB,CAAyB4B,IAAzB,CAA8B/a,KAA9B,CAAN,GAA6C,GAApD;AACD;;AAGD,SAAS6uB,WAAT,CAAqBrqB,GAArB,EAA0BxE,KAA1B,EAAiCguB,YAAjC,EAA+CG,WAA/C,EAA4DjH,IAA5D,EAAkE;AAChE,MAAI0H,SAAS,EAAb;AACA,OAAK,IAAI/lB,IAAI,CAAR,EAAWrC,IAAIxG,MAAMgG,MAA1B,EAAkC6C,IAAIrC,CAAtC,EAAyC,EAAEqC,CAA3C,EAA8C;AAC5C,QAAI2b,eAAexkB,KAAf,EAAsBgY,OAAOnP,CAAP,CAAtB,CAAJ,EAAsC;AACpC+lB,aAAO/rB,IAAP,CAAYisB,eAAetqB,GAAf,EAAoBxE,KAApB,EAA2BguB,YAA3B,EAAyCG,WAAzC,EACRnW,OAAOnP,CAAP,CADQ,EACG,IADH,CAAZ;AAED,KAHD,MAGO;AACL+lB,aAAO/rB,IAAP,CAAY,EAAZ;AACD;AACF;AACDqkB,OAAKnI,OAAL,CAAa,UAASkE,GAAT,EAAc;AACzB,QAAI,CAACA,IAAI7O,KAAJ,CAAU,OAAV,CAAL,EAAyB;AACvBwa,aAAO/rB,IAAP,CAAYisB,eAAetqB,GAAf,EAAoBxE,KAApB,EAA2BguB,YAA3B,EAAyCG,WAAzC,EACRlL,GADQ,EACH,IADG,CAAZ;AAED;AACF,GALD;AAMA,SAAO2L,MAAP;AACD;;AAGD,SAASE,cAAT,CAAwBtqB,GAAxB,EAA6BxE,KAA7B,EAAoCguB,YAApC,EAAkDG,WAAlD,EAA+DlL,GAA/D,EAAoEjhB,KAApE,EAA2E;AACzE,MAAIgV,IAAJ,EAAUgD,GAAV,EAAeiV,IAAf;AACAA,SAAO3rB,OAAO4rB,wBAAP,CAAgClvB,KAAhC,EAAuCijB,GAAvC,KAA+C,EAAEjjB,OAAOA,MAAMijB,GAAN,CAAT,EAAtD;AACA,MAAIgM,KAAKE,GAAT,EAAc;AACZ,QAAIF,KAAKpC,GAAT,EAAc;AACZ7S,YAAMxV,IAAI2oB,OAAJ,CAAY,iBAAZ,EAA+B,SAA/B,CAAN;AACD,KAFD,MAEO;AACLnT,YAAMxV,IAAI2oB,OAAJ,CAAY,UAAZ,EAAwB,SAAxB,CAAN;AACD;AACF,GAND,MAMO;AACL,QAAI8B,KAAKpC,GAAT,EAAc;AACZ7S,YAAMxV,IAAI2oB,OAAJ,CAAY,UAAZ,EAAwB,SAAxB,CAAN;AACD;AACF;AACD,MAAI,CAAC3I,eAAe2J,WAAf,EAA4BlL,GAA5B,CAAL,EAAuC;AACrCjM,WAAO,MAAMiM,GAAN,GAAY,GAAnB;AACD;AACD,MAAI,CAACjJ,GAAL,EAAU;AACR,QAAIxV,IAAI0oB,IAAJ,CAASla,OAAT,CAAiBic,KAAKjvB,KAAtB,IAA+B,CAAnC,EAAsC;AACpC,UAAIksB,OAAO8B,YAAP,CAAJ,EAA0B;AACxBhU,cAAM2T,YAAYnpB,GAAZ,EAAiByqB,KAAKjvB,KAAtB,EAA6B,IAA7B,CAAN;AACD,OAFD,MAEO;AACLga,cAAM2T,YAAYnpB,GAAZ,EAAiByqB,KAAKjvB,KAAtB,EAA6BguB,eAAe,CAA5C,CAAN;AACD;AACD,UAAIhU,IAAIhH,OAAJ,CAAY,IAAZ,IAAoB,CAAC,CAAzB,EAA4B;AAC1B,YAAIhR,KAAJ,EAAW;AACTgY,gBAAMA,IAAIwE,KAAJ,CAAU,IAAV,EAAgB2I,GAAhB,CAAoB,UAASvN,IAAT,EAAe;AACvC,mBAAO,OAAOA,IAAd;AACD,WAFK,EAEH8C,IAFG,CAEE,IAFF,EAEQlL,MAFR,CAEe,CAFf,CAAN;AAGD,SAJD,MAIO;AACLwI,gBAAM,OAAOA,IAAIwE,KAAJ,CAAU,IAAV,EAAgB2I,GAAhB,CAAoB,UAASvN,IAAT,EAAe;AAC9C,mBAAO,QAAQA,IAAf;AACD,WAFY,EAEV8C,IAFU,CAEL,IAFK,CAAb;AAGD;AACF;AACF,KAjBD,MAiBO;AACL1C,YAAMxV,IAAI2oB,OAAJ,CAAY,YAAZ,EAA0B,SAA1B,CAAN;AACD;AACF;AACD,MAAI7E,YAAYtR,IAAZ,CAAJ,EAAuB;AACrB,QAAIhV,SAASihB,IAAI7O,KAAJ,CAAU,OAAV,CAAb,EAAiC;AAC/B,aAAO4F,GAAP;AACD;AACDhD,WAAOlD,KAAKmS,SAAL,CAAe,KAAKhD,GAApB,CAAP;AACA,QAAIjM,KAAK5C,KAAL,CAAW,8BAAX,CAAJ,EAAgD;AAC9C4C,aAAOA,KAAKxF,MAAL,CAAY,CAAZ,EAAewF,KAAKhR,MAAL,GAAc,CAA7B,CAAP;AACAgR,aAAOxS,IAAI2oB,OAAJ,CAAYnW,IAAZ,EAAkB,MAAlB,CAAP;AACD,KAHD,MAGO;AACLA,aAAOA,KAAKtI,OAAL,CAAa,IAAb,EAAmB,KAAnB,EACKA,OADL,CACa,MADb,EACqB,GADrB,EAEKA,OAFL,CAEa,UAFb,EAEyB,GAFzB,CAAP;AAGAsI,aAAOxS,IAAI2oB,OAAJ,CAAYnW,IAAZ,EAAkB,QAAlB,CAAP;AACD;AACF;;AAED,SAAOA,OAAO,IAAP,GAAcgD,GAArB;AACD;;AAGD,SAAS+U,oBAAT,CAA8BH,MAA9B,EAAsCH,IAAtC,EAA4CC,MAA5C,EAAoD;AAClD,MAAIU,cAAc,CAAlB;AACA,MAAIppB,SAAS4oB,OAAO9H,MAAP,CAAc,UAAS3H,IAAT,EAAekQ,GAAf,EAAoB;AAC7CD;AACA,QAAIC,IAAIrc,OAAJ,CAAY,IAAZ,KAAqB,CAAzB,EAA4Boc;AAC5B,WAAOjQ,OAAOkQ,IAAI3gB,OAAJ,CAAY,iBAAZ,EAA+B,EAA/B,EAAmC1I,MAA1C,GAAmD,CAA1D;AACD,GAJY,EAIV,CAJU,CAAb;;AAMA,MAAIA,SAAS,EAAb,EAAiB;AACf,WAAO0oB,OAAO,CAAP,KACCD,SAAS,EAAT,GAAc,EAAd,GAAmBA,OAAO,KAD3B,IAEA,GAFA,GAGAG,OAAOlS,IAAP,CAAY,OAAZ,CAHA,GAIA,GAJA,GAKAgS,OAAO,CAAP,CALP;AAMD;;AAED,SAAOA,OAAO,CAAP,IAAYD,IAAZ,GAAmB,GAAnB,GAAyBG,OAAOlS,IAAP,CAAY,IAAZ,CAAzB,GAA6C,GAA7C,GAAmDgS,OAAO,CAAP,CAA1D;AACD;;AAGD;AACA;AACA,SAASzT,OAAT,CAAiBqU,EAAjB,EAAqB;AACnB,SAAOzpB,MAAMoV,OAAN,CAAcqU,EAAd,CAAP;AACD;AACDtb,QAAQiH,OAAR,GAAkBA,OAAlB;;AAEA,SAASqS,SAAT,CAAmBlE,GAAnB,EAAwB;AACtB,SAAO,OAAOA,GAAP,KAAe,SAAtB;AACD;AACDpV,QAAQsZ,SAAR,GAAoBA,SAApB;;AAEA,SAASpB,MAAT,CAAgB9C,GAAhB,EAAqB;AACnB,SAAOA,QAAQ,IAAf;AACD;AACDpV,QAAQkY,MAAR,GAAiBA,MAAjB;;AAEA,SAASqD,iBAAT,CAA2BnG,GAA3B,EAAgC;AAC9B,SAAOA,OAAO,IAAd;AACD;AACDpV,QAAQub,iBAAR,GAA4BA,iBAA5B;;AAEA,SAASzH,QAAT,CAAkBsB,GAAlB,EAAuB;AACrB,SAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;AACDpV,QAAQ8T,QAAR,GAAmBA,QAAnB;;AAEA,SAASiE,QAAT,CAAkB3C,GAAlB,EAAuB;AACrB,SAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;AACDpV,QAAQ+X,QAAR,GAAmBA,QAAnB;;AAEA,SAASyD,QAAT,CAAkBpG,GAAlB,EAAuB;AACrB,SAAO,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAtB;AACD;AACDpV,QAAQwb,QAAR,GAAmBA,QAAnB;;AAEA,SAASlH,WAAT,CAAqBc,GAArB,EAA0B;AACxB,SAAOA,QAAQ,KAAK,CAApB;AACD;AACDpV,QAAQsU,WAAR,GAAsBA,WAAtB;;AAEA,SAASiG,QAAT,CAAkBlU,EAAlB,EAAsB;AACpB,SAAO+N,SAAS/N,EAAT,KAAgBoV,eAAepV,EAAf,MAAuB,iBAA9C;AACD;AACDrG,QAAQua,QAAR,GAAmBA,QAAnB;;AAEA,SAASnG,QAAT,CAAkBgB,GAAlB,EAAuB;AACrB,SAAO,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAf,IAA2BA,QAAQ,IAA1C;AACD;AACDpV,QAAQoU,QAAR,GAAmBA,QAAnB;;AAEA,SAASoG,MAAT,CAAgB7gB,CAAhB,EAAmB;AACjB,SAAOya,SAASza,CAAT,KAAe8hB,eAAe9hB,CAAf,MAAsB,eAA5C;AACD;AACDqG,QAAQwa,MAAR,GAAiBA,MAAjB;;AAEA,SAASH,OAAT,CAAiBxgB,CAAjB,EAAoB;AAClB,SAAOua,SAASva,CAAT,MACF4hB,eAAe5hB,CAAf,MAAsB,gBAAtB,IAA0CA,aAAakK,KADrD,CAAP;AAED;AACD/D,QAAQqa,OAAR,GAAkBA,OAAlB;;AAEA,SAAS9F,UAAT,CAAoBa,GAApB,EAAyB;AACvB,SAAO,OAAOA,GAAP,KAAe,UAAtB;AACD;AACDpV,QAAQuU,UAAR,GAAqBA,UAArB;;AAEA,SAASmH,WAAT,CAAqBtG,GAArB,EAA0B;AACxB,SAAOA,QAAQ,IAAR,IACA,OAAOA,GAAP,KAAe,SADf,IAEA,OAAOA,GAAP,KAAe,QAFf,IAGA,OAAOA,GAAP,KAAe,QAHf,IAIA,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAJf,IAI4B;AAC5B,SAAOA,GAAP,KAAe,WALtB;AAMD;AACDpV,QAAQ0b,WAAR,GAAsBA,WAAtB;;AAEA1b,QAAQ0X,QAAR,GAAmB,mBAAA/W,CAAQ,EAAR,CAAnB;;AAEA,SAAS8a,cAAT,CAAwBE,CAAxB,EAA2B;AACzB,SAAOrsB,OAAOqE,SAAP,CAAiBwR,QAAjB,CAA0B4B,IAA1B,CAA+B4U,CAA/B,CAAP;AACD;;AAGD,SAASC,GAAT,CAAa3V,CAAb,EAAgB;AACd,SAAOA,IAAI,EAAJ,GAAS,MAAMA,EAAEd,QAAF,CAAW,EAAX,CAAf,GAAgCc,EAAEd,QAAF,CAAW,EAAX,CAAvC;AACD;;AAGD,IAAI0W,SAAS,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,EACC,KADD,EACQ,KADR,EACe,KADf,CAAb;;AAGA;AACA,SAASC,SAAT,GAAqB;AACnB,MAAIniB,IAAI,IAAIjB,IAAJ,EAAR;AACA,MAAIqjB,OAAO,CAACH,IAAIjiB,EAAEqiB,QAAF,EAAJ,CAAD,EACCJ,IAAIjiB,EAAEsiB,UAAF,EAAJ,CADD,EAECL,IAAIjiB,EAAEuiB,UAAF,EAAJ,CAFD,EAEsBxT,IAFtB,CAE2B,GAF3B,CAAX;AAGA,SAAO,CAAC/O,EAAEwiB,OAAF,EAAD,EAAcN,OAAOliB,EAAEyiB,QAAF,EAAP,CAAd,EAAoCL,IAApC,EAA0CrT,IAA1C,CAA+C,GAA/C,CAAP;AACD;;AAGD;AACA1I,QAAQ5C,GAAR,GAAc,YAAW;AACvBD,UAAQC,GAAR,CAAY,SAAZ,EAAuB0e,WAAvB,EAAoC9b,QAAQ8X,MAAR,CAAerQ,KAAf,CAAqBzH,OAArB,EAA8B6F,SAA9B,CAApC;AACD,CAFD;;AAKA;;;;;;;;;;;;;AAaA7F,QAAQkX,QAAR,GAAmB,mBAAAvW,CAAQ,EAAR,CAAnB;;AAEAX,QAAQwZ,OAAR,GAAkB,UAAS6C,MAAT,EAAiB/S,GAAjB,EAAsB;AACtC;AACA,MAAI,CAACA,GAAD,IAAQ,CAAC8K,SAAS9K,GAAT,CAAb,EAA4B,OAAO+S,MAAP;;AAE5B,MAAInJ,OAAO5jB,OAAO4jB,IAAP,CAAY5J,GAAZ,CAAX;AACA,MAAIzU,IAAIqe,KAAKlhB,MAAb;AACA,SAAO6C,GAAP,EAAY;AACVwnB,WAAOnJ,KAAKre,CAAL,CAAP,IAAkByU,IAAI4J,KAAKre,CAAL,CAAJ,CAAlB;AACD;AACD,SAAOwnB,MAAP;AACD,CAVD;;AAYA,SAAS7L,cAAT,CAAwBhhB,GAAxB,EAA6B8sB,IAA7B,EAAmC;AACjC,SAAOhtB,OAAOqE,SAAP,CAAiB6c,cAAjB,CAAgCzJ,IAAhC,CAAqCvX,GAArC,EAA0C8sB,IAA1C,CAAP;AACD,C;;;;;;;ACzkBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AClCA;;;;AACA;;AACA;;AACA;;;;AAEA,mBAAA3b,CAAQ,EAAR;;AAEA,IAAM4b,cAAcjxB,SAAS6T,cAAT,CAAwB,cAAxB,CAApB;AACA,IAAMqd,eAAelxB,SAASgU,sBAAT,CAAgC,gBAAhC,CAArB;AACA,IAAMmd,eAAenxB,SAASoxB,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,EAA2C7wB,YAAhE;AACA,IAAI8wB,mBAAmBrxB,SAAS2V,IAAT,CAAcC,SAArC;AACA,IAAI0b,mBAAmBD,gBAAvB;;AAEA,IAAIJ,WAAJ,EAAiB;AACb,wBAAUtd,WAAV,CAAsBW,IAAtB,CAA2B,cAA3B,EAA2C,2BAA3C,EAAwE,YAAM;AAC1EzC,gBAAQC,GAAR,CAAY,uCAAZ;AACH,KAFD;AAGH;;AAGD,IAAIof,aAAaxqB,MAAjB,EAAyB;AACrB7B,WAAOQ,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;AACpCgsB,2BAAmBrxB,SAAS2V,IAAT,CAAcC,SAAjC;;AAEA,YAAI,CAACyb,gBAAL,EAAuB;AACnBrxB,qBAAS2V,IAAT,CAAcxB,SAAd,GAA0B,EAA1B;AACH,SAFD,MAEO,IAAMkd,mBAAmBC,gBAApB,GAAwC,CAAxC,IAA6CD,mBAAmBF,YAArE,EAAoF;AACvFnxB,qBAAS2V,IAAT,CAAcxB,SAAd,GAA0B,aAA1B;AACH,SAFM,MAEA,IAAKkd,mBAAmBC,gBAApB,GAAwC,CAA5C,EAA+C;AAClDtxB,qBAAS2V,IAAT,CAAcxB,SAAd,GAA0B,aAA1B;AACH;;AAEDmd,2BAAmBD,gBAAnB;AACH,KAZD;AAaH,C","file":"js/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 34);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ea3b1b99b13f3f2221bb","module.exports = \"<p><img src=\\\"https://github.com/yyyar/gobetween/blob/master/logo.png?raw=true\\\" alt=\\\"\\\"></p>\\n<p>Long time all of us used and using &quot;traditional&quot; load balancers / proxies like <a href=\\\"https://www.nginx.com/\\\">nginx</a>, <a href=\\\"http://www.haproxy.org/\\\">haproxy</a>, and others.</p>\\n<p>But in modern world balancing become more end more flexible because of environment changes are made more often. Nodes behind load balancer are spawning and disappear according to load and/or other requirements. Auto scaling and containerization became almost a &quot;silver bullet&quot; in modern IT infrastructure architectures.</p>\\n<p>In the IP-telephony world DNS SRV records are main mechanism to find out nearest and less loaded call router.</p>\\n<p>Same situation is in modern microservices world, but unfortunately, there are almost no lb / proxy that have flexible and complete <em>automatic discovery</em> feature. There are lot&#39;s of tricks and workarounds like <a href=\\\"https://www.airpair.com/scalable-architecture-with-docker-consul-and-nginx\\\">this</a>.</p>\\n<p><strong>gobetween</strong> aiming fill this gap and provide fast, flexible and full-featured solution for load balancing for modern microservice architectures.  </p>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Introduction.md\n// module id = 0\n// module chunks = 0","module.exports = \"<ul>\\n<li><a href=\\\"Introduction\\\">Introduction</a></li>\\n<li><a href=\\\"Installation\\\">Installation</a></li>\\n<li><a href=\\\"Configuration\\\">Configuration</a><ul>\\n<li><a href=\\\"Balancing\\\">Balancing</a></li>\\n<li><a href=\\\"Discovery\\\">Discovery</a></li>\\n<li><a href=\\\"Healthchecks\\\">Healthchecks</a></li>\\n<li><a href=\\\"Access-Control\\\">Access Control</a></li>\\n<li><a href=\\\"TLS-Termination\\\">TLS Termination</a></li>\\n<li><a href=\\\"Windows specific notes\\\">Windows specific notes</a></li>\\n</ul>\\n</li>\\n<li>Use Cases<ul>\\n<li><a href=\\\"Static balancing\\\">Simple load balancing</a></li>\\n<li><a href=\\\"SRV balancing\\\">SRV balancing</a></li>\\n<li><a href=\\\"Docker---Swarm-Balancing\\\">Docker / Swarm balancing</a></li>\\n<li><a href=\\\"ElasticSearch-cluster-with-Exec-discovery\\\">ElasticSearch cluster with Exec discovery</a></li>\\n<li><a href=\\\"Service-balancing-with-Consul-discovery-and-Docker-Registrator\\\">Service balancing with Consul discovery and Docker Registrator</a></li>\\n</ul>\\n</li>\\n<li><a href=\\\"REST API\\\">REST API</a></li>\\n<li><a href=\\\"Performance tests\\\">Performance tests</a></li>\\n</ul>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/_Sidebar.md\n// module id = 1\n// module chunks = 0","module.exports = \"<p><em><strong>(since 0.3.0)</strong></em></p>\\n<p>Access control support all subnets from IPv6 and IPv4 pool.</p>\\n<p>To enable access control need to add  [servers.servername.access] section into config file or add it via <a href=\\\"https://github.com/yyyar/gobetween/wiki/REST-API\\\">REST API</a></p>\\n<p>###Policy</p>\\n<p>Access control section can be defined with or without default policy : </p>\\n<pre><code>default = &quot;deny&quot; | &quot;allow&quot;\\n</code></pre><p>Allow policy is mean that all traffic pass to selected server .\\nDeny policy is opposite and reject all traffic point to selected servers.</p>\\n<p>###Rules</p>\\n<p>Rules section needs to be defined to list rules applied over default policy.\\nRules are checking from top and down the list. First rule match meant check stops and rule apply.</p>\\n<pre><code>rules = [\\n    &quot;allow 127.0.0.1&quot;,\\n    &quot;deny 192.168.1.0/24&quot;,\\n    &quot;allow 192.168.0.0/16&quot;,\\n    &quot;allow 10.0.0.0/16&quot;,\\n   ]\\n</code></pre><p>In shown case  packets came from 192.168.1.0/24 will be rejected despite the fact that they are included in the subset of subnets listed in next line 192.168.0.0/16. All other packets from 192.168.0.0/16 subnet will be passed .</p>\\n<p>full example:</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.servername.access]\\ndefault = &quot;deny&quot;\\nrules = [\\n    &quot;allow 127.0.0.1&quot;,\\n    &quot;deny 192.168.1.0/24&quot;,\\n    &quot;allow 192.168.0.0/16&quot;,\\n    &quot;allow 10.0.0.0/16&quot;,\\n   ]\\n</code></pre>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Access-Control.md\n// module id = 2\n// module chunks = 0","module.exports = \"<p>Balancing strategy is a way <em>gobetween</em> select backends (from discovery backends pool)  for new client connection. It&#39;s defined in <code>balance</code> property within <code>[servers.&lt;name&gt;]</code>, and is <code>weight</code> by default.</p>\\n<h5 id=\\\"-weight-\\\"><code>weight</code></h5>\\n<p>Select backend from discovery pool with probability based on backends weights.\\nFor example, for backends pool:</p>\\n<pre><code class=\\\"lang-json\\\">[\\n    &quot;host1 weight=1&quot;\\n    &quot;host2 weight=2&quot;\\n]\\n</code></pre>\\n<p>host1 will be selected with probability 75%, and host2 will be selected in 25% cases.</p>\\n<p>If weight for all backends are the same, backend will be selected randomly.</p>\\n<h5 id=\\\"-iphash-\\\"><code>iphash</code></h5>\\n<p>Target backend will be calculated using hash function of client ip address mod backends count. Note if backends pool changes (for example, due discovery), client may be proxied to a different backend.</p>\\n<h5 id=\\\"-leastconn-\\\"><code>leastconn</code></h5>\\n<p><em>gobetween</em> will select backends with least connections to it.</p>\\n<h5 id=\\\"-roundrobin-\\\"><code>roundrobin</code></h5>\\n<p>It&#39;s most simple balancing strategy, and each new connection will be proxies to next backend in the backends pool successively.</p>\\n<h5 id=\\\"-leastbandwidth-\\\"><code>leastbandwidth</code></h5>\\n<p><em>(since 0.3.0)</em>\\nBackends with least sum of rx/tx per second traffic will be selected for next request. Note that rx/tx per second values are calculated with 2 seconds interval so changes in bandwidth won&#39;t be instantly applied.</p>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Balancing.md\n// module id = 3\n// module chunks = 0","module.exports = \"<h2 id=\\\"configuration-location\\\">Configuration location</h2>\\n<p><em>(since v0.3.0)</em></p>\\n<p>There are several options where gobetween could pull it&#39;s configuration on startup.</p>\\n<h3 id=\\\"file\\\">file</h3>\\n<p><code>$ gobetween from-file /path/to/gobetween.toml</code></p>\\n<h3 id=\\\"http\\\">http</h3>\\n<p><code>$ gobetween from-url http://some.url/gobetween.toml</code></p>\\n<h3 id=\\\"consul-kv\\\">consul kv</h3>\\n<p><code>$ gobetween from-consul localhost:8500 --key=gobetween --scheme=http -f json</code></p>\\n<h2 id=\\\"configuration-format\\\">Configuration format</h2>\\n<p>gobetween could be configured with TOML or JSON (these formats map 1-to-1 to each other).\\nYou can specify format with --format (-f) option, for exaple:</p>\\n<p><code>$ gobetween from-url http://some.url/gobetween.toml -f toml</code></p>\\n<p><code>$ gobetween from-url http://some.url/gobetween.json -f json</code></p>\\n<h2 id=\\\"passing-arguments-in-env-variable\\\">Passing arguments in ENV variable</h2>\\n<p>It&#39;s possible to pass command-line args via GOBETWEEN environment variable (containing json array of arguments) instead as typical args. It may be useful for containerization when you store application parameters in env and don&#39;t want to change command line.</p>\\n<p>So instead</p>\\n<p><code>$ gobetween from-url http://some.url/gobetween.toml -f toml</code></p>\\n<p>You can use the following syntax:</p>\\n<pre><code>$ GOBETWEEN=&#39;[&quot;from-url&quot;, &quot;http://some.url/gobetween.toml&quot;, &quot;-f&quot;, &quot;toml&quot;]&#39;\\n$ gobetween\\n</code></pre>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Configuration.md\n// module id = 4\n// module chunks = 0","module.exports = \"<p>Service discovery solves the problem of automatic determining locations of service instances. There are two major types of service discovery: client-side discovery and server-side discovery. <em>gobetween</em> has build-in <a href=\\\"http://microservices.io/patterns/server-side-discovery.html\\\">server-side discovery</a> and acts as a router that can have static configuration, or query different kinds of &quot;service registries&quot;, depending on how it&#39;s configured.</p>\\n<p>Currently <em>gobetween</em> supports the following discovery types used for building backends pool for the server:</p>\\n<ul>\\n<li><a href=\\\"#static\\\">static</a></li>\\n<li><a href=\\\"#src\\\">srv</a></li>\\n<li><a href=\\\"#docker\\\">docker</a></li>\\n<li><a href=\\\"#json\\\">json</a></li>\\n<li><a href=\\\"#plaintext\\\">plaintext</a></li>\\n<li><a href=\\\"#exec\\\">exec</a></li>\\n<li><a href=\\\"#consul\\\">consul</a></li>\\n</ul>\\n<p>Discovery is defined in <code>[servers.&lt;name&gt;.discovery]</code> section in <code>kind</code> property.</p>\\n<p>There are some common properties for each discovery type (expect static):</p>\\n<pre><code class=\\\"lang-toml\\\">kind = &quot;&lt;kind&gt;&quot;         # (required)\\nfailpolicy = &quot;keeplast&quot; # (optional) &quot;keeplast&quot; | &quot;setempty&quot; - what to do with backends if discovery fails\\ninterval = &quot;0s&quot;         # (required) backends cache invalidation interval; 0 means never.\\ntimeout = &quot;5s&quot;          # (optional) max time to wait for discover until falling to failpolicy\\n</code></pre>\\n<h3 id=\\\"static\\\">static</h3>\\n<p>It&#39;s a simplest way to build load balancer backends. In this case actually no discovery is happened and backends list are static and managed only by health checks. <code>static_list</code> can contain as many backends as needed.</p>\\n<p><img src=\\\"http://i.piccy.info/i9/4f0b4f9b1a5ba56b6a0559a17d611c5b/1465913152/19993/1043487/simple.png\\\" alt=\\\"\\\"></p>\\n<pre><code class=\\\"lang-toml\\\">[servers.example]\\n\\n# ...\\n\\n  [servers.example.discovery]\\n  kind = &quot;static&quot;\\n  static_list = [\\n    &quot;localhost:8000 weight=5&quot;,  # &quot;host:port weight=N priority=M&quot;, weight and priority are optional\\n    &quot;localhost:8001&quot;            # and = 1 by default\\n  ]\\n</code></pre>\\n<h3 id=\\\"srv\\\">srv</h3>\\n<p>This discovery method uses DNS lookup to build backends list. gobetween will query DNS server defined in <code>srv_lookup_server</code> property and filter services using pattern defined in <code>srv_lookup_server</code>. You can use any custom DNS server or <a href=\\\"https://www.consul.io/docs/agent/dns.html\\\">Consul DNS</a>.</p>\\n<p><img src=\\\"http://i.piccy.info/i9/c1ab436d6c65f957c29ff26d3ca7cc17/1465913811/28400/1043487/srv.png\\\" alt=\\\"\\\"></p>\\n<pre><code class=\\\"lang-toml\\\">[servers.example]\\n\\n# ...\\n\\n  [servers.example.discovery]\\n  kind = &quot;srv&quot;\\n  srv_lookup_server = &quot;some.server:53&quot;\\n  srv_lookup_pattern = &quot;some.service.&quot;\\n  srv_dns_protocol = &quot;udp&quot;  # (since v0.2.0) - protocol to use for dns lookup: udp | tcp\\n</code></pre>\\n<h3 id=\\\"docker\\\">docker</h3>\\n<p>Docker discovery can work both with stand-alone <a href=\\\"http://docker.com\\\">Docker</a> server or with <a href=\\\"https://docs.docker.com/swarm/\\\">Docker Swarm</a>. <em>gobetween</em> will call Docker / Swarm API endpoint defined in <code>docker_endpoint</code> to build backends list. It may be HTTP endpoint (like <code>http://0.0.0.0:2375</code>) or Unix socket (<code>unix:///var/run/docker.sock</code>). To select only needed containers you can set <code>docker_container_label</code> property and containers will be filtered based on provided <a href=\\\"https://docs.docker.com/engine/userguide/labels-custom-metadata/#container-labels\\\">container label</a> and label value. You should also set <code>docker_container_private_port</code> so gobetween will use corresponding container public port while adding it to backends list.</p>\\n<p><img src=\\\"http://i.piccy.info/i9/7de5f9db763a40849bb885d34a4fdeaa/1465914526/71950/1043487/docker.png\\\" alt=\\\"\\\"></p>\\n<pre><code class=\\\"lang-toml\\\">[servers.example]\\n\\n# ...\\n\\n  [servers.example.discovery]\\n  kind = &quot;docker&quot;\\n  docker_endpoint = &quot;http://localhost:2375&quot; # (required) Endpoint to docker API\\n  docker_container_label = &quot;proxied=true&quot;   # (optional) Label to filter containers\\n  docker_container_private_port = 80        # (required) Private port of container to use\\n  docker_container_host_env_var = &quot;&quot;        # (optional) (since v0.2.0) Take container host from container env variable\\n</code></pre>\\n<h3 id=\\\"json\\\">json</h3>\\n<p>JSON discovery is useful for custom setups when you have your own service registry implementation that can provide backends list in JSON format. <em>gobetween</em> will make HTTP query to <code>json_endpoint</code>, expecting valid JSON in response, parse it and build backends list. By defaults JSON should have the following format:</p>\\n<pre><code class=\\\"lang-js\\\">[ \\n  {&quot;host&quot;: &quot;0.0.0.0&quot;, &quot;port&quot;: &quot;1231&quot;, &quot;weight&quot;: 1, &quot;priority&quot;: 1},\\n  {&quot;host&quot;: &quot;1.1.1.1&quot;, &quot;port&quot;: &quot;1232&quot;, &quot;weight&quot;: 2, &quot;priority&quot;: 1},\\n  ...\\n]\\n</code></pre>\\n<p>But it may be overridden to fit your custom JSON structure.</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.example]\\n\\n# ...\\n\\n  [servers.example.discovery]\\n  kind = &quot;json&quot;\\n  json_endpoint = &quot;http://localhost:8080&quot;  # (required) JSON discovery Url\\n  json_host_pattern = &quot;some.level.host&quot;    # (optional) path to host value in JSON object, by default &quot;host&quot;\\n  json_port_pattern = &quot;some.level.port&quot;    # (optional) path to port value in JSON object, by default &quot;port&quot;\\n  json_weight_pattern = &quot;some.level.weight&quot; # (optional) path to weight in JSON object, by default &quot;weight&quot;\\n  json_priority_pattern = &quot;some.level.priority&quot; # (optional) path to priority in JSON object, by default &quot;priority&quot;\\n</code></pre>\\n<h3 id=\\\"plaintext\\\">plaintext</h3>\\n<p>This is even simpler way to integrate custom discovery registries. Line in json discovery, <em>gobetween</em> will query <code>plaintext_endpoint</code> to get newline separated list of nodes in plain text format. Then it will be parsed using regexps line-by-line (one backend in line).A ll necessary values like host, port, etc will captured from named regexp groups. By default regexp plain discovery use </p>\\n<pre><code class=\\\"lang-regex\\\">(?P&lt;host&gt;\\\\S+):(?P&lt;port&gt;\\\\d+)(\\\\sweight=(?P&lt;weight&gt;\\\\d+))?(\\\\spriority=(?P&lt;priority&gt;\\\\d+))\\n</code></pre>\\n<p>So you can use parse the following responses by default: </p>\\n<pre><code>0.0.0.0:1234 weight=0, priority=1\\n0.0.0.0:4321 weight=1 priority=0\\n</code></pre><p>You can override regexp used to capture values using <code>plaintext_regex_pattern</code> property, keeping in mind groups names:</p>\\n<ul>\\n<li><code>(?P&lt;host&gt;...)</code></li>\\n<li><code>(?P&lt;port&gt;...)</code></li>\\n<li><code>(?P&lt;weight&gt;...)</code></li>\\n<li><code>(?P&lt;priority&gt;...)</code></li>\\n</ul>\\n<p>All another captured groups will be ignored. </p>\\n<pre><code class=\\\"lang-toml\\\">[servers.example]\\n\\n# ...\\n\\n  [servers.example.discovery]\\n  kind = &quot;plaintext&quot;\\n  plaintext_endpoint = &quot;http://some.url.com&quot;   # (required) Url to plain text discovery\\n  plaintext_regex_pattern = &quot;&quot;                 # (optional) Regex with named capturing groups\\n</code></pre>\\n<h3 id=\\\"exec\\\">exec</h3>\\n<p>This is most powerful discovery method. In this case backends list will be parser from the stdout of arbitrary script / program. <em>gobetween</em> will execute <code>exec_command</code> (first element is full path to the program, all others are optional arguments. Expected output of the script should be in the following format:</p>\\n<pre><code>host1:port1 weight=N\\nhost2:port2 weight=M\\n</code></pre><p>Weight is optional. Lines should be separated by newline (\\\\n). </p>\\n<p>Here is an example of script <code>/path/to/script.sh</code>:</p>\\n<pre><code class=\\\"lang-bash\\\">#!/usr/bin/env bash\\n\\necho localhost:8000 weight=1\\necho localhost:8001 weight=2\\n</code></pre>\\n<p><em>gobetween</em> process should have execute permission to the script.</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.example]\\n\\n# ...\\n\\n  [servers.example.discovery]\\n  kind = &quot;exec&quot;\\n  exec_command = [&quot;/path/to/script.sh&quot;, &quot;arg1&quot;, &quot;arg2&quot;] # (required) command to exec and variable-length arguments\\n</code></pre>\\n<h3 id=\\\"consul\\\">consul</h3>\\n<p><em>(since v0.3.0)</em>\\nConsul discovery uses Consul API to retrieve list of backends. If you&#39;re relying on Consul healthchecks and using <code>consul_service_passing_only = true</code> if makes sense to turn off gobetween healthchecks.</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.example]\\n\\n# ...\\n\\n  [servers.example.discovery]\\n  consul_host = &quot;localhost:8500&quot;       # (required) Consul host:port\\n  consul_service_name = &quot;myservice&quot;    # (required) Service name\\n  consul_service_tag = &quot;&quot;              # (optional) Service tag\\n  consul_service_passing_only = true   # (optional) Get only services with passing healthchecks\\n\\n  consul_tls_enabled = false                    # (optional) enable client tls auth\\n  consul_tls_cert_path = &quot;/path/to/cert.pem&quot;\\n  consul_tls_key_path = &quot;/path/to/key.pem&quot;\\n  consul_tls_cacert_path = &quot;/path/to/cacert.pem&quot;\\n</code></pre>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Discovery.md\n// module id = 5\n// module chunks = 0","module.exports = \"<p>Docker containers direct discovery is simple with gobetween . Simply run containers with selected label (you may separate containers with same internal port , but with different service type by different labels)</p>\\n<p><img src=\\\"http://i.piccy.info/i9/7de5f9db763a40849bb885d34a4fdeaa/1465914526/71950/1043487/docker.png\\\" alt=\\\"\\\"></p>\\n<p>In this article we will discover services and  balance docker containers directly with docker(or swarm) API.\\nFor this we need to define discovery  type as  Docker.  Also need to define docker host(ip) and port or swarm manage host(ip) and port . Service discovery in this cases works via containers labels. In this cases label will be &quot;api=true&quot; . All containers  from swarm cluster( or from docker host) marked with this label  will be balanced by gobetween. In balancing pool will be added all containers that are in active state and marked with defined label. Also it takes only containers with selected in docker_container_private_port  internal port enabled.</p>\\n<p>Also in this example  we will use more complicated healthcheck. It named exec . Main idea - you know what you need to check , you may write your own script , gobetween send IP(arg1) and port(arg2) of node that need to be checked in this way : script.sh arg1 arg2  and it should return 1 if success and 0 if fail in stdout. In exec_timeout_duration variable you need to specify script max execution time. If during this time script does not return expected output check marked as failed. </p>\\n<p><strong>IMPORTANT</strong> timeout  value should be less then check interval value.</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.sample3]\\nbind = &quot;localhost:3002&quot;\\nprotocol = &quot;tcp&quot;\\nbalance = &quot;weight&quot;\\n\\n  [servers.sample3.discovery]\\n    interval = &quot;10s&quot;\\n    timeout = &quot;2s&quot;\\n    kind = &quot;docker&quot;\\n    docker_endpoint = &quot;http://localhost:2375&quot;  # Docker / Swarm API    \\n    docker_container_label = &quot;api=true&quot;  # label to filter containers\\n    docker_container_private_port = 80   # gobetween will take public container port for this private port\\n\\n  [servers.sample3.healthcheck]\\n    fails = 1                      \\n    passes = 1\\n    interval = &quot;2s&quot;   \\n    timeout = &quot;1s&quot;             \\n    kind = &quot;ping&quot;\\n</code></pre>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Docker---Swarm-Balancing.md\n// module id = 6\n// module chunks = 0","module.exports = \"<p>Everyone who use Elasticsearch engine as a part of a dynamic infrastructure as a log storage or as a main database are faced with problems during  autoscaling . In fact  common Load Balancers as <a href=\\\"http://nginx.org/\\\">Nginx</a>  used http balancing  between Elasticsearch node pool and  senders. But in this case it is possible to faced with many problems caused by service discovery during autoscaling or failed node exclusion . It is  mean that data nodes list may be inconsistent because node may be up and running but non-operational, overloaded or dropped/excluded from cluster. So simple healthchecks useless in this cases as well as simple service discovery.\\nOur proposition is usual - simplify everything as much as possible . \\nOur goal - keep things  simple! So let`s do Elasticsearch input data and requests balancing.     </p>\\n<p>In this article we will use Elasticsearch <a href=\\\"https://www.elastic.co/guide/en/elasticsearch/reference/current/cat-nodes.html\\\">CAT node API</a> it is a part of powerfull <a href=\\\"https://www.elastic.co/guide/en/elasticsearch/reference/current/cat.html\\\">CAT</a>  api that is a header search mechanisms over Elasticsearch engine. We will use our lovely  gobetween to balance traffic between <a href=\\\"https://en.wikipedia.org/wiki/Create,_read,_update_and_delete\\\">CRUD</a> (data) nodes  in Elasticsearch cluster for inserting/selecting  big amount of data and holding big request quantity especially in case of using autoscaling.</p>\\n<p><img src=\\\"http://i.piccy.info/i9/22161abca6d14ba661194819805db8eb/1466846714/32781/1006107/elastic_gobetween.png\\\" alt=\\\"\\\">  </p>\\n<p>We need:\\n1) Client node  especially for  Gobetween . This node will be our request router for our data node discovery service. \\nFor this during adding client node to cluster add following to elasticsearch.conf</p>\\n<pre><code> node.master: false\\n node.data: false \\n</code></pre><p>2) discovery script</p>\\n<p>exec discovery will looks like :</p>\\n<pre><code> #!/bin/bash\\n curl -sS -XGET &#39;http://PI_OF_YOUR_CLIENT_NODE:9200/_cat/nodes?v&amp;h=ip,r=d&#39; |sed &#39;1d&#39;|tr -d &#39; &#39;|sed &#39;s/$/:9200/&#39;\\n</code></pre><p>it should have output like:</p>\\n<pre><code> 10.0.0.51:9200\\n 10.0.0.55:9200\\n 10.0.0.53:9200\\n 10.0.0.52:9200\\n 10.0.0.54:9200\\n etc .\\n</code></pre><p>3) Let&#39;s configure Gobetween for balancing between data nodes . We will use exec discovery method and round robin algorithm . This is a simple use case and you feel free to use more complicated methods with weights and dynamically generated discovery lists.\\nBut let`s start to balance :</p>\\n<p>After installation Gobetween described earlier  let`s configure it:</p>\\n<p>Our gobetween conf will looks like:</p>\\n<pre><code> [servers.sample3]\\n bind = &quot;100.100.1.5:9200&quot;\\n protocol = &quot;tcp&quot;\\n balance = &quot;weight&quot;\\n [servers.sample3.discovery]\\n kind = &quot;exec&quot;\\n exec_command = [&quot;/etc/gobetween/discovery_elasticsearch.sh&quot;] \\n interval=&quot;1m&quot;\\n timeout = &quot;10s&quot;                            \\n\\n [servers.sample3.healthcheck]\\n fails = 1                      \\n passes = 1\\n interval = &quot;2s&quot;                \\n kind = &quot;exec&quot;\\n exec_command = &quot;/etc/gobetween/healthcheck_elasticsearch.sh&quot; \\n exec_expected_positive_output = &quot;1&quot;\\n exec_expected_negative_output = &quot;0&quot;\\n timeout = &quot;1s&quot;\\n</code></pre><p>Conclusion</p>\\n<p>In this examaple not shown weight balancing for data nodes.\\nYou can write more complex script or use any Elasticsearch Analyzer mechanisms that allow you play with node weight depends on loads in them or it&#39;s free calculation capacity.</p>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/ElasticSearch-cluster-with-Exec-discovery.md\n// module id = 7\n// module chunks = 0","module.exports = \"<p>Healthchecks are used for determine service status of backend nodes pool.\\nIf discovery return only a nodes list and there are no healthchecks on discovery service side it needs to use\\nmechanism to determine service real status (failed or ok ). In this case healthchecks can be used.\\nThere are two different type of healthchecks in gobetween.</p>\\n<p><strong>Healthchecks are optional since 0.2 release.</strong> </p>\\n<p>If there are no healthcheck server section defined - backend nodes marked as &quot;ok&quot; and can be deleted from backend according to discovery rules  and intervals</p>\\n<h3 id=\\\"ping\\\">ping</h3>\\n<p>This is a simple healthcheck. It is simple sheck connection to backend nodes by initiate new connection from gobetween side to each backend node from discovery list. In case of  connection created successfully - check passed. This is a simple mechanism. Checks success are  only  mean that connection created . No data verification made during this checks.</p>\\n<p>Example of ping healthcheck:</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.default.healthcheck]\\nkind = &quot;ping&quot;\\ninterval = &quot;2s&quot;\\nping_timeout_duration = &quot;500ms&quot;\\n</code></pre>\\n<h3 id=\\\"exec\\\">exec</h3>\\n<p>This is a more complicated healthcheck type. During Gobetween development we made a decision provide users a flexible mechanism to create own healthchecks. No one except end user know how exactly check service status of nodes in discovery pools. There are uncountable quantity of usage cases and services. Anyone can create it&#39;s own script and call it as healthcheck. Script execute by gobetween with arguments: <code>/path/to/script [ip] [port]</code> output of script to stdout should be <code>1</code> if check passed successfully and <code>0</code> if failed by default (may be overriden).  </p>\\n<p>Example of exec healthcheck:</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.default.healthcheck] \\nkind = &quot;exec&quot;\\ninterval = &quot;2s&quot;  \\nexec_command = &quot;/usr/share/exec_healthcheck.sh&quot;  # (required) command to execute\\nexec_expected_positive_output = &quot;1&quot;           # (required) expected output of command in case of success\\nexec_expected_negative_output = &quot;0&quot;           # (required) expected output of command in case of failure\\nexec_timeout_duration = &quot;1s&quot;                  # (required) max time for script to execute until mark as failed\\n</code></pre>\\n<h3 id=\\\"examples\\\">Examples</h3>\\n<p>Please note that in all operating systems healthcheck response should not contain newline after output result.</p>\\n<h4 id=\\\"windows\\\">Windows</h4>\\n<p>healthcheck.bat</p>\\n<pre><code>@ECHO OFF\\necho|set /p Dummy=1\\n</code></pre><h4 id=\\\"linux-actually-any-unix-family-\\\">Linux (Actually any Unix family)</h4>\\n<p>healthcheck.sh</p>\\n<pre><code class=\\\"lang-bash\\\">#!/usr/bin/env bash\\necho -n 1 ;\\n</code></pre>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Healthchecks.md\n// module id = 8\n// module chunks = 0","module.exports = \"<p><strong>For latest docs please refer to links in the sidebar on the right</strong></p>\\n<h2 id=\\\"architecture\\\">Architecture</h2>\\n<p><img src=\\\"http://i.piccy.info/i9/8b92154435be32f21eaa3ff7b3dc6d1c/1466244332/74457/1043487/gog.png\\\" alt=\\\"gobetween\\\" /></p>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Home.md\n// module id = 9\n// module chunks = 0","module.exports = \"<ul>\\n<li><a href=\\\"#linux-binary\\\">Linux Binary</a></li>\\n<li><a href=\\\"#linux-from-sources\\\">Linux From Sources</a></li>\\n<li><a href=\\\"#docker\\\">Docker</a></li>\\n<li><a href=\\\"#windows-binary\\\">Windows Binary</a></li>\\n</ul>\\n<h2 id=\\\"linux-binary\\\">Linux Binary</h2>\\n<h3 id=\\\"download-latest-version\\\">Download latest version</h3>\\n<h4 id=\\\"for-x86\\\">for x86</h4>\\n<pre><code class=\\\"lang-bash\\\">$ curl -s https://api.github.com/repos/yyyar/gobetween/releases | grep browser_download_url | grep linux_386 | cut -d &#39;&quot;&#39; -f 4 | wget -i -\\n</code></pre>\\n<h4 id=\\\"for-amd64\\\">for amd64</h4>\\n<pre><code class=\\\"lang-bash\\\">$ curl -s https://api.github.com/repos/yyyar/gobetween/releases | grep browser_download_url | grep linux_amd64 | cut -d &#39;&quot;&#39; -f 4 | wget -i -\\n</code></pre>\\n<h3 id=\\\"unzip\\\">Unzip</h3>\\n<pre><code class=\\\"lang-bash\\\">$ tar -zxvf *.tar.gz\\n$ cd gobetween*\\n</code></pre>\\n<h3 id=\\\"configure\\\">Configure</h3>\\n<pre><code class=\\\"lang-bash\\\">vim config/gobetween.toml\\n</code></pre>\\n<h3 id=\\\"run\\\">Run</h3>\\n<pre><code class=\\\"lang-bash\\\">$ sudo gobetween -c config/gobetween.toml\\n</code></pre>\\n<h2 id=\\\"linux-from-sources\\\">Linux from sources</h2>\\n<h3 id=\\\"install\\\">Install</h3>\\n<pre><code class=\\\"lang-bash\\\">$ git clone git@github.com:yyyar/gobetween.git\\n$ make\\n$ sudo -E make install\\n$ vim /etc/gobetween.toml\\n$ gobetween -c /etc/gobetween.toml\\n</code></pre>\\n<h3 id=\\\"uninstall\\\">Uninstall</h3>\\n<pre><code class=\\\"lang-bash\\\">sudo make uninstall\\n</code></pre>\\n<h2 id=\\\"docker\\\">Docker</h2>\\n<p>Pull image from public Docker Hub</p>\\n<pre><code class=\\\"lang-bash\\\">$ docker pull yyyar/gobetween\\n</code></pre>\\n<p>Specify port mappings (80 docker host port to 80 container port ) and place <code>gobetween.toml</code> to <code>/path/to/gobetween.toml</code></p>\\n<pre><code class=\\\"lang-bash\\\">$ docker run -p 80:80 -v /path/to/conf/gobetween.toml:/etc/gobetween/conf/:rw yyyar/gobetween\\n</code></pre>\\n<h2 id=\\\"windows-binary\\\">Windows Binary</h2>\\n<pre><code>c:\\\\path\\\\to\\\\gobetween -c c:\\\\path\\\\to\\\\gobetween.toml\\n</code></pre>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Installation.md\n// module id = 10\n// module chunks = 0","module.exports = \"<p><img src=\\\"http://i.piccy.info/i9/c80788698d935682172e3d54a39b1a3d/1465302438/18505/1041433/10_MIN_test.png\\\" alt=\\\"\\\"></p>\\n<p><img src=\\\"http://i.piccy.info/i9/885ae1fb49e098db523dac844bb14444/1465302487/18985/1041433/10_min_traffic_values.png\\\" alt=\\\"\\\"></p>\\n<p>Test environment :</p>\\n<pre><code>      8 core 16 thread Intel(R) Xeon(R) CPU  L5630  @ 2.13GHz\\n</code></pre><p>Test tool : <a href=\\\"https://github.com/wg/wrk\\\">WRK</a></p>\\n<p>Test rperformed with command:</p>\\n<pre><code>wrk -c10000 -d600 -t8 http://$IP:80/index.html\\n</code></pre><p>As a backends we using 3 docker containers with Nginx with static page.</p>\\n<pre><code> user  nginx;\\n worker_processes  4;\\n error_log  /var/log/nginx/error.log warn;\\n pid        /var/run/nginx.pid;\\n events {\\n worker_connections  4096;\\n }\\n http {\\n include       /etc/nginx/mime.types;\\n default_type  application/octet-stream;\\n log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;\\n                 &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;\\n                 &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;; \\n access_log  /var/log/nginx/access.log  main; \\n sendfile        on;\\n keepalive_timeout  65;\\n include /etc/nginx/conf.d/*.conf;\\n }\\n</code></pre><p>Testing was done with Gobetween  ,  Haproxy  1.6 and Nginx 1.11.1 \\nGobetween config :</p>\\n<pre><code>[logging]\\nlevel = &quot;info&quot; \\noutput = &quot;stdout&quot; \\n[globals]\\n[defaults] \\nmax_connections = 0\\nclient_idle_timeout = &quot;30s&quot;\\nbackend_idle_timeout = &quot;30s&quot;\\nbackend_connection_timeout = &quot;30s&quot;\\n[servers]\\n\\n[servers.sample3]\\nbind = $ip:80&quot;\\nprotocol = &quot;tcp&quot;\\nbalance = &quot;weight&quot;\\n[servers.sample3.healthcheck]\\ntimeout = &quot;5s&quot;\\nkind = &quot;exec&quot;\\ninterval = &quot;7s&quot;\\nexec_command = &quot;./exec_healthcheck.sh&quot;\\nexec_expected_positive_output = &quot;1&quot;\\nexec_expected_negative_output = &quot;0&quot;\\nexec_expected_output = &quot;1&quot;\\nexec_timeout_duration = &quot;2s&quot;\\n\\n[servers.sample3.discovery]\\nkind = &quot;docker&quot;\\ndocker_endpoint = &quot;http://127.0.0.1:2375&quot;\\ndocker_container_label = &quot;proxied=true&quot;\\ndocker_container_private_port = 80\\ndocker_cache_ttl = &quot;20s&quot;\\n</code></pre><p>HAPROXY Config :</p>\\n<pre><code>global\\nlog 127.0.0.1 local0 notice\\nmaxconn 200000\\nuser haproxy\\ngroup haproxy\\ndefaults\\nlog     global\\nmode    http\\noption  httplog\\noption  dontlognull\\nretries 3\\noption redispatch\\ntimeout connect  5000\\ntimeout client  10000\\ntimeout server  10000\\n\\nlisten appname $ip:80\\nmaxconn 200000\\nmode http\\nstats enable\\nstats uri /haproxy?stats\\nstats realm Strictly\\\\ Private\\nstats auth A_Username:YourPassword\\nstats auth Another_User:passwd\\nbalance roundrobin\\noption httpclose\\noption forwardfor\\nserver lamp1 172.17.0.2:80 check\\nserver lamp2 172.17.0.3:80 check\\nserver lamp3 172.17.0.4:80 check\\n</code></pre><p>Nginx LB config</p>\\n<pre><code>user nginx nginx;\\nworker_processes 8;\\nerror_log /var/log/nginx/error_log info;\\nevents {\\nworker_connections 4096;\\nuse epoll;\\n}\\nstream {\\nupstream backend {\\nserver 172.17.0.2:80 weight=1;\\nserver 172.17.0.3:80 weight=5;\\nserver 172.17.0.4:80 weight=5;\\n}\\nserver {\\nlisten 82;\\nproxy_pass backend;\\n}\\n}\\n</code></pre>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Performance-tests.md\n// module id = 11\n// module chunks = 0","module.exports = \"<h3 id=\\\"table-of-contents\\\">Table of Contents</h3>\\n<ul>\\n<li><a href=\\\"#introduction\\\">Configuration</a></li>\\n<li><a href=\\\"#errors\\\">Errors</a></li>\\n<li><a href=\\\"#general\\\">General endpoints</a></li>\\n<li><a href=\\\"#servers\\\">Servers endpoints</a></li>\\n</ul>\\n<h3 id=\\\"configuration\\\">Configuration</h3>\\n<p>You can enable/disable and configure REST API port in gobetween config file in <code>[api]</code> section:</p>\\n<pre><code class=\\\"lang-toml\\\">[api]\\nenabled = true  # true | false\\nbind = &quot;:8888&quot;  # bind host:port\\n\\n  # uncomment to enable \\n  #[api.basic_auth]   # (optional) Enable HTTP Basic Auth\\n  #login = &quot;admin&quot;    # HTTP Auth Login\\n  #password = &quot;1111&quot;  # HTTP Auth Password\\n\\n  # uncomment to enable\\n  #[api.tls]                        # (optional) Enable HTTPS\\n  #cert_path = &quot;/path/to/cert.pem&quot;  # Path to certificate\\n  #key_path = &quot;/path/to/key.pem&quot;    # Path to key\\n</code></pre>\\n<h3 id=\\\"errors\\\">Errors</h3>\\n<p>API responds with typical HTTP codes representing success of failure of the operation:</p>\\n<ul>\\n<li>200 OK</li>\\n<li>400 Bad Request</li>\\n<li>409 Conflict</li>\\n<li>500 Internal Server Error</li>\\n</ul>\\n<h2 id=\\\"rest-api-specification\\\">REST API Specification</h2>\\n<h3 id=\\\"general\\\">General</h3>\\n<h4 id=\\\"-get-system-information\\\"><code>GET /</code> - System Information</h4>\\n<p>Returns system information about gobetween process.</p>\\n<h5 id=\\\"response\\\">Response</h5>\\n<pre><code class=\\\"lang-js\\\">{\\n    &quot;configuration&quot;: {\\n        &quot;kind&quot; : String\\n        // ...\\n        // kind-specific data\\n    },\\n    &quot;pid&quot;: Integer,\\n    &quot;startTime&quot;: String,\\n    &quot;time&quot;: String,\\n    &quot;uptime&quot;: Duration,\\n    &quot;version&quot;: String\\n}\\n</code></pre>\\n<h4 id=\\\"-get-dump-dump-current-config-to-response\\\"><code>GET /dump</code> - Dump Current Config to Response</h4>\\n<h5 id=\\\"query-params\\\">Query Params</h5>\\n<ul>\\n<li>format - &quot;toml&quot; (default) | &quot;json&quot;</li>\\n</ul>\\n<h5 id=\\\"response\\\">Response</h5>\\n<pre><code> # TOML or JSON formatted current config\\n</code></pre><h3 id=\\\"servers\\\">Servers</h3>\\n<h4 id=\\\"-get-servers-name-get-server-by-name\\\"><code>GET /servers/&lt;name&gt;</code> - Get Server By Name</h4>\\n<h5 id=\\\"response\\\">Response</h5>\\n<pre><code class=\\\"lang-js\\\">{\\n   // server definition of the same structure and format as `[servers.&lt;name&gt;]` \\n   // entry in config TOML file but JSON encoded.\\n}\\n</code></pre>\\n<h4 id=\\\"-get-servers-list-all-servers\\\"><code>GET /servers</code> - List All Servers</h4>\\n<h5 id=\\\"response\\\">Response</h5>\\n<pre><code class=\\\"lang-js\\\">{\\n    // Represents the same structure and format as `[servers]` entries in config TOML file.\\n\\n    &quot;&lt;name&gt;&quot;: {\\n        // server definition of the same structure and format as `[servers.&lt;name&gt;]` \\n        // entry in config TOML file but JSON encoded.\\n    },\\n\\n    // other servers\\n\\n}\\n</code></pre>\\n<h4 id=\\\"-post-servers-name-create-server-with-name-name-\\\"><code>POST /servers/&lt;name&gt;</code> - Create Server With Name <code>&lt;name&gt;</code></h4>\\n<h5 id=\\\"body\\\">Body</h5>\\n<pre><code class=\\\"lang-js\\\">{\\n   // server definition of the same structure and format as `[servers.&lt;name&gt;]` \\n   // entry in config TOML file but JSON encoded.\\n}\\n</code></pre>\\n<h4 id=\\\"-delete-servers-name-delete-server\\\"><code>DELETE /servers/&lt;name&gt;</code> - Delete Server</h4>\\n<h4 id=\\\"-get-servers-name-stats-get-server-statistics\\\"><code>GET /servers/&lt;name&gt;/stats</code> - Get Server Statistics</h4>\\n<h5 id=\\\"body\\\">Body</h5>\\n<pre><code class=\\\"lang-js\\\">{\\n    &quot;active_connections&quot;: Integer,\\n    &quot;rx_total&quot;: Integer,  // bytes\\n    &quot;tx_total&quot;: Integer,  // bytes\\n    &quot;rx_second&quot;: Integer, // bytes/second\\n    &quot;tx_second&quot;: Integer, // bytes/second\\n    &quot;backends&quot;: [\\n        {\\n            &quot;host&quot;: String,\\n            &quot;port&quot;: String,\\n            &quot;priority&quot;: Integer,\\n            &quot;weight&quot;: Integer,\\n            &quot;stats&quot;: {\\n                &quot;live&quot;: Boolean,\\n                &quot;total_connections&quot;: Integer,\\n                &quot;active_connections&quot;: Integer,\\n                &quot;refused_connections&quot;: Integer,\\n                &quot;rx&quot;: Integer,  // bytes\\n                &quot;tx&quot;: Integer   // bytes\\n                &quot;rx_second&quot;: Integer, // bytes/second\\n                &quot;tx_second&quot;: Integer, // bytes/second\\n            }\\n        },\\n\\n        // ... other backends ... \\n    ]\\n}\\n</code></pre>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/REST-API.md\n// module id = 12\n// module chunks = 0","module.exports = \"<p><img src=\\\"http://i.piccy.info/i9/c1ab436d6c65f957c29ff26d3ca7cc17/1465913811/28400/1043487/srv.png\\\" alt=\\\"\\\"></p>\\n<p>We have unlimited quantity of docker containers on unknown docker nodes quantity .\\nOn docker nodes we have registrator service.\\nAnd yes : zookeeper+skydns or consul+registrator with native dns at the top of docker nodes.</p>\\n<p>Sooooo - let&#39;s start balancing:\\nIn this example we defined discovery type srv . Also we need to define dns server and port which will be our service discovery source. Also we need to define a service name pattern and request frequency. When all done end configured properly we will have a backend node list refreshed each N seconds . During this N seconds node health checked by healthshecks. If node disappeared(appeared) from dns - it was removed/added to backend nodes list. Actually nodes list was synced with SRV record. But healthcheck status for node does not changed. It means that if srv record contain node that actually failed - it will stay marked as failed after SRV list refresh. \\nOne more important thing.  If in some reasons srv discovey failed (does not return correct response from dns server ) we may define what it needs to do with server backend nodes. If you need faile tolerance backend resistant to dns server failures add failpolicy = &quot;keeplast&quot; and tour backend stay same as last correct response from dns server.  In different situation - if you need consistency in all cases and it needs to be consistent more then return any non failed response -  add failpolicy = &quot;setempty&quot; and your node lists will be cleared and all requests to this server will be rejected</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.sample2]\\nbind = &quot;localhost:3001&quot;\\nprotocol = &quot;tcp&quot;\\nbalance = &quot;weight&quot;\\n\\n  [servers.sample2.discovery]\\n  failpolicy = &quot;keeplast&quot;\\n  kind = &quot;srv&quot;\\n  srv_lookup_server = &quot;66.66.66.66:8600&quot; # dns server and port\\n  srv_lookup_pattern = &quot;api.service.ireland.consul.&quot; # SRV service pattern \\n\\n  [servers.sample2.healthcheck]\\n  fails = 1                      \\n  passes = 1\\n  interval = &quot;2s&quot;                \\n  kind = &quot;ping&quot;\\n  timeout = &quot;500ms&quot;\\n</code></pre>\\n<p>We have ready to go solution. You can use leastconn, or iphash as you wish.</p>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/SRV-Balancing.md\n// module id = 13\n// module chunks = 0","module.exports = \"<h2 id=\\\"-introduction-\\\"><strong>Introduction</strong></h2>\\n<p>This Article describe service Balancing with Gobetween and Consul . We use Docker and Registrator With Consul SRV Discovery service. As a Gobetween Discovery service.</p>\\n<p>Consul:</p>\\n<pre><code class=\\\"lang-bash\\\">sever1.consul.example.com 10.0.0.11 bootstrap consul server , consul agent\\nsever2.consul.example.com 10.0.0.12 consul server , consul agent\\nsever2.consul.example.com 10.0.0.13 consul server , consul agent\\n</code></pre>\\n<p>Docker nodes :</p>\\n<pre><code class=\\\"lang-bash\\\">server1.application1.example.com 10.0.1.11 application server1 Docker node1 with registrator service\\nserver2.application2.example.com 10.0.1.12 application server2 Docker node2 with registrator service\\nserver3.application3.example.com 10.0.1.13 application server3 Docker node3 with registrator service\\n</code></pre>\\n<p>Gobetween balancer:</p>\\n<pre><code class=\\\"lang-text\\\">lb.exampe.com load balancer server will have 3 interfaces:\\neth0 with wan address 55.55.55.55 , eth1 with 10.0.0.5 address and eth2 with 10.0.1.5\\n</code></pre>\\n<h2 id=\\\"consul-cluster-deployment\\\">Consul cluster deployment</h2>\\n<p>First of all need to install Consul on server(N).consul.example.com:</p>\\n<p>Download Consul package from <a href=\\\"https://consul.io\\\">https://consul.io</a> </p>\\n<pre><code class=\\\"lang-bash\\\">#wget https://releases.hashicorp.com/consul/0.6.4/consul_0.6.4_linux_amd64.zip\\n#unzip *.zip\\n#mv consul /usr/sbin/consul\\n</code></pre>\\n<p>Test your consul binary</p>\\n<pre><code class=\\\"lang-bash\\\">#consul --version\\nConsul v0.6.4\\nConsul Protocol: 3 (Understands back to: 1)\\n</code></pre>\\n<p><strong>After installation Consul on all servers let`s prepare consul cluster for initial start</strong></p>\\n<p>First f all need to generate token for our cluster:</p>\\n<pre><code class=\\\"lang-bash\\\">#consul keygen\\nozgffIYeX6owI0215KWR5Q==\\n</code></pre>\\n<p>Add consul user:</p>\\n<pre><code class=\\\"lang-bash\\\">#adduser consul\\n</code></pre>\\n<p>Creating consul configuration directorines:</p>\\n<pre><code class=\\\"lang-bash\\\">#mkdir -p /etc/consul.d/{bootstrap,server,client}\\n</code></pre>\\n<p>Creating Consul Data directories :</p>\\n<pre><code class=\\\"lang-bash\\\">#mkdir /var/consul\\n#chown consul:consul /var/consul\\n</code></pre>\\n<p>On bootstrap node (sever1.consul.example.com) need to create bootstrap config:</p>\\n<p>/etc/consul.d/bootstrap/config.json</p>\\n<pre><code class=\\\"lang-text\\\">{\\n    &quot;bootstrap&quot;: true,\\n    &quot;server&quot;: true,\\n    &quot;datacenter&quot;: &quot;production&quot;,\\n    &quot;data_dir&quot;: &quot;/var/consul&quot;,\\n    &quot;encrypt&quot;: &quot;&quot;,\\n    &quot;log_level&quot;: &quot;INFO&quot;,\\n     &quot;encrypt&quot;:ozgffIYeX6owI0215KWR5Q==,\\n    &quot;enable_syslog&quot;: true\\n}\\n</code></pre>\\n<p>On all onsul servers need to create server config in /etc/consul.d/server/config.json:</p>\\n<p>Server1:</p>\\n<pre><code class=\\\"lang-text\\\">{\\n    &quot;bootstrap&quot;: false,\\n    &quot;server&quot;: true,\\n    &quot;datacenter&quot;: &quot;production&quot;,\\n    &quot;data_dir&quot;: &quot;/var/consul&quot;,\\n    &quot;encrypt&quot;: &quot;ozgffIYeX6owI0215KWR5Q==&quot;,\\n    &quot;log_level&quot;: &quot;INFO&quot;,\\n    &quot;enable_syslog&quot;: true,\\n    &quot;start_join&quot;: [&quot;10.0.0.12&quot;, &quot;10.0.0.13&quot;]\\n}\\n</code></pre>\\n<p>Server2</p>\\n<pre><code class=\\\"lang-text\\\">{\\n    &quot;bootstrap&quot;: false,\\n    &quot;server&quot;: true,\\n    &quot;datacenter&quot;: &quot;production&quot;,\\n    &quot;data_dir&quot;: &quot;/var/consul&quot;,\\n    &quot;encrypt&quot;: &quot;ozgffIYeX6owI0215KWR5Q==&quot;,\\n    &quot;log_level&quot;: &quot;INFO&quot;,\\n    &quot;enable_syslog&quot;: true,\\n    &quot;start_join&quot;: [&quot;10.0.0.11&quot;, &quot;10.0.0.13&quot;]\\n}\\n</code></pre>\\n<p>Server3:</p>\\n<pre><code class=\\\"lang-text\\\">{\\n    &quot;bootstrap&quot;: false,\\n    &quot;server&quot;: true,\\n    &quot;datacenter&quot;: &quot;production&quot;,\\n    &quot;data_dir&quot;: &quot;/var/consul&quot;,\\n    &quot;encrypt&quot;: &quot;ozgffIYeX6owI0215KWR5Q==&quot;,\\n    &quot;log_level&quot;: &quot;INFO&quot;,\\n    &quot;enable_syslog&quot;: true,\\n    &quot;start_join&quot;: [&quot;10.0.0.11&quot;, &quot;10.0.0.12&quot;]\\n}\\n</code></pre>\\n<p>Next we will create upstart script on all consul servers  :\\n /etc/init/consul:</p>\\n<pre><code class=\\\"lang-init\\\">description &quot;Consul server process&quot;\\n\\nstart on (local-filesystems and net-device-up IFACE=eth0)\\nstop on runlevel [!12345]\\n\\nrespawn\\n\\nsetuid consul\\nsetgid consul\\n\\nexec consul agent -config-dir /etc/consul.d/server\\n</code></pre>\\n<p>Bootstrap cluster :\\nOn sever1.consul.example.com:</p>\\n<pre><code class=\\\"lang-bash\\\">#consul agent -config-dir /etc/consul.d/bootstrap\\n</code></pre>\\n<p>The service should start up and occupy the terminal window. In bootstrap mode, this server will self-elect as leader, creating a basis for forming the cluster.</p>\\n<p>On another two servers (sever2.consul.example.com, sever3.consul.example.com) Simply run consul cluster</p>\\n<pre><code class=\\\"lang-bash\\\">#start consul\\n</code></pre>\\n<p>These servers will connect to the bootstrapped server, completing the cluster. At this point, we have a cluster of three servers, two of which are operating normally, and one of which is in bootstrap mode, meaning that it can make executive decisions without consulting the other servers.</p>\\n<p>On bootstrap nod press</p>\\n<pre><code class=\\\"lang-text\\\">CTRL-C\\n</code></pre>\\n<p>And re-start bootstrap node as usual node :</p>\\n<p>sever1.consul.example.com:</p>\\n<pre><code class=\\\"lang-bash\\\">#consul start\\n</code></pre>\\n<p>Test Consul cluster with command:</p>\\n<pre><code class=\\\"lang-bash\\\">#consul members -rpc-addr=10.0.0.11:8400\\n\\nOutput should be:\\nNode           Address          Status  Type    Build  Protocol  DC\\nserver1.consul.example.com  10.0.0.11:8301  alive   server  0.6.4  2        production\\nserver2.consul.example.com  10.0.0.12:8301  alive   server  0.6.4  2        production\\nserver3.consul.example.com  10.0.0.13:8301  alive   server  0.6.4  2        production\\n</code></pre>\\n<p>So, our cluster  up and running</p>\\n<p>##Servers preparation  for application servers start </p>\\n<p>We need run docker containers on our Application servers nodes:\\nFor this it needs to  install docker on all  application servers:</p>\\n<pre><code class=\\\"lang-text\\\">server1.application1.example.com \\n\\nserver2.application2.example.com \\n\\nserver3.application3.example.com\\n</code></pre>\\n<p>###Installing docker :</p>\\n<pre><code class=\\\"lang-bash\\\"># sudo apt-get update\\n\\n# sudo apt-get install apt-transport-https ca-certificates\\n\\n#sudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\\n\\n#echo deb https://apt.dockerproject.org/repo ubuntu-trusty main &gt; /etc/apt/sources.list.d/docker.list\\n\\n#sudo apt-get update\\n\\n#sudo apt-get purge lxc-docker\\n\\n#apt-cache policy docker-engine\\n\\n#sudo apt-get update\\n\\n#sudo apt-get install linux-image-extra-$(uname -r)\\n\\n#apt-get install apparmor\\n\\n#sudo apt-get install docker-engine\\n\\n#sudo docker run hello-world\\n</code></pre>\\n<p>###Installing Registrator :</p>\\n<p>Simply run container with registrator on each docker node </p>\\n<pre><code class=\\\"lang-docker\\\">docker run -d \\\\\\n    --name=registrator \\\\\\n    --net=host \\\\\\n    --volume=/var/run/docker.sock:/tmp/docker.sock \\\\\\n    gliderlabs/registrator:latest \\\\\\n      consul://10.0.1.5:8500\\n</code></pre>\\n<p>Now we are ready for running application containers</p>\\n<p>###Prepare and start mock services  containers</p>\\n<p>For testing needs we will run nginx default containers :</p>\\n<p>Lets`s create simple html file to be able recognize  difference between servers and services during proxy testing.</p>\\n<p>For this need to create  /tmp/test.html file on docker host maschine. Add ip address and service name into it. </p>\\n<p>For  server1.application1.example.com  it will seems like:</p>\\n<p>/tmp/test/test_service.html</p>\\n<pre><code>  Server1.application1.example.com service1\\n</code></pre><p>/tmp/test2/test_service.html</p>\\n<pre><code>  Server1.application1.example.com service2\\n</code></pre><p>For  server2.application1.example.com  it will seems like:</p>\\n<p>/tmp/test/test_service.html</p>\\n<pre><code>  Server2.application1.example.com service1\\n</code></pre><p>/tmp/test2/test_service.html</p>\\n<pre><code>  Server2.application1.example.com service2\\n</code></pre><p>For  server3.application1.example.com  it will seems like:</p>\\n<p>/tmp/test/test_service.html</p>\\n<pre><code>  Server3.application1.example.com service1\\n</code></pre><p>/tmp/test2/test_service.html</p>\\n<pre><code>  Server3.application1.example.com service2\\n</code></pre><p>Next we will use nginx default container as a test service containers</p>\\n<p>Create two containers on each docker node :</p>\\n<p>Server1.application1.example.com:</p>\\n<pre><code class=\\\"lang-bash\\\">docker run -l proxied=true -d -p 22001:80 -e &quot;SERVICE_80_NAME=service1&quot; -v /tmp/test:/usr/share/nginx/html:ro nginx\\n\\ndocker run -l proxied=true -d -p 23001:80 -e &quot;SERVICE_80_NAME=service2&quot; -v /tmp/test2:/usr/share/nginx/html:ro nginx\\n</code></pre>\\n<p>Server2.application1.example.com</p>\\n<pre><code class=\\\"lang-bash\\\">docker run -l proxied=true -d -p 22002:80 -e &quot;SERVICE_80_NAME=service1&quot; -v /tmp/test:/usr/share/nginx/html:ro nginx\\n\\ndocker run -l proxied=true -d -p 23002:80 -e &quot;SERVICE_80_NAME=service2&quot; -v /tmp/test2:/usr/share/nginx/html:ro nginx\\n</code></pre>\\n<p>Server3.application1.example.com</p>\\n<pre><code class=\\\"lang-bash\\\">docker run -l proxied=true -d -p 22003:80 -e &quot;SERVICE_80_NAME=service1&quot; -v /tmp/test:/usr/share/nginx/html:ro nginx\\n\\ndocker run -l proxied=true -d -p 23003:80 -e &quot;SERVICE_80_NAME=service2&quot; -v /tmp/test2:/usr/share/nginx/html:ro nginx\\n</code></pre>\\n<p>We have consul cluster , registrator , docker nodes with mock services, so we are ready to deploy load balancer with service discovery.</p>\\n<p>##Gobetween Service LB installation and configuration</p>\\n<p>Download gobetween latest release from github:</p>\\n<p><a href=\\\"Gobetween releases page\\\">https://github.com/yyyar/gobetween/releases</a></p>\\n<pre><code class=\\\"lang-bash\\\">#wget https://github.com/yyyar/gobetween/releases/download/0.1.0/gobetween_0.1.0.dev_linux_amd64.tar.gz\\n#tar -zxvf gobetween_0.1.0.dev_linux_amd64.tar.gz gobetween\\n</code></pre>\\n<p>Copy binary to /usr/sbin/</p>\\n<pre><code class=\\\"lang-bash\\\">#cp gobetween /usr/sbin/\\n</code></pre>\\n<p>Also download init script:</p>\\n<pre><code class=\\\"lang-bash\\\">#wget https://github.com/yyyar/gobetween/blob/master/config/init/gobetween.conf\\n</code></pre>\\n<p>Next need to place it into /etc/init/ directory </p>\\n<p>And let`s create config for our service discovery cases and also for consul cluster.</p>\\n<p>For consul cluster config will looks like:</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.sample]\\nbind = &quot;10.0.1.5:8500&quot;\\nprotocol = &quot;tcp&quot; \\nbalance = &quot;roundrobin&quot;\\n\\nmax_connections = 100\\nclient_idle_timeout = &quot;10m&quot;\\nbackend_idle_timeout = &quot;10m&quot;\\nbackend_connection_timeout = &quot;5s&quot;\\n\\n    [servers.sample.discovery]\\n    kind = &quot;static&quot;\\n    static_list = [\\n      &quot;10.0.0.11:8500 weight=1&quot;,\\n      &quot;10.0.0.12:8500 weight=1&quot;,\\n      &quot;10.0.0.13:8500 weight=1&quot;\\n    ]\\n\\n    [servers.sample.healthcheck]\\n    fails = 1                      \\n    passes = 1\\n    interval = &quot;2s&quot;   \\n    timeout=&quot;1s&quot;             \\n    kind = &quot;ping&quot;\\n    ping_timeout_duration = &quot;500ms&quot;\\n</code></pre>\\n<p>let`s build service discovery based on this configuration :\\nThis example query consul DNS server on 10.0.0.11 (GOBETWEEN currently not supported UDP balancing so we will use single servers query) consul node for service1 and service2 list with external ports</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.sample2]\\nbind = &quot;55.55.55.55:2000&quot;\\nprotocol = &quot;tcp&quot;\\nbalance = &quot;weight&quot;\\n\\n  [servers.sample2.discovery]\\n  failpolicy = &quot;keeplast&quot;\\n  kind = &quot;srv&quot;\\n  srv_lookup_server = &quot;10.0.0.11:8600&quot; # dns server and port\\n  srv_lookup_pattern = &quot;service1.service.production.consul.&quot; # SRV service pattern \\n\\n  [servers.sample2.healthcheck]\\n  fails = 1                      \\n  passes = 1\\n  interval = &quot;2s&quot;                \\n  kind = &quot;ping&quot;\\n  timeout = &quot;500ms&quot;\\n\\n\\n[servers.sample3]\\nbind = &quot;55.55.55.55:2001&quot;\\nprotocol = &quot;tcp&quot;\\nbalance = &quot;weight&quot;\\n\\n  [servers.sample3.discovery]\\n  failpolicy = &quot;keeplast&quot;\\n  kind = &quot;srv&quot;\\n  srv_lookup_server = &quot;10.0.0.11:8600&quot; # dns server and port\\n  srv_lookup_pattern = &quot;service2.service.production.consul.&quot; # SRV service pattern \\n\\n  [servers.sample3.healthcheck]\\n  fails = 1                      \\n  passes = 1\\n  interval = &quot;2s&quot;                \\n  kind = &quot;ping&quot;\\n  timeout = &quot;500ms&quot;\\n</code></pre>\\n<p>Let`s start Gobetween</p>\\n<pre><code class=\\\"lang-bash\\\">#start gobetween\\n</code></pre>\\n<p>##Discovery test</p>\\n<p>Check consul dns </p>\\n<pre><code class=\\\"lang-bash\\\">#dig @10.0.0.11 -p 8600  service1.service.production.consul SRV\\n\\n &lt;&lt;&gt;&gt; DiG 9.9.5-3ubuntu0.6-Ubuntu &lt;&lt;&gt;&gt; @10.0.0.11 -p 8600 service1.service.production.consul SRV\\n; (1 server found)\\n;; global options: +cmd\\n;; Got answer:\\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 1820\\n;; flags: qr aa rd; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 3\\n;; WARNING: recursion requested but not available\\n\\n;; QUESTION SECTION:\\n;service1.service.production.consul.    IN    SRV\\n\\n;; ANSWER SECTION:\\nservice1.service.production.consul.    0 IN    SRV    1 1 22001 server1.application1.example.com.node.production.consul.\\nservice1.service.production.consul.    0 IN    SRV    1 1 22002 server2.application1.example.com.node.production.consul.\\nservice1.service.production.consul.    0 IN    SRV    1 1 22002 server3.application1.example.com.node.production.consul.\\n\\n;; ADDITIONAL SECTION:\\nserver1.application1.example.com.node.production.consul. 0 IN A    10.0.1.11\\nserver2.application1.example.com.node.production.consul. 0 IN A    10.0.1.12\\nserver3.application1.example.com.node.production.consul. 0 IN A    10.0.1.13\\n</code></pre>\\n<pre><code class=\\\"lang-bash\\\">#dig @10.0.0.11 -p 8600  service2.service.production.consul SRV\\n\\nOutput shold be like:\\n\\n &lt;&lt;&gt;&gt; DiG 9.9.5-3ubuntu0.6-Ubuntu &lt;&lt;&gt;&gt; @10.0.0.11 -p 8600 service1.service.production.consul SRV\\n; (1 server found)\\n;; global options: +cmd\\n;; Got answer:\\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 1820\\n;; flags: qr aa rd; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 3\\n;; WARNING: recursion requested but not available\\n\\n;; QUESTION SECTION:\\n;service2.service.production.consul.    IN    SRV\\n\\n;; ANSWER SECTION:\\nservice2.service.production.consul.    0 IN    SRV    1 1 23001 server1.application1.example.com.node.production.consul.\\nservice2.service.production.consul.    0 IN    SRV    1 1 23002 server2.application1.example.com.node.production.consul.\\nservice2.service.production.consul.    0 IN    SRV    1 1 23002 server3.application1.example.com.node.production.consul.\\n\\n;; ADDITIONAL SECTION:\\nserver1.application1.example.com.node.production.consul. 0 IN A    10.0.1.11\\nserver2.application1.example.com.node.production.consul. 0 IN A    10.0.1.12\\nserver3.application1.example.com.node.production.consul. 0 IN A    10.0.1.13\\n</code></pre>\\n<p>##Service discovery balancing test</p>\\n<p>If so - that mean that registrators on all nodes successfully register services in consul cluster.</p>\\n<p>And we ready to test our services:\\nCheck 55.55.55.55:2000 and 55.55.55.55:2000 \\nOutput will be like:</p>\\n<pre><code class=\\\"lang-bash\\\">#curl -s http://55.55.55.55:2000/test_service.html\\nServer1.application1.example.com service1\\n##curl -s http://55.55.55.55:2000/test_service.html\\nServer2.application1.example.com service1\\n#curl -s http://55.55.55.55:2000/test_service.html\\nServer3.application1.example.com service1\\nEtc\\n#curl -s http://55.55.55.55:2001/test_service.html\\nServer1.application1.example.com service2\\n##curl -s http://55.55.55.55:2001/test_service.html\\nServer2.application1.example.com service2\\n#curl -s http://55.55.55.55:2001/test_service.html\\nServer3.application1.example.com service2\\n</code></pre>\\n<p>Try to stop few containers and check that it will be disappeared from consul dns as well as from gobetween discovery.</p>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Service-balancing-with-Consul-discovery-and-Docker-Registrator.md\n// module id = 14\n// module chunks = 0","module.exports = \"<p>For example, we need to balance three nodes/backends. </p>\\n<p><img src=\\\"http://i.piccy.info/i9/4f0b4f9b1a5ba56b6a0559a17d611c5b/1465913152/19993/1043487/simple.png\\\" alt=\\\"\\\"></p>\\n<p>We need to define our first gobetween server: </p>\\n<pre><code class=\\\"lang-toml\\\">[servers.sample]\\nbind = &quot;100.100.1.5:3000&quot;\\nprotocol = &quot;tcp&quot;\\nbalance = &quot;weight&quot;\\n\\nmax_connections = 10000\\nclient_idle_timeout = &quot;10m&quot;\\nbackend_idle_timeout = &quot;10m&quot;\\nbackend_connection_timeout = &quot;2s&quot;\\n\\n[servers.sample.discovery]\\nkind = &quot;static&quot;\\nstatic_list = [\\n    &quot;10.0.0.2:22399 weight=5&quot;,\\n    &quot;10.0.0.3:22499 weight=3&quot;,\\n    &quot;10.0.0.5:32399 weight=1&quot;\\n]\\n</code></pre>\\n<p>And it needs to define health check method  in our sample it is tcp ping method. It means that each period of time defined in interval gobetween trying to open test session to each backend node from list and based on check success|fail mark node healthy or failed after N fails defined in fails variable , and restore it after T success checks defined in passes variable and if so - exclude it  balancing list or include it  again.  </p>\\n<pre><code class=\\\"lang-toml\\\">[servers.sample.healthcheck]\\nfails = 1                      \\npasses = 1\\ninterval = &quot;2s&quot;                \\nkind = &quot;ping&quot;\\nping_timeout_duration = &quot;500ms&quot;\\n</code></pre>\\n<p>Final version of our config will be:</p>\\n<pre><code class=\\\"lang-toml\\\">\\n[servers.sample]\\nbind = &quot;localhost:3000&quot;\\nprotocol = &quot;tcp&quot; \\nbalance = &quot;roundrobin&quot;\\n\\nmax_connections = 10000\\nclient_idle_timeout = &quot;10m&quot;\\nbackend_idle_timeout = &quot;10m&quot;\\nbackend_connection_timeout = &quot;2s&quot;\\n\\n    [servers.sample.discovery]\\n    kind = &quot;static&quot;\\n    static_list = [\\n      &quot;10.0.0.2:22399 weight=5&quot;,\\n      &quot;10.0.0.3:22499 weight=3&quot;,\\n      &quot;10.0.0.5:32399 weight=1&quot;\\n    ]\\n\\n    [servers.sample.healthcheck]\\n    fails = 1                      \\n    passes = 1\\n    interval = &quot;2s&quot;   \\n    timeout=&quot;1s&quot;             \\n    kind = &quot;ping&quot;\\n    ping_timeout_duration = &quot;500ms&quot;\\n</code></pre>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Static-balancing.md\n// module id = 15\n// module chunks = 0","module.exports = \"<p><strong><em>(since 0.4.0)</em></strong></p>\\n<p>You can configure gobetween to listen TLS and perform TLS termination so traffic would be decrypted and passed through TCP to backends.</p>\\n<p>You just need to set you server protocol to tls and configure tls section:</p>\\n<pre><code class=\\\"lang-toml\\\">[servers.default]\\nprotocol = &quot;tls&quot;\\n\\n  [servers.default.tls]             # (required) if protocol == &quot;tls&quot;\\n  cert_path = &quot;/path/to/file.crt&quot;   # (required) path to crt file\\n  key_path = &quot;/path/to/file.key&quot;    # (required) path to key file\\n  min_version = &quot;tls1&quot;              # (optional) &quot;ssl3&quot; | &quot;tls1&quot; | &quot;tls1.1&quot; | &quot;tls1.2&quot; - minimum allowed tls version\\n  max_version = &quot;tls1.2&quot;            # (optional) maximum allowed tls version\\n  ciphers = []                      # (optional) list of supported ciphers. Empty means all supported. For a list see https://golang.org/pkg/crypto/tls/#pkg-constants\\n  prefer_server_ciphers = false     # (optional) if true server selects server&#39;s most preferred cipher\\n  session_tickets = true            # (optional) if true enables session tickets\\n</code></pre>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/TLS-Termination.md\n// module id = 16\n// module chunks = 0","module.exports = \"<p>Windows version config have few things should be noted to prepare proper config file.\\nExec discovery path an  exec healthcheck path should be added with single quotes. </p>\\n<h1 id=\\\"linux\\\">Linux</h1>\\n<pre><code class=\\\"lang-toml\\\">exec_command = &quot;/etc/gobetween/healthchecks/exec_healthcheck.sh&quot;\\nexec_command = [&quot;/etc/gobetween/scripts/discovery/exec_discovery.sh&quot;, &quot;arg1&quot;, &quot;arg2&quot;]\\n</code></pre>\\n<h1 id=\\\"windows\\\">Windows</h1>\\n<pre><code class=\\\"lang-toml\\\"> exec_command = &#39;C:\\\\gobetween\\\\scripts\\\\healthchecks\\\\exec_healthcheck.bat&#39;\\n exec_command = [&#39;C:\\\\gobetween\\\\scripts\\\\discovery\\\\exec_discovery.bat&#39;, &#39;arg1&#39;, &#39;arg2&#39;]\\n</code></pre>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki/Windows-specific-notes.md\n// module id = 17\n// module chunks = 0","/* -----------------------------------------------\n/* Author : Vincent Garreau  - vincentgarreau.com\n/* MIT license: http://opensource.org/licenses/MIT\n/* Demo / Generator : vincentgarreau.com/particles.js\n/* GitHub : github.com/VincentGarreau/particles.js\n/* How to use? : Check the GitHub README\n/* v2.0.0\n/* ----------------------------------------------- */\n\nvar pJS = function(tag_id, params){\n\n  var canvas_el = document.querySelector('#'+tag_id+' > .particles-js-canvas-el');\n\n  /* particles.js variables with default values */\n  this.pJS = {\n    canvas: {\n      el: canvas_el,\n      w: canvas_el.offsetWidth,\n      h: canvas_el.offsetHeight\n    },\n    particles: {\n      number: {\n        value: 400,\n        density: {\n          enable: true,\n          value_area: 800\n        }\n      },\n      color: {\n        value: '#fff'\n      },\n      shape: {\n        type: 'circle',\n        stroke: {\n          width: 0,\n          color: '#ff0000'\n        },\n        polygon: {\n          nb_sides: 5\n        },\n        image: {\n          src: '',\n          width: 100,\n          height: 100\n        }\n      },\n      opacity: {\n        value: 1,\n        random: false,\n        anim: {\n          enable: false,\n          speed: 2,\n          opacity_min: 0,\n          sync: false\n        }\n      },\n      size: {\n        value: 20,\n        random: false,\n        anim: {\n          enable: false,\n          speed: 20,\n          size_min: 0,\n          sync: false\n        }\n      },\n      line_linked: {\n        enable: true,\n        distance: 100,\n        color: '#fff',\n        opacity: 1,\n        width: 1\n      },\n      move: {\n        enable: true,\n        speed: 2,\n        direction: 'none',\n        random: false,\n        straight: false,\n        out_mode: 'out',\n        bounce: false,\n        attract: {\n          enable: false,\n          rotateX: 3000,\n          rotateY: 3000\n        }\n      },\n      array: []\n    },\n    interactivity: {\n      detect_on: 'canvas',\n      events: {\n        onhover: {\n          enable: true,\n          mode: 'grab'\n        },\n        onclick: {\n          enable: true,\n          mode: 'push'\n        },\n        resize: true\n      },\n      modes: {\n        grab:{\n          distance: 100,\n          line_linked:{\n            opacity: 1\n          }\n        },\n        bubble:{\n          distance: 200,\n          size: 80,\n          duration: 0.4\n        },\n        repulse:{\n          distance: 200,\n          duration: 0.4\n        },\n        push:{\n          particles_nb: 4\n        },\n        remove:{\n          particles_nb: 2\n        }\n      },\n      mouse:{}\n    },\n    retina_detect: false,\n    fn: {\n      interact: {},\n      modes: {},\n      vendors:{}\n    },\n    tmp: {}\n  };\n\n  var pJS = this.pJS;\n\n  /* params settings */\n  if(params){\n    Object.deepExtend(pJS, params);\n  }\n\n  pJS.tmp.obj = {\n    size_value: pJS.particles.size.value,\n    size_anim_speed: pJS.particles.size.anim.speed,\n    move_speed: pJS.particles.move.speed,\n    line_linked_distance: pJS.particles.line_linked.distance,\n    line_linked_width: pJS.particles.line_linked.width,\n    mode_grab_distance: pJS.interactivity.modes.grab.distance,\n    mode_bubble_distance: pJS.interactivity.modes.bubble.distance,\n    mode_bubble_size: pJS.interactivity.modes.bubble.size,\n    mode_repulse_distance: pJS.interactivity.modes.repulse.distance\n  };\n\n\n  pJS.fn.retinaInit = function(){\n\n    if(pJS.retina_detect && window.devicePixelRatio > 1){\n      pJS.canvas.pxratio = window.devicePixelRatio; \n      pJS.tmp.retina = true;\n    } \n    else{\n      pJS.canvas.pxratio = 1;\n      pJS.tmp.retina = false;\n    }\n\n    pJS.canvas.w = pJS.canvas.el.offsetWidth * pJS.canvas.pxratio;\n    pJS.canvas.h = pJS.canvas.el.offsetHeight * pJS.canvas.pxratio;\n\n    pJS.particles.size.value = pJS.tmp.obj.size_value * pJS.canvas.pxratio;\n    pJS.particles.size.anim.speed = pJS.tmp.obj.size_anim_speed * pJS.canvas.pxratio;\n    pJS.particles.move.speed = pJS.tmp.obj.move_speed * pJS.canvas.pxratio;\n    pJS.particles.line_linked.distance = pJS.tmp.obj.line_linked_distance * pJS.canvas.pxratio;\n    pJS.interactivity.modes.grab.distance = pJS.tmp.obj.mode_grab_distance * pJS.canvas.pxratio;\n    pJS.interactivity.modes.bubble.distance = pJS.tmp.obj.mode_bubble_distance * pJS.canvas.pxratio;\n    pJS.particles.line_linked.width = pJS.tmp.obj.line_linked_width * pJS.canvas.pxratio;\n    pJS.interactivity.modes.bubble.size = pJS.tmp.obj.mode_bubble_size * pJS.canvas.pxratio;\n    pJS.interactivity.modes.repulse.distance = pJS.tmp.obj.mode_repulse_distance * pJS.canvas.pxratio;\n\n  };\n\n\n\n  /* ---------- pJS functions - canvas ------------ */\n\n  pJS.fn.canvasInit = function(){\n    pJS.canvas.ctx = pJS.canvas.el.getContext('2d');\n  };\n\n  pJS.fn.canvasSize = function(){\n\n    pJS.canvas.el.width = pJS.canvas.w;\n    pJS.canvas.el.height = pJS.canvas.h;\n\n    if(pJS && pJS.interactivity.events.resize){\n\n      window.addEventListener('resize', function(){\n\n          pJS.canvas.w = pJS.canvas.el.offsetWidth;\n          pJS.canvas.h = pJS.canvas.el.offsetHeight;\n\n          /* resize canvas */\n          if(pJS.tmp.retina){\n            pJS.canvas.w *= pJS.canvas.pxratio;\n            pJS.canvas.h *= pJS.canvas.pxratio;\n          }\n\n          pJS.canvas.el.width = pJS.canvas.w;\n          pJS.canvas.el.height = pJS.canvas.h;\n\n          /* repaint canvas on anim disabled */\n          if(!pJS.particles.move.enable){\n            pJS.fn.particlesEmpty();\n            pJS.fn.particlesCreate();\n            pJS.fn.particlesDraw();\n            pJS.fn.vendors.densityAutoParticles();\n          }\n\n        /* density particles enabled */\n        pJS.fn.vendors.densityAutoParticles();\n\n      });\n\n    }\n\n  };\n\n\n  pJS.fn.canvasPaint = function(){\n    pJS.canvas.ctx.fillRect(0, 0, pJS.canvas.w, pJS.canvas.h);\n  };\n\n  pJS.fn.canvasClear = function(){\n    pJS.canvas.ctx.clearRect(0, 0, pJS.canvas.w, pJS.canvas.h);\n  };\n\n\n  /* --------- pJS functions - particles ----------- */\n\n  pJS.fn.particle = function(color, opacity, position){\n\n    /* size */\n    this.radius = (pJS.particles.size.random ? Math.random() : 1) * pJS.particles.size.value;\n    if(pJS.particles.size.anim.enable){\n      this.size_status = false;\n      this.vs = pJS.particles.size.anim.speed / 100;\n      if(!pJS.particles.size.anim.sync){\n        this.vs = this.vs * Math.random();\n      }\n    }\n\n    /* position */\n    this.x = position ? position.x : Math.random() * pJS.canvas.w;\n    this.y = position ? position.y : Math.random() * pJS.canvas.h;\n\n    /* check position  - into the canvas */\n    if(this.x > pJS.canvas.w - this.radius*2) this.x = this.x - this.radius;\n    else if(this.x < this.radius*2) this.x = this.x + this.radius;\n    if(this.y > pJS.canvas.h - this.radius*2) this.y = this.y - this.radius;\n    else if(this.y < this.radius*2) this.y = this.y + this.radius;\n\n    /* check position - avoid overlap */\n    if(pJS.particles.move.bounce){\n      pJS.fn.vendors.checkOverlap(this, position);\n    }\n\n    /* color */\n    this.color = {};\n    if(typeof(color.value) == 'object'){\n\n      if(color.value instanceof Array){\n        var color_selected = color.value[Math.floor(Math.random() * pJS.particles.color.value.length)];\n        this.color.rgb = hexToRgb(color_selected);\n      }else{\n        if(color.value.r != undefined && color.value.g != undefined && color.value.b != undefined){\n          this.color.rgb = {\n            r: color.value.r,\n            g: color.value.g,\n            b: color.value.b\n          }\n        }\n        if(color.value.h != undefined && color.value.s != undefined && color.value.l != undefined){\n          this.color.hsl = {\n            h: color.value.h,\n            s: color.value.s,\n            l: color.value.l\n          }\n        }\n      }\n\n    }\n    else if(color.value == 'random'){\n      this.color.rgb = {\n        r: (Math.floor(Math.random() * (255 - 0 + 1)) + 0),\n        g: (Math.floor(Math.random() * (255 - 0 + 1)) + 0),\n        b: (Math.floor(Math.random() * (255 - 0 + 1)) + 0)\n      }\n    }\n    else if(typeof(color.value) == 'string'){\n      this.color = color;\n      this.color.rgb = hexToRgb(this.color.value);\n    }\n\n    /* opacity */\n    this.opacity = (pJS.particles.opacity.random ? Math.random() : 1) * pJS.particles.opacity.value;\n    if(pJS.particles.opacity.anim.enable){\n      this.opacity_status = false;\n      this.vo = pJS.particles.opacity.anim.speed / 100;\n      if(!pJS.particles.opacity.anim.sync){\n        this.vo = this.vo * Math.random();\n      }\n    }\n\n    /* animation - velocity for speed */\n    var velbase = {}\n    switch(pJS.particles.move.direction){\n      case 'top':\n        velbase = { x:0, y:-1 };\n      break;\n      case 'top-right':\n        velbase = { x:0.5, y:-0.5 };\n      break;\n      case 'right':\n        velbase = { x:1, y:-0 };\n      break;\n      case 'bottom-right':\n        velbase = { x:0.5, y:0.5 };\n      break;\n      case 'bottom':\n        velbase = { x:0, y:1 };\n      break;\n      case 'bottom-left':\n        velbase = { x:-0.5, y:1 };\n      break;\n      case 'left':\n        velbase = { x:-1, y:0 };\n      break;\n      case 'top-left':\n        velbase = { x:-0.5, y:-0.5 };\n      break;\n      default:\n        velbase = { x:0, y:0 };\n      break;\n    }\n\n    if(pJS.particles.move.straight){\n      this.vx = velbase.x;\n      this.vy = velbase.y;\n      if(pJS.particles.move.random){\n        this.vx = this.vx * (Math.random());\n        this.vy = this.vy * (Math.random());\n      }\n    }else{\n      this.vx = velbase.x + Math.random()-0.5;\n      this.vy = velbase.y + Math.random()-0.5;\n    }\n\n    // var theta = 2.0 * Math.PI * Math.random();\n    // this.vx = Math.cos(theta);\n    // this.vy = Math.sin(theta);\n\n    this.vx_i = this.vx;\n    this.vy_i = this.vy;\n\n    \n\n    /* if shape is image */\n\n    var shape_type = pJS.particles.shape.type;\n    if(typeof(shape_type) == 'object'){\n      if(shape_type instanceof Array){\n        var shape_selected = shape_type[Math.floor(Math.random() * shape_type.length)];\n        this.shape = shape_selected;\n      }\n    }else{\n      this.shape = shape_type;\n    }\n\n    if(this.shape == 'image'){\n      var sh = pJS.particles.shape;\n      this.img = {\n        src: sh.image.src,\n        ratio: sh.image.width / sh.image.height\n      }\n      if(!this.img.ratio) this.img.ratio = 1;\n      if(pJS.tmp.img_type == 'svg__' && pJS.tmp.source_svg != undefined){\n        pJS.fn.vendors.createSvgImg(this);\n        if(pJS.tmp.pushing){\n          this.img.loaded = false;\n        }\n      }\n    }\n\n    \n\n  };\n\n\n  pJS.fn.particle.prototype.draw = function() {\n\n    var p = this;\n\n    if(p.radius_bubble != undefined){\n      var radius = p.radius_bubble; \n    }else{\n      var radius = p.radius;\n    }\n\n    if(p.opacity_bubble != undefined){\n      var opacity = p.opacity_bubble;\n    }else{\n      var opacity = p.opacity;\n    }\n\n    if(p.color.rgb){\n      var color_value = 'rgba('+p.color.rgb.r+','+p.color.rgb.g+','+p.color.rgb.b+','+opacity+')';\n    }else{\n      var color_value = 'hsla('+p.color.hsl.h+','+p.color.hsl.s+'%,'+p.color.hsl.l+'%,'+opacity+')';\n    }\n\n    pJS.canvas.ctx.fillStyle = color_value;\n    pJS.canvas.ctx.beginPath();\n\n    switch(p.shape){\n\n      case 'circle':\n        pJS.canvas.ctx.arc(p.x, p.y, radius, 0, Math.PI * 2, false);\n      break;\n\n      case 'edge':\n        pJS.canvas.ctx.rect(p.x-radius, p.y-radius, radius*2, radius*2);\n      break;\n\n      case 'triangle':\n        pJS.fn.vendors.drawShape(pJS.canvas.ctx, p.x-radius, p.y+radius / 1.66, radius*2, 3, 2);\n      break;\n\n      case 'polygon':\n        pJS.fn.vendors.drawShape(\n          pJS.canvas.ctx,\n          p.x - radius / (pJS.particles.shape.polygon.nb_sides/3.5), // startX\n          p.y - radius / (2.66/3.5), // startY\n          radius*2.66 / (pJS.particles.shape.polygon.nb_sides/3), // sideLength\n          pJS.particles.shape.polygon.nb_sides, // sideCountNumerator\n          1 // sideCountDenominator\n        );\n      break;\n\n      case 'star':\n        pJS.fn.vendors.drawShape(\n          pJS.canvas.ctx,\n          p.x - radius*2 / (pJS.particles.shape.polygon.nb_sides/4), // startX\n          p.y - radius / (2*2.66/3.5), // startY\n          radius*2*2.66 / (pJS.particles.shape.polygon.nb_sides/3), // sideLength\n          pJS.particles.shape.polygon.nb_sides, // sideCountNumerator\n          2 // sideCountDenominator\n        );\n      break;\n\n      case 'image':\n\n        function draw(){\n          pJS.canvas.ctx.drawImage(\n            img_obj,\n            p.x-radius,\n            p.y-radius,\n            radius*2,\n            radius*2 / p.img.ratio\n          );\n        }\n\n        if(pJS.tmp.img_type == 'svg__'){\n          var img_obj = p.img.obj;\n        }else{\n          var img_obj = pJS.tmp.img_obj;\n        }\n\n        if(img_obj){\n          draw();\n        }\n\n      break;\n\n    }\n\n    pJS.canvas.ctx.closePath();\n\n    if(pJS.particles.shape.stroke.width > 0){\n      pJS.canvas.ctx.strokeStyle = pJS.particles.shape.stroke.color;\n      pJS.canvas.ctx.lineWidth = pJS.particles.shape.stroke.width;\n      pJS.canvas.ctx.stroke();\n    }\n    \n    pJS.canvas.ctx.fill();\n    \n  };\n\n\n  pJS.fn.particlesCreate = function(){\n    for(var i = 0; i < pJS.particles.number.value; i++) {\n      pJS.particles.array.push(new pJS.fn.particle(pJS.particles.color, pJS.particles.opacity.value));\n    }\n  };\n\n  pJS.fn.particlesUpdate = function(){\n\n    for(var i = 0; i < pJS.particles.array.length; i++){\n\n      /* the particle */\n      var p = pJS.particles.array[i];\n\n      // var d = ( dx = pJS.interactivity.mouse.click_pos_x - p.x ) * dx + ( dy = pJS.interactivity.mouse.click_pos_y - p.y ) * dy;\n      // var f = -BANG_SIZE / d;\n      // if ( d < BANG_SIZE ) {\n      //     var t = Math.atan2( dy, dx );\n      //     p.vx = f * Math.cos(t);\n      //     p.vy = f * Math.sin(t);\n      // }\n\n      /* move the particle */\n      if(pJS.particles.move.enable){\n        var ms = pJS.particles.move.speed/2;\n        p.x += p.vx * ms;\n        p.y += p.vy * ms;\n      }\n\n      /* change opacity status */\n      if(pJS.particles.opacity.anim.enable) {\n        if(p.opacity_status == true) {\n          if(p.opacity >= pJS.particles.opacity.value) p.opacity_status = false;\n          p.opacity += p.vo;\n        }else {\n          if(p.opacity <= pJS.particles.opacity.anim.opacity_min) p.opacity_status = true;\n          p.opacity -= p.vo;\n        }\n        if(p.opacity < 0) p.opacity = 0;\n      }\n\n      /* change size */\n      if(pJS.particles.size.anim.enable){\n        if(p.size_status == true){\n          if(p.radius >= pJS.particles.size.value) p.size_status = false;\n          p.radius += p.vs;\n        }else{\n          if(p.radius <= pJS.particles.size.anim.size_min) p.size_status = true;\n          p.radius -= p.vs;\n        }\n        if(p.radius < 0) p.radius = 0;\n      }\n\n      /* change particle position if it is out of canvas */\n      if(pJS.particles.move.out_mode == 'bounce'){\n        var new_pos = {\n          x_left: p.radius,\n          x_right:  pJS.canvas.w,\n          y_top: p.radius,\n          y_bottom: pJS.canvas.h\n        }\n      }else{\n        var new_pos = {\n          x_left: -p.radius,\n          x_right: pJS.canvas.w + p.radius,\n          y_top: -p.radius,\n          y_bottom: pJS.canvas.h + p.radius\n        }\n      }\n\n      if(p.x - p.radius > pJS.canvas.w){\n        p.x = new_pos.x_left;\n        p.y = Math.random() * pJS.canvas.h;\n      }\n      else if(p.x + p.radius < 0){\n        p.x = new_pos.x_right;\n        p.y = Math.random() * pJS.canvas.h;\n      }\n      if(p.y - p.radius > pJS.canvas.h){\n        p.y = new_pos.y_top;\n        p.x = Math.random() * pJS.canvas.w;\n      }\n      else if(p.y + p.radius < 0){\n        p.y = new_pos.y_bottom;\n        p.x = Math.random() * pJS.canvas.w;\n      }\n\n      /* out of canvas modes */\n      switch(pJS.particles.move.out_mode){\n        case 'bounce':\n          if (p.x + p.radius > pJS.canvas.w) p.vx = -p.vx;\n          else if (p.x - p.radius < 0) p.vx = -p.vx;\n          if (p.y + p.radius > pJS.canvas.h) p.vy = -p.vy;\n          else if (p.y - p.radius < 0) p.vy = -p.vy;\n        break;\n      }\n\n      /* events */\n      if(isInArray('grab', pJS.interactivity.events.onhover.mode)){\n        pJS.fn.modes.grabParticle(p);\n      }\n\n      if(isInArray('bubble', pJS.interactivity.events.onhover.mode) || isInArray('bubble', pJS.interactivity.events.onclick.mode)){\n        pJS.fn.modes.bubbleParticle(p);\n      }\n\n      if(isInArray('repulse', pJS.interactivity.events.onhover.mode) || isInArray('repulse', pJS.interactivity.events.onclick.mode)){\n        pJS.fn.modes.repulseParticle(p);\n      }\n\n      /* interaction auto between particles */\n      if(pJS.particles.line_linked.enable || pJS.particles.move.attract.enable){\n        for(var j = i + 1; j < pJS.particles.array.length; j++){\n          var p2 = pJS.particles.array[j];\n\n          /* link particles */\n          if(pJS.particles.line_linked.enable){\n            pJS.fn.interact.linkParticles(p,p2);\n          }\n\n          /* attract particles */\n          if(pJS.particles.move.attract.enable){\n            pJS.fn.interact.attractParticles(p,p2);\n          }\n\n          /* bounce particles */\n          if(pJS.particles.move.bounce){\n            pJS.fn.interact.bounceParticles(p,p2);\n          }\n\n        }\n      }\n\n\n    }\n\n  };\n\n  pJS.fn.particlesDraw = function(){\n\n    /* clear canvas */\n    pJS.canvas.ctx.clearRect(0, 0, pJS.canvas.w, pJS.canvas.h);\n\n    /* update each particles param */\n    pJS.fn.particlesUpdate();\n\n    /* draw each particle */\n    for(var i = 0; i < pJS.particles.array.length; i++){\n      var p = pJS.particles.array[i];\n      p.draw();\n    }\n\n  };\n\n  pJS.fn.particlesEmpty = function(){\n    pJS.particles.array = [];\n  };\n\n  pJS.fn.particlesRefresh = function(){\n\n    /* init all */\n    cancelRequestAnimFrame(pJS.fn.checkAnimFrame);\n    cancelRequestAnimFrame(pJS.fn.drawAnimFrame);\n    pJS.tmp.source_svg = undefined;\n    pJS.tmp.img_obj = undefined;\n    pJS.tmp.count_svg = 0;\n    pJS.fn.particlesEmpty();\n    pJS.fn.canvasClear();\n    \n    /* restart */\n    pJS.fn.vendors.start();\n\n  };\n\n\n  /* ---------- pJS functions - particles interaction ------------ */\n\n  pJS.fn.interact.linkParticles = function(p1, p2){\n\n    var dx = p1.x - p2.x,\n        dy = p1.y - p2.y,\n        dist = Math.sqrt(dx*dx + dy*dy);\n\n    /* draw a line between p1 and p2 if the distance between them is under the config distance */\n    if(dist <= pJS.particles.line_linked.distance){\n\n      var opacity_line = pJS.particles.line_linked.opacity - (dist / (1/pJS.particles.line_linked.opacity)) / pJS.particles.line_linked.distance;\n\n      if(opacity_line > 0){        \n        \n        /* style */\n        var color_line = pJS.particles.line_linked.color_rgb_line;\n        pJS.canvas.ctx.strokeStyle = 'rgba('+color_line.r+','+color_line.g+','+color_line.b+','+opacity_line+')';\n        pJS.canvas.ctx.lineWidth = pJS.particles.line_linked.width;\n        //pJS.canvas.ctx.lineCap = 'round'; /* performance issue */\n        \n        /* path */\n        pJS.canvas.ctx.beginPath();\n        pJS.canvas.ctx.moveTo(p1.x, p1.y);\n        pJS.canvas.ctx.lineTo(p2.x, p2.y);\n        pJS.canvas.ctx.stroke();\n        pJS.canvas.ctx.closePath();\n\n      }\n\n    }\n\n  };\n\n\n  pJS.fn.interact.attractParticles  = function(p1, p2){\n\n    /* condensed particles */\n    var dx = p1.x - p2.x,\n        dy = p1.y - p2.y,\n        dist = Math.sqrt(dx*dx + dy*dy);\n\n    if(dist <= pJS.particles.line_linked.distance){\n\n      var ax = dx/(pJS.particles.move.attract.rotateX*1000),\n          ay = dy/(pJS.particles.move.attract.rotateY*1000);\n\n      p1.vx -= ax;\n      p1.vy -= ay;\n\n      p2.vx += ax;\n      p2.vy += ay;\n\n    }\n    \n\n  }\n\n\n  pJS.fn.interact.bounceParticles = function(p1, p2){\n\n    var dx = p1.x - p2.x,\n        dy = p1.y - p2.y,\n        dist = Math.sqrt(dx*dx + dy*dy),\n        dist_p = p1.radius+p2.radius;\n\n    if(dist <= dist_p){\n      p1.vx = -p1.vx;\n      p1.vy = -p1.vy;\n\n      p2.vx = -p2.vx;\n      p2.vy = -p2.vy;\n    }\n\n  }\n\n\n  /* ---------- pJS functions - modes events ------------ */\n\n  pJS.fn.modes.pushParticles = function(nb, pos){\n\n    pJS.tmp.pushing = true;\n\n    for(var i = 0; i < nb; i++){\n      pJS.particles.array.push(\n        new pJS.fn.particle(\n          pJS.particles.color,\n          pJS.particles.opacity.value,\n          {\n            'x': pos ? pos.pos_x : Math.random() * pJS.canvas.w,\n            'y': pos ? pos.pos_y : Math.random() * pJS.canvas.h\n          }\n        )\n      )\n      if(i == nb-1){\n        if(!pJS.particles.move.enable){\n          pJS.fn.particlesDraw();\n        }\n        pJS.tmp.pushing = false;\n      }\n    }\n\n  };\n\n\n  pJS.fn.modes.removeParticles = function(nb){\n\n    pJS.particles.array.splice(0, nb);\n    if(!pJS.particles.move.enable){\n      pJS.fn.particlesDraw();\n    }\n\n  };\n\n\n  pJS.fn.modes.bubbleParticle = function(p){\n\n    /* on hover event */\n    if(pJS.interactivity.events.onhover.enable && isInArray('bubble', pJS.interactivity.events.onhover.mode)){\n\n      var dx_mouse = p.x - pJS.interactivity.mouse.pos_x,\n          dy_mouse = p.y - pJS.interactivity.mouse.pos_y,\n          dist_mouse = Math.sqrt(dx_mouse*dx_mouse + dy_mouse*dy_mouse),\n          ratio = 1 - dist_mouse / pJS.interactivity.modes.bubble.distance;\n\n      function init(){\n        p.opacity_bubble = p.opacity;\n        p.radius_bubble = p.radius;\n      }\n\n      /* mousemove - check ratio */\n      if(dist_mouse <= pJS.interactivity.modes.bubble.distance){\n\n        if(ratio >= 0 && pJS.interactivity.status == 'mousemove'){\n          \n          /* size */\n          if(pJS.interactivity.modes.bubble.size != pJS.particles.size.value){\n\n            if(pJS.interactivity.modes.bubble.size > pJS.particles.size.value){\n              var size = p.radius + (pJS.interactivity.modes.bubble.size*ratio);\n              if(size >= 0){\n                p.radius_bubble = size;\n              }\n            }else{\n              var dif = p.radius - pJS.interactivity.modes.bubble.size,\n                  size = p.radius - (dif*ratio);\n              if(size > 0){\n                p.radius_bubble = size;\n              }else{\n                p.radius_bubble = 0;\n              }\n            }\n\n          }\n\n          /* opacity */\n          if(pJS.interactivity.modes.bubble.opacity != pJS.particles.opacity.value){\n\n            if(pJS.interactivity.modes.bubble.opacity > pJS.particles.opacity.value){\n              var opacity = pJS.interactivity.modes.bubble.opacity*ratio;\n              if(opacity > p.opacity && opacity <= pJS.interactivity.modes.bubble.opacity){\n                p.opacity_bubble = opacity;\n              }\n            }else{\n              var opacity = p.opacity - (pJS.particles.opacity.value-pJS.interactivity.modes.bubble.opacity)*ratio;\n              if(opacity < p.opacity && opacity >= pJS.interactivity.modes.bubble.opacity){\n                p.opacity_bubble = opacity;\n              }\n            }\n\n          }\n\n        }\n\n      }else{\n        init();\n      }\n\n\n      /* mouseleave */\n      if(pJS.interactivity.status == 'mouseleave'){\n        init();\n      }\n    \n    }\n\n    /* on click event */\n    else if(pJS.interactivity.events.onclick.enable && isInArray('bubble', pJS.interactivity.events.onclick.mode)){\n\n\n      if(pJS.tmp.bubble_clicking){\n        var dx_mouse = p.x - pJS.interactivity.mouse.click_pos_x,\n            dy_mouse = p.y - pJS.interactivity.mouse.click_pos_y,\n            dist_mouse = Math.sqrt(dx_mouse*dx_mouse + dy_mouse*dy_mouse),\n            time_spent = (new Date().getTime() - pJS.interactivity.mouse.click_time)/1000;\n\n        if(time_spent > pJS.interactivity.modes.bubble.duration){\n          pJS.tmp.bubble_duration_end = true;\n        }\n\n        if(time_spent > pJS.interactivity.modes.bubble.duration*2){\n          pJS.tmp.bubble_clicking = false;\n          pJS.tmp.bubble_duration_end = false;\n        }\n      }\n\n\n      function process(bubble_param, particles_param, p_obj_bubble, p_obj, id){\n\n        if(bubble_param != particles_param){\n\n          if(!pJS.tmp.bubble_duration_end){\n            if(dist_mouse <= pJS.interactivity.modes.bubble.distance){\n              if(p_obj_bubble != undefined) var obj = p_obj_bubble;\n              else var obj = p_obj;\n              if(obj != bubble_param){\n                var value = p_obj - (time_spent * (p_obj - bubble_param) / pJS.interactivity.modes.bubble.duration);\n                if(id == 'size') p.radius_bubble = value;\n                if(id == 'opacity') p.opacity_bubble = value;\n              }\n            }else{\n              if(id == 'size') p.radius_bubble = undefined;\n              if(id == 'opacity') p.opacity_bubble = undefined;\n            }\n          }else{\n            if(p_obj_bubble != undefined){\n              var value_tmp = p_obj - (time_spent * (p_obj - bubble_param) / pJS.interactivity.modes.bubble.duration),\n                  dif = bubble_param - value_tmp;\n                  value = bubble_param + dif;\n              if(id == 'size') p.radius_bubble = value;\n              if(id == 'opacity') p.opacity_bubble = value;\n            }\n          }\n\n        }\n\n      }\n\n      if(pJS.tmp.bubble_clicking){\n        /* size */\n        process(pJS.interactivity.modes.bubble.size, pJS.particles.size.value, p.radius_bubble, p.radius, 'size');\n        /* opacity */\n        process(pJS.interactivity.modes.bubble.opacity, pJS.particles.opacity.value, p.opacity_bubble, p.opacity, 'opacity');\n      }\n\n    }\n\n  };\n\n\n  pJS.fn.modes.repulseParticle = function(p){\n\n    if(pJS.interactivity.events.onhover.enable && isInArray('repulse', pJS.interactivity.events.onhover.mode) && pJS.interactivity.status == 'mousemove') {\n\n      var dx_mouse = p.x - pJS.interactivity.mouse.pos_x,\n          dy_mouse = p.y - pJS.interactivity.mouse.pos_y,\n          dist_mouse = Math.sqrt(dx_mouse*dx_mouse + dy_mouse*dy_mouse);\n\n      var normVec = {x: dx_mouse/dist_mouse, y: dy_mouse/dist_mouse},\n          repulseRadius = pJS.interactivity.modes.repulse.distance,\n          velocity = 100,\n          repulseFactor = clamp((1/repulseRadius)*(-1*Math.pow(dist_mouse/repulseRadius,2)+1)*repulseRadius*velocity, 0, 50);\n      \n      var pos = {\n        x: p.x + normVec.x * repulseFactor,\n        y: p.y + normVec.y * repulseFactor\n      }\n\n      if(pJS.particles.move.out_mode == 'bounce'){\n        if(pos.x - p.radius > 0 && pos.x + p.radius < pJS.canvas.w) p.x = pos.x;\n        if(pos.y - p.radius > 0 && pos.y + p.radius < pJS.canvas.h) p.y = pos.y;\n      }else{\n        p.x = pos.x;\n        p.y = pos.y;\n      }\n    \n    }\n\n\n    else if(pJS.interactivity.events.onclick.enable && isInArray('repulse', pJS.interactivity.events.onclick.mode)) {\n\n      if(!pJS.tmp.repulse_finish){\n        pJS.tmp.repulse_count++;\n        if(pJS.tmp.repulse_count == pJS.particles.array.length){\n          pJS.tmp.repulse_finish = true;\n        }\n      }\n\n      if(pJS.tmp.repulse_clicking){\n\n        var repulseRadius = Math.pow(pJS.interactivity.modes.repulse.distance/6, 3);\n\n        var dx = pJS.interactivity.mouse.click_pos_x - p.x,\n            dy = pJS.interactivity.mouse.click_pos_y - p.y,\n            d = dx*dx + dy*dy;\n\n        var force = -repulseRadius / d * 1;\n\n        function process(){\n\n          var f = Math.atan2(dy,dx);\n          p.vx = force * Math.cos(f);\n          p.vy = force * Math.sin(f);\n\n          if(pJS.particles.move.out_mode == 'bounce'){\n            var pos = {\n              x: p.x + p.vx,\n              y: p.y + p.vy\n            }\n            if (pos.x + p.radius > pJS.canvas.w) p.vx = -p.vx;\n            else if (pos.x - p.radius < 0) p.vx = -p.vx;\n            if (pos.y + p.radius > pJS.canvas.h) p.vy = -p.vy;\n            else if (pos.y - p.radius < 0) p.vy = -p.vy;\n          }\n\n        }\n\n        // default\n        if(d <= repulseRadius){\n          process();\n        }\n\n        // bang - slow motion mode\n        // if(!pJS.tmp.repulse_finish){\n        //   if(d <= repulseRadius){\n        //     process();\n        //   }\n        // }else{\n        //   process();\n        // }\n        \n\n      }else{\n\n        if(pJS.tmp.repulse_clicking == false){\n\n          p.vx = p.vx_i;\n          p.vy = p.vy_i;\n        \n        }\n\n      }\n\n    }\n\n  }\n\n\n  pJS.fn.modes.grabParticle = function(p){\n\n    if(pJS.interactivity.events.onhover.enable && pJS.interactivity.status == 'mousemove'){\n\n      var dx_mouse = p.x - pJS.interactivity.mouse.pos_x,\n          dy_mouse = p.y - pJS.interactivity.mouse.pos_y,\n          dist_mouse = Math.sqrt(dx_mouse*dx_mouse + dy_mouse*dy_mouse);\n\n      /* draw a line between the cursor and the particle if the distance between them is under the config distance */\n      if(dist_mouse <= pJS.interactivity.modes.grab.distance){\n\n        var opacity_line = pJS.interactivity.modes.grab.line_linked.opacity - (dist_mouse / (1/pJS.interactivity.modes.grab.line_linked.opacity)) / pJS.interactivity.modes.grab.distance;\n\n        if(opacity_line > 0){\n\n          /* style */\n          var color_line = pJS.particles.line_linked.color_rgb_line;\n          pJS.canvas.ctx.strokeStyle = 'rgba('+color_line.r+','+color_line.g+','+color_line.b+','+opacity_line+')';\n          pJS.canvas.ctx.lineWidth = pJS.particles.line_linked.width;\n          //pJS.canvas.ctx.lineCap = 'round'; /* performance issue */\n          \n          /* path */\n          pJS.canvas.ctx.beginPath();\n          pJS.canvas.ctx.moveTo(p.x, p.y);\n          pJS.canvas.ctx.lineTo(pJS.interactivity.mouse.pos_x, pJS.interactivity.mouse.pos_y);\n          pJS.canvas.ctx.stroke();\n          pJS.canvas.ctx.closePath();\n\n        }\n\n      }\n\n    }\n\n  };\n\n\n\n  /* ---------- pJS functions - vendors ------------ */\n\n  pJS.fn.vendors.eventsListeners = function(){\n\n    /* events target element */\n    if(pJS.interactivity.detect_on == 'window'){\n      pJS.interactivity.el = window;\n    }else{\n      pJS.interactivity.el = pJS.canvas.el;\n    }\n\n\n    /* detect mouse pos - on hover / click event */\n    if(pJS.interactivity.events.onhover.enable || pJS.interactivity.events.onclick.enable){\n\n      /* el on mousemove */\n      pJS.interactivity.el.addEventListener('mousemove', function(e){\n\n        if(pJS.interactivity.el == window){\n          var pos_x = e.clientX,\n              pos_y = e.clientY;\n        }\n        else{\n          var pos_x = e.offsetX || e.clientX,\n              pos_y = e.offsetY || e.clientY;\n        }\n\n        pJS.interactivity.mouse.pos_x = pos_x;\n        pJS.interactivity.mouse.pos_y = pos_y;\n\n        if(pJS.tmp.retina){\n          pJS.interactivity.mouse.pos_x *= pJS.canvas.pxratio;\n          pJS.interactivity.mouse.pos_y *= pJS.canvas.pxratio;\n        }\n\n        pJS.interactivity.status = 'mousemove';\n\n      });\n\n      /* el on onmouseleave */\n      pJS.interactivity.el.addEventListener('mouseleave', function(e){\n\n        pJS.interactivity.mouse.pos_x = null;\n        pJS.interactivity.mouse.pos_y = null;\n        pJS.interactivity.status = 'mouseleave';\n\n      });\n\n    }\n\n    /* on click event */\n    if(pJS.interactivity.events.onclick.enable){\n\n      pJS.interactivity.el.addEventListener('click', function(){\n\n        pJS.interactivity.mouse.click_pos_x = pJS.interactivity.mouse.pos_x;\n        pJS.interactivity.mouse.click_pos_y = pJS.interactivity.mouse.pos_y;\n        pJS.interactivity.mouse.click_time = new Date().getTime();\n\n        if(pJS.interactivity.events.onclick.enable){\n\n          switch(pJS.interactivity.events.onclick.mode){\n\n            case 'push':\n              if(pJS.particles.move.enable){\n                pJS.fn.modes.pushParticles(pJS.interactivity.modes.push.particles_nb, pJS.interactivity.mouse);\n              }else{\n                if(pJS.interactivity.modes.push.particles_nb == 1){\n                  pJS.fn.modes.pushParticles(pJS.interactivity.modes.push.particles_nb, pJS.interactivity.mouse);\n                }\n                else if(pJS.interactivity.modes.push.particles_nb > 1){\n                  pJS.fn.modes.pushParticles(pJS.interactivity.modes.push.particles_nb);\n                }\n              }\n            break;\n\n            case 'remove':\n              pJS.fn.modes.removeParticles(pJS.interactivity.modes.remove.particles_nb);\n            break;\n\n            case 'bubble':\n              pJS.tmp.bubble_clicking = true;\n            break;\n\n            case 'repulse':\n              pJS.tmp.repulse_clicking = true;\n              pJS.tmp.repulse_count = 0;\n              pJS.tmp.repulse_finish = false;\n              setTimeout(function(){\n                pJS.tmp.repulse_clicking = false;\n              }, pJS.interactivity.modes.repulse.duration*1000)\n            break;\n\n          }\n\n        }\n\n      });\n        \n    }\n\n\n  };\n\n  pJS.fn.vendors.densityAutoParticles = function(){\n\n    if(pJS.particles.number.density.enable){\n\n      /* calc area */\n      var area = pJS.canvas.el.width * pJS.canvas.el.height / 1000;\n      if(pJS.tmp.retina){\n        area = area/(pJS.canvas.pxratio*2);\n      }\n\n      /* calc number of particles based on density area */\n      var nb_particles = area * pJS.particles.number.value / pJS.particles.number.density.value_area;\n\n      /* add or remove X particles */\n      var missing_particles = pJS.particles.array.length - nb_particles;\n      if(missing_particles < 0) pJS.fn.modes.pushParticles(Math.abs(missing_particles));\n      else pJS.fn.modes.removeParticles(missing_particles);\n\n    }\n\n  };\n\n\n  pJS.fn.vendors.checkOverlap = function(p1, position){\n    for(var i = 0; i < pJS.particles.array.length; i++){\n      var p2 = pJS.particles.array[i];\n\n      var dx = p1.x - p2.x,\n          dy = p1.y - p2.y,\n          dist = Math.sqrt(dx*dx + dy*dy);\n\n      if(dist <= p1.radius + p2.radius){\n        p1.x = position ? position.x : Math.random() * pJS.canvas.w;\n        p1.y = position ? position.y : Math.random() * pJS.canvas.h;\n        pJS.fn.vendors.checkOverlap(p1);\n      }\n    }\n  };\n\n\n  pJS.fn.vendors.createSvgImg = function(p){\n\n    /* set color to svg__ element */\n    var svgXml = pJS.tmp.source_svg,\n        rgbHex = /#([0-9A-F]{3,6})/gi,\n        coloredSvgXml = svgXml.replace(rgbHex, function (m, r, g, b) {\n          if(p.color.rgb){\n            var color_value = 'rgba('+p.color.rgb.r+','+p.color.rgb.g+','+p.color.rgb.b+','+p.opacity+')';\n          }else{\n            var color_value = 'hsla('+p.color.hsl.h+','+p.color.hsl.s+'%,'+p.color.hsl.l+'%,'+p.opacity+')';\n          }\n          return color_value;\n        });\n\n    /* prepare to create img with colored svg__ */\n    var svg = new Blob([coloredSvgXml], {type: 'image/svg__+xml;charset=utf-8'}),\n        DOMURL = window.URL || window.webkitURL || window,\n        url = DOMURL.createObjectURL(svg);\n\n    /* create particle img obj */\n    var img = new Image();\n    img.addEventListener('load', function(){\n      p.img.obj = img;\n      p.img.loaded = true;\n      DOMURL.revokeObjectURL(url);\n      pJS.tmp.count_svg++;\n    });\n    img.src = url;\n\n  };\n\n\n  pJS.fn.vendors.destroypJS = function(){\n    cancelAnimationFrame(pJS.fn.drawAnimFrame);\n    canvas_el.remove();\n    pJSDom = null;\n  };\n\n\n  pJS.fn.vendors.drawShape = function(c, startX, startY, sideLength, sideCountNumerator, sideCountDenominator){\n\n    // By Programming Thomas - https://programmingthomas.wordpress.com/2013/04/03/n-sided-shapes/\n    var sideCount = sideCountNumerator * sideCountDenominator;\n    var decimalSides = sideCountNumerator / sideCountDenominator;\n    var interiorAngleDegrees = (180 * (decimalSides - 2)) / decimalSides;\n    var interiorAngle = Math.PI - Math.PI * interiorAngleDegrees / 180; // convert to radians\n    c.save();\n    c.beginPath();\n    c.translate(startX, startY);\n    c.moveTo(0,0);\n    for (var i = 0; i < sideCount; i++) {\n      c.lineTo(sideLength,0);\n      c.translate(sideLength,0);\n      c.rotate(interiorAngle);\n    }\n    //c.stroke();\n    c.fill();\n    c.restore();\n\n  };\n\n  pJS.fn.vendors.exportImg = function(){\n    window.open(pJS.canvas.el.toDataURL('image/png'), '_blank');\n  };\n\n\n  pJS.fn.vendors.loadImg = function(type){\n\n    pJS.tmp.img_error = undefined;\n\n    if(pJS.particles.shape.image.src != ''){\n\n      if(type == 'svg__'){\n\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', pJS.particles.shape.image.src);\n        xhr.onreadystatechange = function (data) {\n          if(xhr.readyState == 4){\n            if(xhr.status == 200){\n              pJS.tmp.source_svg = data.currentTarget.response;\n              pJS.fn.vendors.checkBeforeDraw();\n            }else{\n              console.log('Error pJS - Image not found');\n              pJS.tmp.img_error = true;\n            }\n          }\n        }\n        xhr.send();\n\n      }else{\n\n        var img = new Image();\n        img.addEventListener('load', function(){\n          pJS.tmp.img_obj = img;\n          pJS.fn.vendors.checkBeforeDraw();\n        });\n        img.src = pJS.particles.shape.image.src;\n\n      }\n\n    }else{\n      console.log('Error pJS - No image.src');\n      pJS.tmp.img_error = true;\n    }\n\n  };\n\n\n  pJS.fn.vendors.draw = function(){\n\n    if(pJS.particles.shape.type == 'image'){\n\n      if(pJS.tmp.img_type == 'svg__'){\n\n        if(pJS.tmp.count_svg >= pJS.particles.number.value){\n          pJS.fn.particlesDraw();\n          if(!pJS.particles.move.enable) cancelRequestAnimFrame(pJS.fn.drawAnimFrame);\n          else pJS.fn.drawAnimFrame = requestAnimFrame(pJS.fn.vendors.draw);\n        }else{\n          //console.log('still loading...');\n          if(!pJS.tmp.img_error) pJS.fn.drawAnimFrame = requestAnimFrame(pJS.fn.vendors.draw);\n        }\n\n      }else{\n\n        if(pJS.tmp.img_obj != undefined){\n          pJS.fn.particlesDraw();\n          if(!pJS.particles.move.enable) cancelRequestAnimFrame(pJS.fn.drawAnimFrame);\n          else pJS.fn.drawAnimFrame = requestAnimFrame(pJS.fn.vendors.draw);\n        }else{\n          if(!pJS.tmp.img_error) pJS.fn.drawAnimFrame = requestAnimFrame(pJS.fn.vendors.draw);\n        }\n\n      }\n\n    }else{\n      pJS.fn.particlesDraw();\n      if(!pJS.particles.move.enable) cancelRequestAnimFrame(pJS.fn.drawAnimFrame);\n      else pJS.fn.drawAnimFrame = requestAnimFrame(pJS.fn.vendors.draw);\n    }\n\n  };\n\n\n  pJS.fn.vendors.checkBeforeDraw = function(){\n\n    // if shape is image\n    if(pJS.particles.shape.type == 'image'){\n\n      if(pJS.tmp.img_type == 'svg__' && pJS.tmp.source_svg == undefined){\n        pJS.tmp.checkAnimFrame = requestAnimFrame(check);\n      }else{\n        //console.log('images loaded! cancel check');\n        cancelRequestAnimFrame(pJS.tmp.checkAnimFrame);\n        if(!pJS.tmp.img_error){\n          pJS.fn.vendors.init();\n          pJS.fn.vendors.draw();\n        }\n        \n      }\n\n    }else{\n      pJS.fn.vendors.init();\n      pJS.fn.vendors.draw();\n    }\n\n  };\n\n\n  pJS.fn.vendors.init = function(){\n\n    /* init canvas + particles */\n    pJS.fn.retinaInit();\n    pJS.fn.canvasInit();\n    pJS.fn.canvasSize();\n    pJS.fn.canvasPaint();\n    pJS.fn.particlesCreate();\n    pJS.fn.vendors.densityAutoParticles();\n\n    /* particles.line_linked - convert hex colors to rgb */\n    pJS.particles.line_linked.color_rgb_line = hexToRgb(pJS.particles.line_linked.color);\n\n  };\n\n\n  pJS.fn.vendors.start = function(){\n\n    if(isInArray('image', pJS.particles.shape.type)){\n      pJS.tmp.img_type = pJS.particles.shape.image.src.substr(pJS.particles.shape.image.src.length - 3);\n      pJS.fn.vendors.loadImg(pJS.tmp.img_type);\n    }else{\n      pJS.fn.vendors.checkBeforeDraw();\n    }\n\n  };\n\n\n\n\n  /* ---------- pJS - start ------------ */\n\n\n  pJS.fn.vendors.eventsListeners();\n\n  pJS.fn.vendors.start();\n  \n\n\n};\n\n/* ---------- global functions - vendors ------------ */\n\nObject.deepExtend = function someFunc (destination, source) {\n  for (var property in source) {\n    if (source[property] && source[property].constructor &&\n     source[property].constructor === Object) {\n      destination[property] = destination[property] || {};\n      someFunc(destination[property], source[property]);\n    } else {\n      destination[property] = source[property];\n    }\n  }\n  return destination;\n};\n\nwindow.requestAnimFrame = (function(){\n  return  window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame    ||\n    window.oRequestAnimationFrame      ||\n    window.msRequestAnimationFrame     ||\n    function(callback){\n      window.setTimeout(callback, 1000 / 60);\n    };\n})();\n\nwindow.cancelRequestAnimFrame = ( function() {\n  return window.cancelAnimationFrame         ||\n    window.webkitCancelRequestAnimationFrame ||\n    window.mozCancelRequestAnimationFrame    ||\n    window.oCancelRequestAnimationFrame      ||\n    window.msCancelRequestAnimationFrame     ||\n    clearTimeout\n} )();\n\nfunction hexToRgb(hex){\n  // By Tim Down - http://stackoverflow.com/a/5624139/3493650\n  // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n  var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n     return r + r + g + g + b + b;\n  });\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n  } : null;\n};\n\nfunction clamp(number, min, max) {\n  return Math.min(Math.max(number, min), max);\n};\n\nfunction isInArray(value, array) {\n  return array.indexOf(value) > -1;\n}\n\n\n/* ---------- particles.js functions - start ------------ */\n\nwindow.pJSDom = [];\n\nwindow.particlesJS = function(tag_id, params){\n\n  //console.log(params);\n\n  /* no string id? so it's object params, and set the id with default id */\n  if(typeof(tag_id) != 'string'){\n    params = tag_id;\n    tag_id = 'particles-js';\n  }\n\n  /* no id? set the id to default id */\n  if(!tag_id){\n    tag_id = 'particles-js';\n  }\n\n  /* pJS elements */\n  var pJS_tag = document.getElementById(tag_id),\n      pJS_canvas_class = 'particles-js-canvas-el',\n      exist_canvas = pJS_tag.getElementsByClassName(pJS_canvas_class);\n\n  /* remove canvas if exists into the pJS target tag */\n  if(exist_canvas.length){\n    while(exist_canvas.length > 0){\n      pJS_tag.removeChild(exist_canvas[0]);\n    }\n  }\n\n  /* create canvas element */\n  var canvas_el = document.createElement('canvas');\n  canvas_el.className = pJS_canvas_class;\n\n  /* set size canvas */\n  canvas_el.style.width = \"100%\";\n  canvas_el.style.height = \"100%\";\n\n  /* append canvas */\n  var canvas = document.getElementById(tag_id).appendChild(canvas_el);\n\n  /* launch particle.js */\n  if(canvas != null){\n    pJSDom.push(new pJS(tag_id, params));\n  }\n\n};\n\nwindow.particlesJS.load = function(tag_id, path_config_json, callback){\n\n  /* load json config */\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', path_config_json);\n  xhr.onreadystatechange = function (data) {\n    if(xhr.readyState == 4){\n      if(xhr.status == 200){\n        var params = JSON.parse(data.currentTarget.response);\n        window.particlesJS(tag_id, params);\n        if(callback) callback();\n      }else{\n        console.log('Error pJS - XMLHttpRequest status: '+xhr.status);\n        console.log('Error pJS - File config not found');\n      }\n    }\n  };\n  xhr.send();\n\n};\n\n/*** EXPORTS FROM exports-loader ***/\nexports[\"particlesJS\"] = (window.particlesJS);\nexports[\"pJSDom\"] = (window.pJSDom);\n\n\n// WEBPACK FOOTER //\n// ./js/particles.js","import Sidebar from '../gobetween.wiki/_Sidebar.md';\n\nconst page = location.pathname.match(/documentation/);\n\nif (page) {\n    const documentationSideBar = document.getElementsByClassName('documentation-side-bar')[0];\n    const loadDoc = (fileName) => {\n        if (!fileName) fileName = 'Introduction';\n        const link = document.querySelectorAll(`a[href=\"#${fileName}\"]`);\n        let file;\n\n        try {\n            file = require(`../gobetween.wiki/${fileName}.md`)\n        } catch (err) {\n            file = require(`../gobetween.wiki/Introduction.md`)\n        }\n\n        if (link.length) {\n            document.getElementsByClassName('documentation-content-title')[0].innerHTML = link[0].innerText;\n        }\n\n        document.getElementsByClassName('documentation-content')[0].innerHTML = file;\n    };\n\n    const scrollTo = (y, duration) => {\n        if (duration <= 0) return;\n        var difference = y - document.body.scrollTop;\n        var perTick = difference / duration * 10;\n\n        setTimeout(() => {\n            document.body.scrollTop = document.body.scrollTop + perTick;\n            if (document.body.scrollTop === y) return;\n            scrollTo(y, duration - 10);\n        }, 10);\n    };\n\n    const findPosY = (obj) => {\n        let curtop = 0;\n        if (obj.offsetParent) {\n            while (1) {\n                curtop+=obj.offsetTop;\n                if (!obj.offsetParent) {\n                    break;\n                }\n                obj=obj.offsetParent;\n            }\n        } else if (obj.y) {\n            curtop+=obj.y;\n        }\n        return curtop;\n    };\n\n    documentationSideBar.addEventListener('click', e => {\n        if (e.target.nodeName !== 'A') return;\n        e.preventDefault();\n        e.stopPropagation();\n        location.hash = e.target.attributes['href'].value;\n        const activeLink = document.querySelectorAll('.documentation-side-bar a.active')[0];\n        const title = document.getElementsByClassName('documentation-content-title')[0];\n        let y = 0;\n\n        window.screen.width > 768 ? y = title.offsetTop : y = findPosY(title);\n\n\n        activeLink && activeLink.classList.remove('active');\n\n        e.target.setAttribute('class', 'active');\n\n        scrollTo(y, 200);\n\n        loadDoc(location.hash.substr(1));\n    });\n\n    documentationSideBar.innerHTML = Sidebar.replace(new RegExp('href=\"', 'g'), 'href=\"#');\n\n    loadDoc(location.hash.substr(1));\n}\n\n\n// WEBPACK FOOTER //\n// ./js/doc.js","import Ajax from 'simple-ajax';\nimport { markdown } from 'markdown';\n\n\nconst page = location.pathname.match(/downloads/);\n\nif (page) {\n    const releases = new Ajax({\n        url: 'https://api.github.com/repos/yyyar/gobetween/releases',\n        method: 'GET',\n        dataType: 'json'\n    });\n\n    releases.on('success', (event, response) => {\n        const linksWrap = document.getElementsByClassName('release-links')[0];\n        const currentVer = document.getElementsByClassName('current-version')[0];\n        const lastVersion = response[0];\n\n        for (let i = 1; i < response.length; i++) {\n            const obj = response[i];\n            const a = document.createElement('a');\n            const br = document.createElement('br');\n            a.href = obj.html_url;\n            a.innerHTML = `[${obj.name}]`;\n            a.target = '_blank';\n            linksWrap.appendChild(a);\n            linksWrap.appendChild(br);\n        }\n\n        for (let j = 0; j < lastVersion.assets.length; j++) {\n            let os = lastVersion.assets[j];\n\n            os.name.match(/darwin_386/g) && document.getElementsByClassName('darwin-86')[0].setAttribute('href', os.browser_download_url);\n            os.name.match(/darwin_amd64/g) && document.getElementsByClassName('darwin-64')[0].setAttribute('href', os.browser_download_url);\n            os.name.match(/linux_386/g) && document.getElementsByClassName('linux-86')[0].setAttribute('href', os.browser_download_url);\n            os.name.match(/linux_amd64/g) && document.getElementsByClassName('linux-64')[0].setAttribute('href', os.browser_download_url);\n            os.name.match(/windows_386/g) && document.getElementsByClassName('windows-86')[0].setAttribute('href', os.browser_download_url);\n            os.name.match(/windows_amd64/g) && document.getElementsByClassName('windows-64')[0].setAttribute('href', os.browser_download_url);\n        }\n\n        currentVer.innerHTML = `v${lastVersion.name}`;\n\n        document.getElementsByClassName('release-content')[0].innerHTML = markdown.toHTML(lastVersion.body);\n    });\n\n    releases.on('error', (event, response) => {\n        console.log('error', event);\n    });\n\n    releases.send();\n}\n\n\n// WEBPACK FOOTER //\n// ./js/downloads.js","const sandwich = document.getElementById('mobile-sandwich');\n\nsandwich.addEventListener('click', e => {\n    const nav = e.target.parentNode.nextElementSibling;\n\n    if (nav.className === 'show-mob-nav') {\n        nav.className = '';\n    } else {\n        nav.className = 'show-mob-nav';\n    }\n});\n\n\n// WEBPACK FOOTER //\n// ./js/mobileNav.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./css/style.styl\n// module id = 22\n// module chunks = 0","// super simple module for the most common nodejs use case.\nexports.markdown = require(\"./markdown\");\nexports.parse = exports.markdown.toHTML;\n\n\n\n// WEBPACK FOOTER //\n// ../~/markdown/lib/index.js","// Released under MIT license\n// Copyright (c) 2009-2010 Dominic Baggott\n// Copyright (c) 2009-2010 Ash Berlin\n// Copyright (c) 2011 Christoph Dorn <christoph@christophdorn.com> (http://www.christophdorn.com)\n\n/*jshint browser:true, devel:true */\n\n(function( expose ) {\n\n/**\n *  class Markdown\n *\n *  Markdown processing in Javascript done right. We have very particular views\n *  on what constitutes 'right' which include:\n *\n *  - produces well-formed HTML (this means that em and strong nesting is\n *    important)\n *\n *  - has an intermediate representation to allow processing of parsed data (We\n *    in fact have two, both as [JsonML]: a markdown tree and an HTML tree).\n *\n *  - is easily extensible to add new dialects without having to rewrite the\n *    entire parsing mechanics\n *\n *  - has a good test suite\n *\n *  This implementation fulfills all of these (except that the test suite could\n *  do with expanding to automatically run all the fixtures from other Markdown\n *  implementations.)\n *\n *  ##### Intermediate Representation\n *\n *  *TODO* Talk about this :) Its JsonML, but document the node names we use.\n *\n *  [JsonML]: http://jsonml.org/ \"JSON Markup Language\"\n **/\nvar Markdown = expose.Markdown = function(dialect) {\n  switch (typeof dialect) {\n    case \"undefined\":\n      this.dialect = Markdown.dialects.Gruber;\n      break;\n    case \"object\":\n      this.dialect = dialect;\n      break;\n    default:\n      if ( dialect in Markdown.dialects ) {\n        this.dialect = Markdown.dialects[dialect];\n      }\n      else {\n        throw new Error(\"Unknown Markdown dialect '\" + String(dialect) + \"'\");\n      }\n      break;\n  }\n  this.em_state = [];\n  this.strong_state = [];\n  this.debug_indent = \"\";\n};\n\n/**\n *  parse( markdown, [dialect] ) -> JsonML\n *  - markdown (String): markdown string to parse\n *  - dialect (String | Dialect): the dialect to use, defaults to gruber\n *\n *  Parse `markdown` and return a markdown document as a Markdown.JsonML tree.\n **/\nexpose.parse = function( source, dialect ) {\n  // dialect will default if undefined\n  var md = new Markdown( dialect );\n  return md.toTree( source );\n};\n\n/**\n *  toHTML( markdown, [dialect]  ) -> String\n *  toHTML( md_tree ) -> String\n *  - markdown (String): markdown string to parse\n *  - md_tree (Markdown.JsonML): parsed markdown tree\n *\n *  Take markdown (either as a string or as a JsonML tree) and run it through\n *  [[toHTMLTree]] then turn it into a well-formated HTML fragment.\n **/\nexpose.toHTML = function toHTML( source , dialect , options ) {\n  var input = expose.toHTMLTree( source , dialect , options );\n\n  return expose.renderJsonML( input );\n};\n\n/**\n *  toHTMLTree( markdown, [dialect] ) -> JsonML\n *  toHTMLTree( md_tree ) -> JsonML\n *  - markdown (String): markdown string to parse\n *  - dialect (String | Dialect): the dialect to use, defaults to gruber\n *  - md_tree (Markdown.JsonML): parsed markdown tree\n *\n *  Turn markdown into HTML, represented as a JsonML tree. If a string is given\n *  to this function, it is first parsed into a markdown tree by calling\n *  [[parse]].\n **/\nexpose.toHTMLTree = function toHTMLTree( input, dialect , options ) {\n  // convert string input to an MD tree\n  if ( typeof input ===\"string\" ) input = this.parse( input, dialect );\n\n  // Now convert the MD tree to an HTML tree\n\n  // remove references from the tree\n  var attrs = extract_attr( input ),\n      refs = {};\n\n  if ( attrs && attrs.references ) {\n    refs = attrs.references;\n  }\n\n  var html = convert_tree_to_html( input, refs , options );\n  merge_text_nodes( html );\n  return html;\n};\n\n// For Spidermonkey based engines\nfunction mk_block_toSource() {\n  return \"Markdown.mk_block( \" +\n          uneval(this.toString()) +\n          \", \" +\n          uneval(this.trailing) +\n          \", \" +\n          uneval(this.lineNumber) +\n          \" )\";\n}\n\n// node\nfunction mk_block_inspect() {\n  var util = require(\"util\");\n  return \"Markdown.mk_block( \" +\n          util.inspect(this.toString()) +\n          \", \" +\n          util.inspect(this.trailing) +\n          \", \" +\n          util.inspect(this.lineNumber) +\n          \" )\";\n\n}\n\nvar mk_block = Markdown.mk_block = function(block, trail, line) {\n  // Be helpful for default case in tests.\n  if ( arguments.length == 1 ) trail = \"\\n\\n\";\n\n  var s = new String(block);\n  s.trailing = trail;\n  // To make it clear its not just a string\n  s.inspect = mk_block_inspect;\n  s.toSource = mk_block_toSource;\n\n  if ( line != undefined )\n    s.lineNumber = line;\n\n  return s;\n};\n\nfunction count_lines( str ) {\n  var n = 0, i = -1;\n  while ( ( i = str.indexOf(\"\\n\", i + 1) ) !== -1 ) n++;\n  return n;\n}\n\n// Internal - split source into rough blocks\nMarkdown.prototype.split_blocks = function splitBlocks( input, startLine ) {\n  input = input.replace(/(\\r\\n|\\n|\\r)/g, \"\\n\");\n  // [\\s\\S] matches _anything_ (newline or space)\n  // [^] is equivalent but doesn't work in IEs.\n  var re = /([\\s\\S]+?)($|\\n#|\\n(?:\\s*\\n|$)+)/g,\n      blocks = [],\n      m;\n\n  var line_no = 1;\n\n  if ( ( m = /^(\\s*\\n)/.exec(input) ) != null ) {\n    // skip (but count) leading blank lines\n    line_no += count_lines( m[0] );\n    re.lastIndex = m[0].length;\n  }\n\n  while ( ( m = re.exec(input) ) !== null ) {\n    if (m[2] == \"\\n#\") {\n      m[2] = \"\\n\";\n      re.lastIndex--;\n    }\n    blocks.push( mk_block( m[1], m[2], line_no ) );\n    line_no += count_lines( m[0] );\n  }\n\n  return blocks;\n};\n\n/**\n *  Markdown#processBlock( block, next ) -> undefined | [ JsonML, ... ]\n *  - block (String): the block to process\n *  - next (Array): the following blocks\n *\n * Process `block` and return an array of JsonML nodes representing `block`.\n *\n * It does this by asking each block level function in the dialect to process\n * the block until one can. Succesful handling is indicated by returning an\n * array (with zero or more JsonML nodes), failure by a false value.\n *\n * Blocks handlers are responsible for calling [[Markdown#processInline]]\n * themselves as appropriate.\n *\n * If the blocks were split incorrectly or adjacent blocks need collapsing you\n * can adjust `next` in place using shift/splice etc.\n *\n * If any of this default behaviour is not right for the dialect, you can\n * define a `__call__` method on the dialect that will get invoked to handle\n * the block processing.\n */\nMarkdown.prototype.processBlock = function processBlock( block, next ) {\n  var cbs = this.dialect.block,\n      ord = cbs.__order__;\n\n  if ( \"__call__\" in cbs ) {\n    return cbs.__call__.call(this, block, next);\n  }\n\n  for ( var i = 0; i < ord.length; i++ ) {\n    //D:this.debug( \"Testing\", ord[i] );\n    var res = cbs[ ord[i] ].call( this, block, next );\n    if ( res ) {\n      //D:this.debug(\"  matched\");\n      if ( !isArray(res) || ( res.length > 0 && !( isArray(res[0]) ) ) )\n        this.debug(ord[i], \"didn't return a proper array\");\n      //D:this.debug( \"\" );\n      return res;\n    }\n  }\n\n  // Uhoh! no match! Should we throw an error?\n  return [];\n};\n\nMarkdown.prototype.processInline = function processInline( block ) {\n  return this.dialect.inline.__call__.call( this, String( block ) );\n};\n\n/**\n *  Markdown#toTree( source ) -> JsonML\n *  - source (String): markdown source to parse\n *\n *  Parse `source` into a JsonML tree representing the markdown document.\n **/\n// custom_tree means set this.tree to `custom_tree` and restore old value on return\nMarkdown.prototype.toTree = function toTree( source, custom_root ) {\n  var blocks = source instanceof Array ? source : this.split_blocks( source );\n\n  // Make tree a member variable so its easier to mess with in extensions\n  var old_tree = this.tree;\n  try {\n    this.tree = custom_root || this.tree || [ \"markdown\" ];\n\n    blocks:\n    while ( blocks.length ) {\n      var b = this.processBlock( blocks.shift(), blocks );\n\n      // Reference blocks and the like won't return any content\n      if ( !b.length ) continue blocks;\n\n      this.tree.push.apply( this.tree, b );\n    }\n    return this.tree;\n  }\n  finally {\n    if ( custom_root ) {\n      this.tree = old_tree;\n    }\n  }\n};\n\n// Noop by default\nMarkdown.prototype.debug = function () {\n  var args = Array.prototype.slice.call( arguments);\n  args.unshift(this.debug_indent);\n  if ( typeof print !== \"undefined\" )\n      print.apply( print, args );\n  if ( typeof console !== \"undefined\" && typeof console.log !== \"undefined\" )\n      console.log.apply( null, args );\n}\n\nMarkdown.prototype.loop_re_over_block = function( re, block, cb ) {\n  // Dont use /g regexps with this\n  var m,\n      b = block.valueOf();\n\n  while ( b.length && (m = re.exec(b) ) != null ) {\n    b = b.substr( m[0].length );\n    cb.call(this, m);\n  }\n  return b;\n};\n\n/**\n * Markdown.dialects\n *\n * Namespace of built-in dialects.\n **/\nMarkdown.dialects = {};\n\n/**\n * Markdown.dialects.Gruber\n *\n * The default dialect that follows the rules set out by John Gruber's\n * markdown.pl as closely as possible. Well actually we follow the behaviour of\n * that script which in some places is not exactly what the syntax web page\n * says.\n **/\nMarkdown.dialects.Gruber = {\n  block: {\n    atxHeader: function atxHeader( block, next ) {\n      var m = block.match( /^(#{1,6})\\s*(.*?)\\s*#*\\s*(?:\\n|$)/ );\n\n      if ( !m ) return undefined;\n\n      var header = [ \"header\", { level: m[ 1 ].length } ];\n      Array.prototype.push.apply(header, this.processInline(m[ 2 ]));\n\n      if ( m[0].length < block.length )\n        next.unshift( mk_block( block.substr( m[0].length ), block.trailing, block.lineNumber + 2 ) );\n\n      return [ header ];\n    },\n\n    setextHeader: function setextHeader( block, next ) {\n      var m = block.match( /^(.*)\\n([-=])\\2\\2+(?:\\n|$)/ );\n\n      if ( !m ) return undefined;\n\n      var level = ( m[ 2 ] === \"=\" ) ? 1 : 2;\n      var header = [ \"header\", { level : level }, m[ 1 ] ];\n\n      if ( m[0].length < block.length )\n        next.unshift( mk_block( block.substr( m[0].length ), block.trailing, block.lineNumber + 2 ) );\n\n      return [ header ];\n    },\n\n    code: function code( block, next ) {\n      // |    Foo\n      // |bar\n      // should be a code block followed by a paragraph. Fun\n      //\n      // There might also be adjacent code block to merge.\n\n      var ret = [],\n          re = /^(?: {0,3}\\t| {4})(.*)\\n?/,\n          lines;\n\n      // 4 spaces + content\n      if ( !block.match( re ) ) return undefined;\n\n      block_search:\n      do {\n        // Now pull out the rest of the lines\n        var b = this.loop_re_over_block(\n                  re, block.valueOf(), function( m ) { ret.push( m[1] ); } );\n\n        if ( b.length ) {\n          // Case alluded to in first comment. push it back on as a new block\n          next.unshift( mk_block(b, block.trailing) );\n          break block_search;\n        }\n        else if ( next.length ) {\n          // Check the next block - it might be code too\n          if ( !next[0].match( re ) ) break block_search;\n\n          // Pull how how many blanks lines follow - minus two to account for .join\n          ret.push ( block.trailing.replace(/[^\\n]/g, \"\").substring(2) );\n\n          block = next.shift();\n        }\n        else {\n          break block_search;\n        }\n      } while ( true );\n\n      return [ [ \"code_block\", ret.join(\"\\n\") ] ];\n    },\n\n    horizRule: function horizRule( block, next ) {\n      // this needs to find any hr in the block to handle abutting blocks\n      var m = block.match( /^(?:([\\s\\S]*?)\\n)?[ \\t]*([-_*])(?:[ \\t]*\\2){2,}[ \\t]*(?:\\n([\\s\\S]*))?$/ );\n\n      if ( !m ) {\n        return undefined;\n      }\n\n      var jsonml = [ [ \"hr\" ] ];\n\n      // if there's a leading abutting block, process it\n      if ( m[ 1 ] ) {\n        jsonml.unshift.apply( jsonml, this.processBlock( m[ 1 ], [] ) );\n      }\n\n      // if there's a trailing abutting block, stick it into next\n      if ( m[ 3 ] ) {\n        next.unshift( mk_block( m[ 3 ] ) );\n      }\n\n      return jsonml;\n    },\n\n    // There are two types of lists. Tight and loose. Tight lists have no whitespace\n    // between the items (and result in text just in the <li>) and loose lists,\n    // which have an empty line between list items, resulting in (one or more)\n    // paragraphs inside the <li>.\n    //\n    // There are all sorts weird edge cases about the original markdown.pl's\n    // handling of lists:\n    //\n    // * Nested lists are supposed to be indented by four chars per level. But\n    //   if they aren't, you can get a nested list by indenting by less than\n    //   four so long as the indent doesn't match an indent of an existing list\n    //   item in the 'nest stack'.\n    //\n    // * The type of the list (bullet or number) is controlled just by the\n    //    first item at the indent. Subsequent changes are ignored unless they\n    //    are for nested lists\n    //\n    lists: (function( ) {\n      // Use a closure to hide a few variables.\n      var any_list = \"[*+-]|\\\\d+\\\\.\",\n          bullet_list = /[*+-]/,\n          number_list = /\\d+\\./,\n          // Capture leading indent as it matters for determining nested lists.\n          is_list_re = new RegExp( \"^( {0,3})(\" + any_list + \")[ \\t]+\" ),\n          indent_re = \"(?: {0,3}\\\\t| {4})\";\n\n      // TODO: Cache this regexp for certain depths.\n      // Create a regexp suitable for matching an li for a given stack depth\n      function regex_for_depth( depth ) {\n\n        return new RegExp(\n          // m[1] = indent, m[2] = list_type\n          \"(?:^(\" + indent_re + \"{0,\" + depth + \"} {0,3})(\" + any_list + \")\\\\s+)|\" +\n          // m[3] = cont\n          \"(^\" + indent_re + \"{0,\" + (depth-1) + \"}[ ]{0,4})\"\n        );\n      }\n      function expand_tab( input ) {\n        return input.replace( / {0,3}\\t/g, \"    \" );\n      }\n\n      // Add inline content `inline` to `li`. inline comes from processInline\n      // so is an array of content\n      function add(li, loose, inline, nl) {\n        if ( loose ) {\n          li.push( [ \"para\" ].concat(inline) );\n          return;\n        }\n        // Hmmm, should this be any block level element or just paras?\n        var add_to = li[li.length -1] instanceof Array && li[li.length - 1][0] == \"para\"\n                   ? li[li.length -1]\n                   : li;\n\n        // If there is already some content in this list, add the new line in\n        if ( nl && li.length > 1 ) inline.unshift(nl);\n\n        for ( var i = 0; i < inline.length; i++ ) {\n          var what = inline[i],\n              is_str = typeof what == \"string\";\n          if ( is_str && add_to.length > 1 && typeof add_to[add_to.length-1] == \"string\" ) {\n            add_to[ add_to.length-1 ] += what;\n          }\n          else {\n            add_to.push( what );\n          }\n        }\n      }\n\n      // contained means have an indent greater than the current one. On\n      // *every* line in the block\n      function get_contained_blocks( depth, blocks ) {\n\n        var re = new RegExp( \"^(\" + indent_re + \"{\" + depth + \"}.*?\\\\n?)*$\" ),\n            replace = new RegExp(\"^\" + indent_re + \"{\" + depth + \"}\", \"gm\"),\n            ret = [];\n\n        while ( blocks.length > 0 ) {\n          if ( re.exec( blocks[0] ) ) {\n            var b = blocks.shift(),\n                // Now remove that indent\n                x = b.replace( replace, \"\");\n\n            ret.push( mk_block( x, b.trailing, b.lineNumber ) );\n          }\n          else {\n            break;\n          }\n        }\n        return ret;\n      }\n\n      // passed to stack.forEach to turn list items up the stack into paras\n      function paragraphify(s, i, stack) {\n        var list = s.list;\n        var last_li = list[list.length-1];\n\n        if ( last_li[1] instanceof Array && last_li[1][0] == \"para\" ) {\n          return;\n        }\n        if ( i + 1 == stack.length ) {\n          // Last stack frame\n          // Keep the same array, but replace the contents\n          last_li.push( [\"para\"].concat( last_li.splice(1, last_li.length - 1) ) );\n        }\n        else {\n          var sublist = last_li.pop();\n          last_li.push( [\"para\"].concat( last_li.splice(1, last_li.length - 1) ), sublist );\n        }\n      }\n\n      // The matcher function\n      return function( block, next ) {\n        var m = block.match( is_list_re );\n        if ( !m ) return undefined;\n\n        function make_list( m ) {\n          var list = bullet_list.exec( m[2] )\n                   ? [\"bulletlist\"]\n                   : [\"numberlist\"];\n\n          stack.push( { list: list, indent: m[1] } );\n          return list;\n        }\n\n\n        var stack = [], // Stack of lists for nesting.\n            list = make_list( m ),\n            last_li,\n            loose = false,\n            ret = [ stack[0].list ],\n            i;\n\n        // Loop to search over block looking for inner block elements and loose lists\n        loose_search:\n        while ( true ) {\n          // Split into lines preserving new lines at end of line\n          var lines = block.split( /(?=\\n)/ );\n\n          // We have to grab all lines for a li and call processInline on them\n          // once as there are some inline things that can span lines.\n          var li_accumulate = \"\";\n\n          // Loop over the lines in this block looking for tight lists.\n          tight_search:\n          for ( var line_no = 0; line_no < lines.length; line_no++ ) {\n            var nl = \"\",\n                l = lines[line_no].replace(/^\\n/, function(n) { nl = n; return \"\"; });\n\n            // TODO: really should cache this\n            var line_re = regex_for_depth( stack.length );\n\n            m = l.match( line_re );\n            //print( \"line:\", uneval(l), \"\\nline match:\", uneval(m) );\n\n            // We have a list item\n            if ( m[1] !== undefined ) {\n              // Process the previous list item, if any\n              if ( li_accumulate.length ) {\n                add( last_li, loose, this.processInline( li_accumulate ), nl );\n                // Loose mode will have been dealt with. Reset it\n                loose = false;\n                li_accumulate = \"\";\n              }\n\n              m[1] = expand_tab( m[1] );\n              var wanted_depth = Math.floor(m[1].length/4)+1;\n              //print( \"want:\", wanted_depth, \"stack:\", stack.length);\n              if ( wanted_depth > stack.length ) {\n                // Deep enough for a nested list outright\n                //print ( \"new nested list\" );\n                list = make_list( m );\n                last_li.push( list );\n                last_li = list[1] = [ \"listitem\" ];\n              }\n              else {\n                // We aren't deep enough to be strictly a new level. This is\n                // where Md.pl goes nuts. If the indent matches a level in the\n                // stack, put it there, else put it one deeper then the\n                // wanted_depth deserves.\n                var found = false;\n                for ( i = 0; i < stack.length; i++ ) {\n                  if ( stack[ i ].indent != m[1] ) continue;\n                  list = stack[ i ].list;\n                  stack.splice( i+1, stack.length - (i+1) );\n                  found = true;\n                  break;\n                }\n\n                if (!found) {\n                  //print(\"not found. l:\", uneval(l));\n                  wanted_depth++;\n                  if ( wanted_depth <= stack.length ) {\n                    stack.splice(wanted_depth, stack.length - wanted_depth);\n                    //print(\"Desired depth now\", wanted_depth, \"stack:\", stack.length);\n                    list = stack[wanted_depth-1].list;\n                    //print(\"list:\", uneval(list) );\n                  }\n                  else {\n                    //print (\"made new stack for messy indent\");\n                    list = make_list(m);\n                    last_li.push(list);\n                  }\n                }\n\n                //print( uneval(list), \"last\", list === stack[stack.length-1].list );\n                last_li = [ \"listitem\" ];\n                list.push(last_li);\n              } // end depth of shenegains\n              nl = \"\";\n            }\n\n            // Add content\n            if ( l.length > m[0].length ) {\n              li_accumulate += nl + l.substr( m[0].length );\n            }\n          } // tight_search\n\n          if ( li_accumulate.length ) {\n            add( last_li, loose, this.processInline( li_accumulate ), nl );\n            // Loose mode will have been dealt with. Reset it\n            loose = false;\n            li_accumulate = \"\";\n          }\n\n          // Look at the next block - we might have a loose list. Or an extra\n          // paragraph for the current li\n          var contained = get_contained_blocks( stack.length, next );\n\n          // Deal with code blocks or properly nested lists\n          if ( contained.length > 0 ) {\n            // Make sure all listitems up the stack are paragraphs\n            forEach( stack, paragraphify, this);\n\n            last_li.push.apply( last_li, this.toTree( contained, [] ) );\n          }\n\n          var next_block = next[0] && next[0].valueOf() || \"\";\n\n          if ( next_block.match(is_list_re) || next_block.match( /^ / ) ) {\n            block = next.shift();\n\n            // Check for an HR following a list: features/lists/hr_abutting\n            var hr = this.dialect.block.horizRule( block, next );\n\n            if ( hr ) {\n              ret.push.apply(ret, hr);\n              break;\n            }\n\n            // Make sure all listitems up the stack are paragraphs\n            forEach( stack, paragraphify, this);\n\n            loose = true;\n            continue loose_search;\n          }\n          break;\n        } // loose_search\n\n        return ret;\n      };\n    })(),\n\n    blockquote: function blockquote( block, next ) {\n      if ( !block.match( /^>/m ) )\n        return undefined;\n\n      var jsonml = [];\n\n      // separate out the leading abutting block, if any. I.e. in this case:\n      //\n      //  a\n      //  > b\n      //\n      if ( block[ 0 ] != \">\" ) {\n        var lines = block.split( /\\n/ ),\n            prev = [],\n            line_no = block.lineNumber;\n\n        // keep shifting lines until you find a crotchet\n        while ( lines.length && lines[ 0 ][ 0 ] != \">\" ) {\n            prev.push( lines.shift() );\n            line_no++;\n        }\n\n        var abutting = mk_block( prev.join( \"\\n\" ), \"\\n\", block.lineNumber );\n        jsonml.push.apply( jsonml, this.processBlock( abutting, [] ) );\n        // reassemble new block of just block quotes!\n        block = mk_block( lines.join( \"\\n\" ), block.trailing, line_no );\n      }\n\n\n      // if the next block is also a blockquote merge it in\n      while ( next.length && next[ 0 ][ 0 ] == \">\" ) {\n        var b = next.shift();\n        block = mk_block( block + block.trailing + b, b.trailing, block.lineNumber );\n      }\n\n      // Strip off the leading \"> \" and re-process as a block.\n      var input = block.replace( /^> ?/gm, \"\" ),\n          old_tree = this.tree,\n          processedBlock = this.toTree( input, [ \"blockquote\" ] ),\n          attr = extract_attr( processedBlock );\n\n      // If any link references were found get rid of them\n      if ( attr && attr.references ) {\n        delete attr.references;\n        // And then remove the attribute object if it's empty\n        if ( isEmpty( attr ) ) {\n          processedBlock.splice( 1, 1 );\n        }\n      }\n\n      jsonml.push( processedBlock );\n      return jsonml;\n    },\n\n    referenceDefn: function referenceDefn( block, next) {\n      var re = /^\\s*\\[(.*?)\\]:\\s*(\\S+)(?:\\s+(?:(['\"])(.*?)\\3|\\((.*?)\\)))?\\n?/;\n      // interesting matches are [ , ref_id, url, , title, title ]\n\n      if ( !block.match(re) )\n        return undefined;\n\n      // make an attribute node if it doesn't exist\n      if ( !extract_attr( this.tree ) ) {\n        this.tree.splice( 1, 0, {} );\n      }\n\n      var attrs = extract_attr( this.tree );\n\n      // make a references hash if it doesn't exist\n      if ( attrs.references === undefined ) {\n        attrs.references = {};\n      }\n\n      var b = this.loop_re_over_block(re, block, function( m ) {\n\n        if ( m[2] && m[2][0] == \"<\" && m[2][m[2].length-1] == \">\" )\n          m[2] = m[2].substring( 1, m[2].length - 1 );\n\n        var ref = attrs.references[ m[1].toLowerCase() ] = {\n          href: m[2]\n        };\n\n        if ( m[4] !== undefined )\n          ref.title = m[4];\n        else if ( m[5] !== undefined )\n          ref.title = m[5];\n\n      } );\n\n      if ( b.length )\n        next.unshift( mk_block( b, block.trailing ) );\n\n      return [];\n    },\n\n    para: function para( block, next ) {\n      // everything's a para!\n      return [ [\"para\"].concat( this.processInline( block ) ) ];\n    }\n  }\n};\n\nMarkdown.dialects.Gruber.inline = {\n\n    __oneElement__: function oneElement( text, patterns_or_re, previous_nodes ) {\n      var m,\n          res,\n          lastIndex = 0;\n\n      patterns_or_re = patterns_or_re || this.dialect.inline.__patterns__;\n      var re = new RegExp( \"([\\\\s\\\\S]*?)(\" + (patterns_or_re.source || patterns_or_re) + \")\" );\n\n      m = re.exec( text );\n      if (!m) {\n        // Just boring text\n        return [ text.length, text ];\n      }\n      else if ( m[1] ) {\n        // Some un-interesting text matched. Return that first\n        return [ m[1].length, m[1] ];\n      }\n\n      var res;\n      if ( m[2] in this.dialect.inline ) {\n        res = this.dialect.inline[ m[2] ].call(\n                  this,\n                  text.substr( m.index ), m, previous_nodes || [] );\n      }\n      // Default for now to make dev easier. just slurp special and output it.\n      res = res || [ m[2].length, m[2] ];\n      return res;\n    },\n\n    __call__: function inline( text, patterns ) {\n\n      var out = [],\n          res;\n\n      function add(x) {\n        //D:self.debug(\"  adding output\", uneval(x));\n        if ( typeof x == \"string\" && typeof out[out.length-1] == \"string\" )\n          out[ out.length-1 ] += x;\n        else\n          out.push(x);\n      }\n\n      while ( text.length > 0 ) {\n        res = this.dialect.inline.__oneElement__.call(this, text, patterns, out );\n        text = text.substr( res.shift() );\n        forEach(res, add )\n      }\n\n      return out;\n    },\n\n    // These characters are intersting elsewhere, so have rules for them so that\n    // chunks of plain text blocks don't include them\n    \"]\": function () {},\n    \"}\": function () {},\n\n    __escape__ : /^\\\\[\\\\`\\*_{}\\[\\]()#\\+.!\\-]/,\n\n    \"\\\\\": function escaped( text ) {\n      // [ length of input processed, node/children to add... ]\n      // Only esacape: \\ ` * _ { } [ ] ( ) # * + - . !\n      if ( this.dialect.inline.__escape__.exec( text ) )\n        return [ 2, text.charAt( 1 ) ];\n      else\n        // Not an esacpe\n        return [ 1, \"\\\\\" ];\n    },\n\n    \"![\": function image( text ) {\n\n      // Unlike images, alt text is plain text only. no other elements are\n      // allowed in there\n\n      // ![Alt text](/path/to/img.jpg \"Optional title\")\n      //      1          2            3       4         <--- captures\n      var m = text.match( /^!\\[(.*?)\\][ \\t]*\\([ \\t]*([^\")]*?)(?:[ \\t]+([\"'])(.*?)\\3)?[ \\t]*\\)/ );\n\n      if ( m ) {\n        if ( m[2] && m[2][0] == \"<\" && m[2][m[2].length-1] == \">\" )\n          m[2] = m[2].substring( 1, m[2].length - 1 );\n\n        m[2] = this.dialect.inline.__call__.call( this, m[2], /\\\\/ )[0];\n\n        var attrs = { alt: m[1], href: m[2] || \"\" };\n        if ( m[4] !== undefined)\n          attrs.title = m[4];\n\n        return [ m[0].length, [ \"img\", attrs ] ];\n      }\n\n      // ![Alt text][id]\n      m = text.match( /^!\\[(.*?)\\][ \\t]*\\[(.*?)\\]/ );\n\n      if ( m ) {\n        // We can't check if the reference is known here as it likely wont be\n        // found till after. Check it in md tree->hmtl tree conversion\n        return [ m[0].length, [ \"img_ref\", { alt: m[1], ref: m[2].toLowerCase(), original: m[0] } ] ];\n      }\n\n      // Just consume the '!['\n      return [ 2, \"![\" ];\n    },\n\n    \"[\": function link( text ) {\n\n      var orig = String(text);\n      // Inline content is possible inside `link text`\n      var res = Markdown.DialectHelpers.inline_until_char.call( this, text.substr(1), \"]\" );\n\n      // No closing ']' found. Just consume the [\n      if ( !res ) return [ 1, \"[\" ];\n\n      var consumed = 1 + res[ 0 ],\n          children = res[ 1 ],\n          link,\n          attrs;\n\n      // At this point the first [...] has been parsed. See what follows to find\n      // out which kind of link we are (reference or direct url)\n      text = text.substr( consumed );\n\n      // [link text](/path/to/img.jpg \"Optional title\")\n      //                 1            2       3         <--- captures\n      // This will capture up to the last paren in the block. We then pull\n      // back based on if there a matching ones in the url\n      //    ([here](/url/(test))\n      // The parens have to be balanced\n      var m = text.match( /^\\s*\\([ \\t]*([^\"']*)(?:[ \\t]+([\"'])(.*?)\\2)?[ \\t]*\\)/ );\n      if ( m ) {\n        var url = m[1];\n        consumed += m[0].length;\n\n        if ( url && url[0] == \"<\" && url[url.length-1] == \">\" )\n          url = url.substring( 1, url.length - 1 );\n\n        // If there is a title we don't have to worry about parens in the url\n        if ( !m[3] ) {\n          var open_parens = 1; // One open that isn't in the capture\n          for ( var len = 0; len < url.length; len++ ) {\n            switch ( url[len] ) {\n            case \"(\":\n              open_parens++;\n              break;\n            case \")\":\n              if ( --open_parens == 0) {\n                consumed -= url.length - len;\n                url = url.substring(0, len);\n              }\n              break;\n            }\n          }\n        }\n\n        // Process escapes only\n        url = this.dialect.inline.__call__.call( this, url, /\\\\/ )[0];\n\n        attrs = { href: url || \"\" };\n        if ( m[3] !== undefined)\n          attrs.title = m[3];\n\n        link = [ \"link\", attrs ].concat( children );\n        return [ consumed, link ];\n      }\n\n      // [Alt text][id]\n      // [Alt text] [id]\n      m = text.match( /^\\s*\\[(.*?)\\]/ );\n\n      if ( m ) {\n\n        consumed += m[ 0 ].length;\n\n        // [links][] uses links as its reference\n        attrs = { ref: ( m[ 1 ] || String(children) ).toLowerCase(),  original: orig.substr( 0, consumed ) };\n\n        link = [ \"link_ref\", attrs ].concat( children );\n\n        // We can't check if the reference is known here as it likely wont be\n        // found till after. Check it in md tree->hmtl tree conversion.\n        // Store the original so that conversion can revert if the ref isn't found.\n        return [ consumed, link ];\n      }\n\n      // [id]\n      // Only if id is plain (no formatting.)\n      if ( children.length == 1 && typeof children[0] == \"string\" ) {\n\n        attrs = { ref: children[0].toLowerCase(),  original: orig.substr( 0, consumed ) };\n        link = [ \"link_ref\", attrs, children[0] ];\n        return [ consumed, link ];\n      }\n\n      // Just consume the \"[\"\n      return [ 1, \"[\" ];\n    },\n\n\n    \"<\": function autoLink( text ) {\n      var m;\n\n      if ( ( m = text.match( /^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\\.[a-zA-Z]+))>/ ) ) != null ) {\n        if ( m[3] ) {\n          return [ m[0].length, [ \"link\", { href: \"mailto:\" + m[3] }, m[3] ] ];\n\n        }\n        else if ( m[2] == \"mailto\" ) {\n          return [ m[0].length, [ \"link\", { href: m[1] }, m[1].substr(\"mailto:\".length ) ] ];\n        }\n        else\n          return [ m[0].length, [ \"link\", { href: m[1] }, m[1] ] ];\n      }\n\n      return [ 1, \"<\" ];\n    },\n\n    \"`\": function inlineCode( text ) {\n      // Inline code block. as many backticks as you like to start it\n      // Always skip over the opening ticks.\n      var m = text.match( /(`+)(([\\s\\S]*?)\\1)/ );\n\n      if ( m && m[2] )\n        return [ m[1].length + m[2].length, [ \"inlinecode\", m[3] ] ];\n      else {\n        // TODO: No matching end code found - warn!\n        return [ 1, \"`\" ];\n      }\n    },\n\n    \"  \\n\": function lineBreak( text ) {\n      return [ 3, [ \"linebreak\" ] ];\n    }\n\n};\n\n// Meta Helper/generator method for em and strong handling\nfunction strong_em( tag, md ) {\n\n  var state_slot = tag + \"_state\",\n      other_slot = tag == \"strong\" ? \"em_state\" : \"strong_state\";\n\n  function CloseTag(len) {\n    this.len_after = len;\n    this.name = \"close_\" + md;\n  }\n\n  return function ( text, orig_match ) {\n\n    if ( this[state_slot][0] == md ) {\n      // Most recent em is of this type\n      //D:this.debug(\"closing\", md);\n      this[state_slot].shift();\n\n      // \"Consume\" everything to go back to the recrusion in the else-block below\n      return[ text.length, new CloseTag(text.length-md.length) ];\n    }\n    else {\n      // Store a clone of the em/strong states\n      var other = this[other_slot].slice(),\n          state = this[state_slot].slice();\n\n      this[state_slot].unshift(md);\n\n      //D:this.debug_indent += \"  \";\n\n      // Recurse\n      var res = this.processInline( text.substr( md.length ) );\n      //D:this.debug_indent = this.debug_indent.substr(2);\n\n      var last = res[res.length - 1];\n\n      //D:this.debug(\"processInline from\", tag + \": \", uneval( res ) );\n\n      var check = this[state_slot].shift();\n      if ( last instanceof CloseTag ) {\n        res.pop();\n        // We matched! Huzzah.\n        var consumed = text.length - last.len_after;\n        return [ consumed, [ tag ].concat(res) ];\n      }\n      else {\n        // Restore the state of the other kind. We might have mistakenly closed it.\n        this[other_slot] = other;\n        this[state_slot] = state;\n\n        // We can't reuse the processed result as it could have wrong parsing contexts in it.\n        return [ md.length, md ];\n      }\n    }\n  }; // End returned function\n}\n\nMarkdown.dialects.Gruber.inline[\"**\"] = strong_em(\"strong\", \"**\");\nMarkdown.dialects.Gruber.inline[\"__\"] = strong_em(\"strong\", \"__\");\nMarkdown.dialects.Gruber.inline[\"*\"]  = strong_em(\"em\", \"*\");\nMarkdown.dialects.Gruber.inline[\"_\"]  = strong_em(\"em\", \"_\");\n\n\n// Build default order from insertion order.\nMarkdown.buildBlockOrder = function(d) {\n  var ord = [];\n  for ( var i in d ) {\n    if ( i == \"__order__\" || i == \"__call__\" ) continue;\n    ord.push( i );\n  }\n  d.__order__ = ord;\n};\n\n// Build patterns for inline matcher\nMarkdown.buildInlinePatterns = function(d) {\n  var patterns = [];\n\n  for ( var i in d ) {\n    // __foo__ is reserved and not a pattern\n    if ( i.match( /^__.*__$/) ) continue;\n    var l = i.replace( /([\\\\.*+?|()\\[\\]{}])/g, \"\\\\$1\" )\n             .replace( /\\n/, \"\\\\n\" );\n    patterns.push( i.length == 1 ? l : \"(?:\" + l + \")\" );\n  }\n\n  patterns = patterns.join(\"|\");\n  d.__patterns__ = patterns;\n  //print(\"patterns:\", uneval( patterns ) );\n\n  var fn = d.__call__;\n  d.__call__ = function(text, pattern) {\n    if ( pattern != undefined ) {\n      return fn.call(this, text, pattern);\n    }\n    else\n    {\n      return fn.call(this, text, patterns);\n    }\n  };\n};\n\nMarkdown.DialectHelpers = {};\nMarkdown.DialectHelpers.inline_until_char = function( text, want ) {\n  var consumed = 0,\n      nodes = [];\n\n  while ( true ) {\n    if ( text.charAt( consumed ) == want ) {\n      // Found the character we were looking for\n      consumed++;\n      return [ consumed, nodes ];\n    }\n\n    if ( consumed >= text.length ) {\n      // No closing char found. Abort.\n      return null;\n    }\n\n    var res = this.dialect.inline.__oneElement__.call(this, text.substr( consumed ) );\n    consumed += res[ 0 ];\n    // Add any returned nodes.\n    nodes.push.apply( nodes, res.slice( 1 ) );\n  }\n}\n\n// Helper function to make sub-classing a dialect easier\nMarkdown.subclassDialect = function( d ) {\n  function Block() {}\n  Block.prototype = d.block;\n  function Inline() {}\n  Inline.prototype = d.inline;\n\n  return { block: new Block(), inline: new Inline() };\n};\n\nMarkdown.buildBlockOrder ( Markdown.dialects.Gruber.block );\nMarkdown.buildInlinePatterns( Markdown.dialects.Gruber.inline );\n\nMarkdown.dialects.Maruku = Markdown.subclassDialect( Markdown.dialects.Gruber );\n\nMarkdown.dialects.Maruku.processMetaHash = function processMetaHash( meta_string ) {\n  var meta = split_meta_hash( meta_string ),\n      attr = {};\n\n  for ( var i = 0; i < meta.length; ++i ) {\n    // id: #foo\n    if ( /^#/.test( meta[ i ] ) ) {\n      attr.id = meta[ i ].substring( 1 );\n    }\n    // class: .foo\n    else if ( /^\\./.test( meta[ i ] ) ) {\n      // if class already exists, append the new one\n      if ( attr[\"class\"] ) {\n        attr[\"class\"] = attr[\"class\"] + meta[ i ].replace( /./, \" \" );\n      }\n      else {\n        attr[\"class\"] = meta[ i ].substring( 1 );\n      }\n    }\n    // attribute: foo=bar\n    else if ( /\\=/.test( meta[ i ] ) ) {\n      var s = meta[ i ].split( /\\=/ );\n      attr[ s[ 0 ] ] = s[ 1 ];\n    }\n  }\n\n  return attr;\n}\n\nfunction split_meta_hash( meta_string ) {\n  var meta = meta_string.split( \"\" ),\n      parts = [ \"\" ],\n      in_quotes = false;\n\n  while ( meta.length ) {\n    var letter = meta.shift();\n    switch ( letter ) {\n      case \" \" :\n        // if we're in a quoted section, keep it\n        if ( in_quotes ) {\n          parts[ parts.length - 1 ] += letter;\n        }\n        // otherwise make a new part\n        else {\n          parts.push( \"\" );\n        }\n        break;\n      case \"'\" :\n      case '\"' :\n        // reverse the quotes and move straight on\n        in_quotes = !in_quotes;\n        break;\n      case \"\\\\\" :\n        // shift off the next letter to be used straight away.\n        // it was escaped so we'll keep it whatever it is\n        letter = meta.shift();\n      default :\n        parts[ parts.length - 1 ] += letter;\n        break;\n    }\n  }\n\n  return parts;\n}\n\nMarkdown.dialects.Maruku.block.document_meta = function document_meta( block, next ) {\n  // we're only interested in the first block\n  if ( block.lineNumber > 1 ) return undefined;\n\n  // document_meta blocks consist of one or more lines of `Key: Value\\n`\n  if ( ! block.match( /^(?:\\w+:.*\\n)*\\w+:.*$/ ) ) return undefined;\n\n  // make an attribute node if it doesn't exist\n  if ( !extract_attr( this.tree ) ) {\n    this.tree.splice( 1, 0, {} );\n  }\n\n  var pairs = block.split( /\\n/ );\n  for ( p in pairs ) {\n    var m = pairs[ p ].match( /(\\w+):\\s*(.*)$/ ),\n        key = m[ 1 ].toLowerCase(),\n        value = m[ 2 ];\n\n    this.tree[ 1 ][ key ] = value;\n  }\n\n  // document_meta produces no content!\n  return [];\n};\n\nMarkdown.dialects.Maruku.block.block_meta = function block_meta( block, next ) {\n  // check if the last line of the block is an meta hash\n  var m = block.match( /(^|\\n) {0,3}\\{:\\s*((?:\\\\\\}|[^\\}])*)\\s*\\}$/ );\n  if ( !m ) return undefined;\n\n  // process the meta hash\n  var attr = this.dialect.processMetaHash( m[ 2 ] );\n\n  var hash;\n\n  // if we matched ^ then we need to apply meta to the previous block\n  if ( m[ 1 ] === \"\" ) {\n    var node = this.tree[ this.tree.length - 1 ];\n    hash = extract_attr( node );\n\n    // if the node is a string (rather than JsonML), bail\n    if ( typeof node === \"string\" ) return undefined;\n\n    // create the attribute hash if it doesn't exist\n    if ( !hash ) {\n      hash = {};\n      node.splice( 1, 0, hash );\n    }\n\n    // add the attributes in\n    for ( a in attr ) {\n      hash[ a ] = attr[ a ];\n    }\n\n    // return nothing so the meta hash is removed\n    return [];\n  }\n\n  // pull the meta hash off the block and process what's left\n  var b = block.replace( /\\n.*$/, \"\" ),\n      result = this.processBlock( b, [] );\n\n  // get or make the attributes hash\n  hash = extract_attr( result[ 0 ] );\n  if ( !hash ) {\n    hash = {};\n    result[ 0 ].splice( 1, 0, hash );\n  }\n\n  // attach the attributes to the block\n  for ( a in attr ) {\n    hash[ a ] = attr[ a ];\n  }\n\n  return result;\n};\n\nMarkdown.dialects.Maruku.block.definition_list = function definition_list( block, next ) {\n  // one or more terms followed by one or more definitions, in a single block\n  var tight = /^((?:[^\\s:].*\\n)+):\\s+([\\s\\S]+)$/,\n      list = [ \"dl\" ],\n      i, m;\n\n  // see if we're dealing with a tight or loose block\n  if ( ( m = block.match( tight ) ) ) {\n    // pull subsequent tight DL blocks out of `next`\n    var blocks = [ block ];\n    while ( next.length && tight.exec( next[ 0 ] ) ) {\n      blocks.push( next.shift() );\n    }\n\n    for ( var b = 0; b < blocks.length; ++b ) {\n      var m = blocks[ b ].match( tight ),\n          terms = m[ 1 ].replace( /\\n$/, \"\" ).split( /\\n/ ),\n          defns = m[ 2 ].split( /\\n:\\s+/ );\n\n      // print( uneval( m ) );\n\n      for ( i = 0; i < terms.length; ++i ) {\n        list.push( [ \"dt\", terms[ i ] ] );\n      }\n\n      for ( i = 0; i < defns.length; ++i ) {\n        // run inline processing over the definition\n        list.push( [ \"dd\" ].concat( this.processInline( defns[ i ].replace( /(\\n)\\s+/, \"$1\" ) ) ) );\n      }\n    }\n  }\n  else {\n    return undefined;\n  }\n\n  return [ list ];\n};\n\n// splits on unescaped instances of @ch. If @ch is not a character the result\n// can be unpredictable\n\nMarkdown.dialects.Maruku.block.table = function table (block, next) {\n\n    var _split_on_unescaped = function(s, ch) {\n        ch = ch || '\\\\s';\n        if (ch.match(/^[\\\\|\\[\\]{}?*.+^$]$/)) { ch = '\\\\' + ch; }\n        var res = [ ],\n            r = new RegExp('^((?:\\\\\\\\.|[^\\\\\\\\' + ch + '])*)' + ch + '(.*)'),\n            m;\n        while(m = s.match(r)) {\n            res.push(m[1]);\n            s = m[2];\n        }\n        res.push(s);\n        return res;\n    }\n\n    var leading_pipe = /^ {0,3}\\|(.+)\\n {0,3}\\|\\s*([\\-:]+[\\-| :]*)\\n((?:\\s*\\|.*(?:\\n|$))*)(?=\\n|$)/,\n        // find at least an unescaped pipe in each line\n        no_leading_pipe = /^ {0,3}(\\S(?:\\\\.|[^\\\\|])*\\|.*)\\n {0,3}([\\-:]+\\s*\\|[\\-| :]*)\\n((?:(?:\\\\.|[^\\\\|])*\\|.*(?:\\n|$))*)(?=\\n|$)/,\n        i, m;\n    if (m = block.match(leading_pipe)) {\n        // remove leading pipes in contents\n        // (header and horizontal rule already have the leading pipe left out)\n        m[3] = m[3].replace(/^\\s*\\|/gm, '');\n    } else if (! ( m = block.match(no_leading_pipe))) {\n        return undefined;\n    }\n\n    var table = [ \"table\", [ \"thead\", [ \"tr\" ] ], [ \"tbody\" ] ];\n\n    // remove trailing pipes, then split on pipes\n    // (no escaped pipes are allowed in horizontal rule)\n    m[2] = m[2].replace(/\\|\\s*$/, '').split('|');\n\n    // process alignment\n    var html_attrs = [ ];\n    forEach (m[2], function (s) {\n        if (s.match(/^\\s*-+:\\s*$/))       html_attrs.push({align: \"right\"});\n        else if (s.match(/^\\s*:-+\\s*$/))  html_attrs.push({align: \"left\"});\n        else if (s.match(/^\\s*:-+:\\s*$/)) html_attrs.push({align: \"center\"});\n        else                              html_attrs.push({});\n    });\n\n    // now for the header, avoid escaped pipes\n    m[1] = _split_on_unescaped(m[1].replace(/\\|\\s*$/, ''), '|');\n    for (i = 0; i < m[1].length; i++) {\n        table[1][1].push(['th', html_attrs[i] || {}].concat(\n            this.processInline(m[1][i].trim())));\n    }\n\n    // now for body contents\n    forEach (m[3].replace(/\\|\\s*$/mg, '').split('\\n'), function (row) {\n        var html_row = ['tr'];\n        row = _split_on_unescaped(row, '|');\n        for (i = 0; i < row.length; i++) {\n            html_row.push(['td', html_attrs[i] || {}].concat(this.processInline(row[i].trim())));\n        }\n        table[2].push(html_row);\n    }, this);\n\n    return [table];\n}\n\nMarkdown.dialects.Maruku.inline[ \"{:\" ] = function inline_meta( text, matches, out ) {\n  if ( !out.length ) {\n    return [ 2, \"{:\" ];\n  }\n\n  // get the preceeding element\n  var before = out[ out.length - 1 ];\n\n  if ( typeof before === \"string\" ) {\n    return [ 2, \"{:\" ];\n  }\n\n  // match a meta hash\n  var m = text.match( /^\\{:\\s*((?:\\\\\\}|[^\\}])*)\\s*\\}/ );\n\n  // no match, false alarm\n  if ( !m ) {\n    return [ 2, \"{:\" ];\n  }\n\n  // attach the attributes to the preceeding element\n  var meta = this.dialect.processMetaHash( m[ 1 ] ),\n      attr = extract_attr( before );\n\n  if ( !attr ) {\n    attr = {};\n    before.splice( 1, 0, attr );\n  }\n\n  for ( var k in meta ) {\n    attr[ k ] = meta[ k ];\n  }\n\n  // cut out the string and replace it with nothing\n  return [ m[ 0 ].length, \"\" ];\n};\n\nMarkdown.dialects.Maruku.inline.__escape__ = /^\\\\[\\\\`\\*_{}\\[\\]()#\\+.!\\-|:]/;\n\nMarkdown.buildBlockOrder ( Markdown.dialects.Maruku.block );\nMarkdown.buildInlinePatterns( Markdown.dialects.Maruku.inline );\n\nvar isArray = Array.isArray || function(obj) {\n  return Object.prototype.toString.call(obj) == \"[object Array]\";\n};\n\nvar forEach;\n// Don't mess with Array.prototype. Its not friendly\nif ( Array.prototype.forEach ) {\n  forEach = function( arr, cb, thisp ) {\n    return arr.forEach( cb, thisp );\n  };\n}\nelse {\n  forEach = function(arr, cb, thisp) {\n    for (var i = 0; i < arr.length; i++) {\n      cb.call(thisp || arr, arr[i], i, arr);\n    }\n  }\n}\n\nvar isEmpty = function( obj ) {\n  for ( var key in obj ) {\n    if ( hasOwnProperty.call( obj, key ) ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction extract_attr( jsonml ) {\n  return isArray(jsonml)\n      && jsonml.length > 1\n      && typeof jsonml[ 1 ] === \"object\"\n      && !( isArray(jsonml[ 1 ]) )\n      ? jsonml[ 1 ]\n      : undefined;\n}\n\n\n\n/**\n *  renderJsonML( jsonml[, options] ) -> String\n *  - jsonml (Array): JsonML array to render to XML\n *  - options (Object): options\n *\n *  Converts the given JsonML into well-formed XML.\n *\n *  The options currently understood are:\n *\n *  - root (Boolean): wether or not the root node should be included in the\n *    output, or just its children. The default `false` is to not include the\n *    root itself.\n */\nexpose.renderJsonML = function( jsonml, options ) {\n  options = options || {};\n  // include the root element in the rendered output?\n  options.root = options.root || false;\n\n  var content = [];\n\n  if ( options.root ) {\n    content.push( render_tree( jsonml ) );\n  }\n  else {\n    jsonml.shift(); // get rid of the tag\n    if ( jsonml.length && typeof jsonml[ 0 ] === \"object\" && !( jsonml[ 0 ] instanceof Array ) ) {\n      jsonml.shift(); // get rid of the attributes\n    }\n\n    while ( jsonml.length ) {\n      content.push( render_tree( jsonml.shift() ) );\n    }\n  }\n\n  return content.join( \"\\n\\n\" );\n};\n\nfunction escapeHTML( text ) {\n  return text.replace( /&/g, \"&amp;\" )\n             .replace( /</g, \"&lt;\" )\n             .replace( />/g, \"&gt;\" )\n             .replace( /\"/g, \"&quot;\" )\n             .replace( /'/g, \"&#39;\" );\n}\n\nfunction render_tree( jsonml ) {\n  // basic case\n  if ( typeof jsonml === \"string\" ) {\n    return escapeHTML( jsonml );\n  }\n\n  var tag = jsonml.shift(),\n      attributes = {},\n      content = [];\n\n  if ( jsonml.length && typeof jsonml[ 0 ] === \"object\" && !( jsonml[ 0 ] instanceof Array ) ) {\n    attributes = jsonml.shift();\n  }\n\n  while ( jsonml.length ) {\n    content.push( render_tree( jsonml.shift() ) );\n  }\n\n  var tag_attrs = \"\";\n  for ( var a in attributes ) {\n    tag_attrs += \" \" + a + '=\"' + escapeHTML( attributes[ a ] ) + '\"';\n  }\n\n  // be careful about adding whitespace here for inline elements\n  if ( tag == \"img\" || tag == \"br\" || tag == \"hr\" ) {\n    return \"<\"+ tag + tag_attrs + \"/>\";\n  }\n  else {\n    return \"<\"+ tag + tag_attrs + \">\" + content.join( \"\" ) + \"</\" + tag + \">\";\n  }\n}\n\nfunction convert_tree_to_html( tree, references, options ) {\n  var i;\n  options = options || {};\n\n  // shallow clone\n  var jsonml = tree.slice( 0 );\n\n  if ( typeof options.preprocessTreeNode === \"function\" ) {\n      jsonml = options.preprocessTreeNode(jsonml, references);\n  }\n\n  // Clone attributes if they exist\n  var attrs = extract_attr( jsonml );\n  if ( attrs ) {\n    jsonml[ 1 ] = {};\n    for ( i in attrs ) {\n      jsonml[ 1 ][ i ] = attrs[ i ];\n    }\n    attrs = jsonml[ 1 ];\n  }\n\n  // basic case\n  if ( typeof jsonml === \"string\" ) {\n    return jsonml;\n  }\n\n  // convert this node\n  switch ( jsonml[ 0 ] ) {\n    case \"header\":\n      jsonml[ 0 ] = \"h\" + jsonml[ 1 ].level;\n      delete jsonml[ 1 ].level;\n      break;\n    case \"bulletlist\":\n      jsonml[ 0 ] = \"ul\";\n      break;\n    case \"numberlist\":\n      jsonml[ 0 ] = \"ol\";\n      break;\n    case \"listitem\":\n      jsonml[ 0 ] = \"li\";\n      break;\n    case \"para\":\n      jsonml[ 0 ] = \"p\";\n      break;\n    case \"markdown\":\n      jsonml[ 0 ] = \"html\";\n      if ( attrs ) delete attrs.references;\n      break;\n    case \"code_block\":\n      jsonml[ 0 ] = \"pre\";\n      i = attrs ? 2 : 1;\n      var code = [ \"code\" ];\n      code.push.apply( code, jsonml.splice( i, jsonml.length - i ) );\n      jsonml[ i ] = code;\n      break;\n    case \"inlinecode\":\n      jsonml[ 0 ] = \"code\";\n      break;\n    case \"img\":\n      jsonml[ 1 ].src = jsonml[ 1 ].href;\n      delete jsonml[ 1 ].href;\n      break;\n    case \"linebreak\":\n      jsonml[ 0 ] = \"br\";\n    break;\n    case \"link\":\n      jsonml[ 0 ] = \"a\";\n      break;\n    case \"link_ref\":\n      jsonml[ 0 ] = \"a\";\n\n      // grab this ref and clean up the attribute node\n      var ref = references[ attrs.ref ];\n\n      // if the reference exists, make the link\n      if ( ref ) {\n        delete attrs.ref;\n\n        // add in the href and title, if present\n        attrs.href = ref.href;\n        if ( ref.title ) {\n          attrs.title = ref.title;\n        }\n\n        // get rid of the unneeded original text\n        delete attrs.original;\n      }\n      // the reference doesn't exist, so revert to plain text\n      else {\n        return attrs.original;\n      }\n      break;\n    case \"img_ref\":\n      jsonml[ 0 ] = \"img\";\n\n      // grab this ref and clean up the attribute node\n      var ref = references[ attrs.ref ];\n\n      // if the reference exists, make the link\n      if ( ref ) {\n        delete attrs.ref;\n\n        // add in the href and title, if present\n        attrs.src = ref.href;\n        if ( ref.title ) {\n          attrs.title = ref.title;\n        }\n\n        // get rid of the unneeded original text\n        delete attrs.original;\n      }\n      // the reference doesn't exist, so revert to plain text\n      else {\n        return attrs.original;\n      }\n      break;\n  }\n\n  // convert all the children\n  i = 1;\n\n  // deal with the attribute node, if it exists\n  if ( attrs ) {\n    // if there are keys, skip over it\n    for ( var key in jsonml[ 1 ] ) {\n        i = 2;\n        break;\n    }\n    // if there aren't, remove it\n    if ( i === 1 ) {\n      jsonml.splice( i, 1 );\n    }\n  }\n\n  for ( ; i < jsonml.length; ++i ) {\n    jsonml[ i ] = convert_tree_to_html( jsonml[ i ], references, options );\n  }\n\n  return jsonml;\n}\n\n\n// merges adjacent text nodes into a single node\nfunction merge_text_nodes( jsonml ) {\n  // skip the tag name and attribute hash\n  var i = extract_attr( jsonml ) ? 2 : 1;\n\n  while ( i < jsonml.length ) {\n    // if it's a string check the next item too\n    if ( typeof jsonml[ i ] === \"string\" ) {\n      if ( i + 1 < jsonml.length && typeof jsonml[ i + 1 ] === \"string\" ) {\n        // merge the second string into the first and remove it\n        jsonml[ i ] += jsonml.splice( i + 1, 1 )[ 0 ];\n      }\n      else {\n        ++i;\n      }\n    }\n    // if it's not a string recurse\n    else {\n      merge_text_nodes( jsonml[ i ] );\n      ++i;\n    }\n  }\n}\n\n} )( (function() {\n  if ( typeof exports === \"undefined\" ) {\n    window.markdown = {};\n    return window.markdown;\n  }\n  else {\n    return exports;\n  }\n} )() );\n\n\n\n// WEBPACK FOOTER //\n// ../~/markdown/lib/markdown.js","var EventEmitter = require('events').EventEmitter,\n    queryString = require('query-string');\n\nfunction tryParseJson(data){\n    try{\n        return JSON.parse(data);\n    }catch(error){\n        return error;\n    }\n}\n\nfunction timeout(){\n   this.request.abort();\n   this.emit('timeout');\n}\n\nfunction Ajax(settings){\n    var queryStringData,\n        ajax = this;\n\n    if(typeof settings === 'string'){\n        settings = {\n            url: settings\n        };\n    }\n\n    if(typeof settings !== 'object'){\n        settings = {};\n    }\n\n    ajax.settings = settings;\n    ajax.request = new XMLHttpRequest();\n    ajax.settings.method = ajax.settings.method || 'get';\n\n    if(ajax.settings.cors && !'withCredentials' in ajax.request){\n        if (typeof XDomainRequest !== 'undefined') {\n            // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n            ajax.request = new XDomainRequest();\n        } else {\n            // Otherwise, CORS is not supported by the browser.\n            ajax.emit('error', new Error('Cors is not supported by this browser'));\n        }\n    }\n\n    if(ajax.settings.cache === false){\n        ajax.settings.data = ajax.settings.data || {};\n        ajax.settings.data._ = new Date().getTime();\n    }\n\n    if(ajax.settings.method.toLowerCase() === 'get' && typeof ajax.settings.data === 'object'){\n        var urlParts = ajax.settings.url.split('?');\n\n        queryStringData = queryString.parse(urlParts[1]);\n\n        for(var key in ajax.settings.data){\n            queryStringData[key] = ajax.settings.data[key];\n        }\n\n        var parsedQueryStringData = queryString.stringify(queryStringData);\n\n        ajax.settings.url = urlParts[0] + (parsedQueryStringData ? '?' + parsedQueryStringData : '');\n        ajax.settings.data = null;\n    }\n\n    ajax.request.addEventListener('progress', function(event){\n        ajax.emit('progress', event);\n    }, false);\n\n    ajax.request.addEventListener('load', function(event){\n        var data = event.target.responseText;\n\n        if(ajax.settings.dataType && ajax.settings.dataType.toLowerCase() === 'json'){\n            if(data === ''){\n                data = undefined;\n            }else{\n                data = tryParseJson(data);\n                if(data instanceof Error){\n                    ajax.emit('error', event, data);\n                    return;\n                }\n            }\n        }\n\n        if(event.target.status >= 400){\n            ajax.emit('error', event, data);\n        } else {\n            ajax.emit('success', event, data);\n        }\n\n    }, false);\n\n    ajax.request.addEventListener('error', function(event){\n        ajax.emit('error', event);\n    }, false);\n\n    ajax.request.addEventListener('abort', function(event){\n        ajax.emit('error', event, new Error('Connection Aborted'));\n        ajax.emit('abort', event);\n    }, false);\n\n    ajax.request.addEventListener('loadend', function(event){\n        clearTimeout(ajax._requestTimeout);\n        ajax.emit('complete', event);\n    }, false);\n\n    ajax.request.open(ajax.settings.method || 'get', ajax.settings.url, true);\n\n    if(ajax.settings.cors && 'withCredentials' in ajax.request) {\n        ajax.request.withCredentials = !!settings.withCredentials;\n    }\n\n    // Set default headers\n    if(ajax.settings.contentType !== false){\n        ajax.request.setRequestHeader('Content-Type', ajax.settings.contentType || 'application/json; charset=utf-8');\n    }\n    if(ajax.settings.requestedWith !== false) {\n        ajax.request.setRequestHeader('X-Requested-With', ajax.settings.requestedWith || 'XMLHttpRequest');\n    }\n    if(ajax.settings.auth){\n        ajax.request.setRequestHeader('Authorization', ajax.settings.auth);\n    }\n\n    // Set custom headers\n    for(var headerKey in ajax.settings.headers){\n        ajax.request.setRequestHeader(headerKey, ajax.settings.headers[headerKey]);\n    }\n\n    if(ajax.settings.processData !== false && ajax.settings.dataType === 'json'){\n        ajax.settings.data = JSON.stringify(ajax.settings.data);\n    }\n}\n\nAjax.prototype = Object.create(EventEmitter.prototype);\n\nAjax.prototype.send = function(){\n    var ajax = this;\n\n    ajax._requestTimeout = setTimeout(\n        function(){\n            timeout.apply(ajax, []);\n        },\n        ajax.settings.timeout || 120000\n    );\n\n    ajax.request.send(ajax.settings.data && ajax.settings.data);\n};\n\nmodule.exports = Ajax;\n\n\n\n// WEBPACK FOOTER //\n// ../~/simple-ajax/index.js","/*!\n\tquery-string\n\tParse and stringify URL query strings\n\thttps://github.com/sindresorhus/query-string\n\tby Sindre Sorhus\n\tMIT License\n*/\n(function () {\n\t'use strict';\n\tvar queryString = {};\n\n\tqueryString.parse = function (str) {\n\t\tif (typeof str !== 'string') {\n\t\t\treturn {};\n\t\t}\n\n\t\tstr = str.trim().replace(/^(\\?|#)/, '');\n\n\t\tif (!str) {\n\t\t\treturn {};\n\t\t}\n\n\t\treturn str.trim().split('&').reduce(function (ret, param) {\n\t\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t\tvar key = parts[0];\n\t\t\tvar val = parts[1];\n\n\t\t\tkey = decodeURIComponent(key);\n\t\t\t// missing `=` should be `null`:\n\t\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\t\tval = val === undefined ? null : decodeURIComponent(val);\n\n\t\t\tif (!ret.hasOwnProperty(key)) {\n\t\t\t\tret[key] = val;\n\t\t\t} else if (Array.isArray(ret[key])) {\n\t\t\t\tret[key].push(val);\n\t\t\t} else {\n\t\t\t\tret[key] = [ret[key], val];\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}, {});\n\t};\n\n\tqueryString.stringify = function (obj) {\n\t\treturn obj ? Object.keys(obj).map(function (key) {\n\t\t\tvar val = obj[key];\n\n\t\t\tif (Array.isArray(val)) {\n\t\t\t\treturn val.map(function (val2) {\n\t\t\t\t\treturn encodeURIComponent(key) + '=' + encodeURIComponent(val2);\n\t\t\t\t}).join('&');\n\t\t\t}\n\n\t\t\treturn encodeURIComponent(key) + '=' + encodeURIComponent(val);\n\t\t}).join('&') : '';\n\t};\n\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(function() { return queryString; });\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = queryString;\n\t} else {\n\t\tself.queryString = queryString;\n\t}\n})();\n\n\n\n// WEBPACK FOOTER //\n// ../~/simple-ajax/~/query-string/query-string.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() { return this; })();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// ../~/webpack/buildin/global.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ../~/webpack/~/node-libs-browser/~/events/events.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ../~/webpack/~/node-libs-browser/~/process/browser.js","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../~/webpack/~/node-libs-browser/~/util/~/inherits/inherits_browser.js","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n// WEBPACK FOOTER //\n// ../~/webpack/~/node-libs-browser/~/util/support/isBufferBrowser.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n\n\n// WEBPACK FOOTER //\n// ../~/webpack/~/node-libs-browser/~/util/util.js","var map = {\n\t\"./Access-Control.md\": 2,\n\t\"./Balancing.md\": 3,\n\t\"./Configuration.md\": 4,\n\t\"./Discovery.md\": 5,\n\t\"./Docker---Swarm-Balancing.md\": 6,\n\t\"./ElasticSearch-cluster-with-Exec-discovery.md\": 7,\n\t\"./Healthchecks.md\": 8,\n\t\"./Home.md\": 9,\n\t\"./Installation.md\": 10,\n\t\"./Introduction.md\": 0,\n\t\"./Performance-tests.md\": 11,\n\t\"./REST-API.md\": 12,\n\t\"./SRV-Balancing.md\": 13,\n\t\"./Service-balancing-with-Consul-discovery-and-Docker-Registrator.md\": 14,\n\t\"./Static-balancing.md\": 15,\n\t\"./TLS-Termination.md\": 16,\n\t\"./Windows-specific-notes.md\": 17,\n\t\"./_Sidebar.md\": 1\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 33;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gobetween.wiki ^\\.\\/.*\\.md$\n// module id = 33\n// module chunks = 0","import particles from './particles.js'\nimport './doc.js'\nimport './downloads.js'\nimport './mobileNav.js'\n\nrequire('../css/style.styl');\n\nconst particlesJs = document.getElementById('particles-js');\nconst headeSection = document.getElementsByClassName('header-section');\nconst headerHeight = document.getElementsByTagName('header')[0].offsetHeight;\nlet currentScrollTop = document.body.scrollTop;\nlet previusScrollTop = currentScrollTop;\n\nif (particlesJs) {\n    particles.particlesJS.load('particles-js', './particlesjs-config.json', () => {\n        console.log('callback - particles-js config loaded');\n    });\n}\n\n\nif (headeSection.length) {\n    window.addEventListener(\"scroll\", () => {\n        currentScrollTop = document.body.scrollTop;\n\n        if (!currentScrollTop) {\n            document.body.className = \"\";\n        } else if ( (currentScrollTop - previusScrollTop) > 0 && currentScrollTop > headerHeight ) {\n            document.body.className = \"hide-header\";\n        } else if ((currentScrollTop - previusScrollTop) < 0) {\n            document.body.className = \"show-header\";\n        }\n\n        previusScrollTop = currentScrollTop;\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./js/main.js"],"sourceRoot":""}